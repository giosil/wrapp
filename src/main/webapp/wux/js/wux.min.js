var __spreadArray=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,o=0,r=e.length;o<r;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o])
return t.concat(n||Array.prototype.slice.call(e))},__extends=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(e,i)}
return function(e,i){function n(){this.constructor=e}if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null")
t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}()
if("undefined"==typeof jQuery)throw new Error("WUX requires jQuery");+function(t){t.fn.wuxComponent=function(t){var e=this.data("wuxComponent")
return e||(t instanceof WUX.WComponent?(this.data("wuxComponent",t),t):(null==t&&(t=!0),t?(e=new WUX.WComponent(this),this.data("wuxComponent",e),e):void 0))}}(jQuery)
var WuxDOM=function(){function t(){}return t.onRender=function(e){t.onRenderHandlers.push(e)},t.onUnmount=function(e){t.onUnmountHandlers.push(e)},t.render=function(e,i,n,o){WUX.debug&&console.log("WuxDOM.render "+WUX.str(e)+" on "+WUX.str(i)+"..."),$(document).ready(function(){WUX.global.init(function(){i||(i=t.lastCtx?t.lastCtx:$("#view-root")),n&&n(i)
var r=t.mount(e,i)
if(t.lastCtx=r,o&&o(i),t.onRenderHandlers.length>0){for(var s=e instanceof WUX.WComponent?e:null,a={component:s,element:r,target:r.get(0),type:"render"},l=0,h=t.onRenderHandlers;l<h.length;l++){(0,h[l])(a)}t.onRenderHandlers=[]}})})},t.mount=function(e,i){if(i||(i=t.lastCtx?t.lastCtx:$("#view-root")),WUX.debug&&console.log("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(i)+"..."),null==e)return void console.error("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(i)+" -> invalid component")
var n="string"==typeof i?i.indexOf("#")<0?$("#"+i):$(i):i
return n.length?(t.lastCtx=n,e instanceof WUX.WComponent?(e.mount(n),n.wuxComponent(e)):n.append(e),WUX.debug&&console.log("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(i)+" completed."),n):void console.error("WuxDOM.mount "+WUX.str(e)+" on "+WUX.str(i)+" -> context unavailable")},t.unmount=function(e){e||(e=t.lastCtx?t.lastCtx:$("#view-root")),WUX.debug&&console.log("WuxDOM.unmount "+WUX.str(e)+"...")
var i="string"==typeof e?e.indexOf("#")<0?$("#"+e):$(e):e
if(!i.length)return void console.error("WuxDOM.unmount "+WUX.str(e)+" -> node unavailable")
var n=i.wuxComponent(!1)
if(n&&n.unmount(),i.html(""),WUX.debug&&console.log("WuxDOM.unmount "+WUX.str(e)+" completed."),t.onUnmountHandlers.length>0){for(var o={component:n,element:i,target:i.get(0),type:"unmount"},r=0,s=t.onUnmountHandlers;r<s.length;r++){(0,s[r])(o)}t.onUnmountHandlers=[]}return i},t.replace=function(e,i){var n
if(i||(i=e,e=void 0),e)if("string"==typeof e){var o=WUX.getComponent(e)
o||(n=o.getContext(),o.unmount())}else e instanceof WUX.WComponent?(n=e.getContext(),e.unmount()):(n=e.parent())&&n.html("")
else n=t.unmount()
return n||(n=$("#view-root")),n.length?t.mount(i,n):void console.error("WuxDOM.replace "+WUX.str(n)+" -> node unavailable")},t.onRenderHandlers=[],t.onUnmountHandlers=[],t}(),WUX
!function(t){function e(t){if(t){if(t instanceof jQuery)return t.attr("id")
if(t instanceof U)return t.id
if("string"==typeof t&&t.indexOf("<")<0)return 0==t.indexOf("#")?t.substring(1):t
if("object"==typeof t&&!t.id)return""+t.id
var e=$(t),i=e.attr("id")
if(!i){var n=e.prop("tagName")
"i"!=n&&"I"!=n||(i=e.parent().attr("id"))}return i}}function i(t,i){var n=e(t)
if(!n)return""
var o=n.indexOf("-")
return o<0?n:i?n.substring(o+1):n.substring(0,o)}function n(t){var i=e(t)
if(!i)return""
var n=i.lastIndexOf("-")
if(n<0)return i
if(n>0){if("-"==i.charAt(n-1))return i.substring(n)}return i.substring(n+1)}function o(t){if(t){var e=$("#"+t)
if(e.length)return e.wuxComponent(!1)}}function r(t){return t&&t.parent?r(t.parent):t}function s(t,e){if(t){var i=$("#"+t)
if(i.length){var n=i.wuxComponent(!1)
if(n)return n.setProps(e),n}}}function a(t,e){if(!t)return e
var i=$("#"+t)
if(!i.length)return e
var n=i.wuxComponent(!1)
if(!n)return e
var o=n.getProps()
return null==o?e:o}function l(t,e){if(t){var i=$("#"+t)
if(i.length){var n=i.wuxComponent(!1)
if(n)return n.setState(e),n}}}function h(t,e){if(!t)return e
var i=$("#"+t)
if(!i.length)return e
var n=i.wuxComponent(!1)
if(!n)return e
var o=n.getState()
return null==o?e:o}function u(t){if(!t)return null
var e=t.lastIndexOf(".")
if(e>0){var i=t.substring(0,e)
if(window[i]){var n=t.substring(e+1)
for(var o in window[i])if(o==n)return new window[i][o]
return null}}var r=window[t]
return r&&r.prototype?Object.create(r.prototype):null}function d(t,i){if("string"==typeof t&&"string"==typeof i)return t==i
if("string"==typeof t||"string"==typeof i)return!1
var n=e(t),o=e(i)
return n&&o&&n==o}function p(t){if(!t)return["",$("<span></span>"),""]
if("string"==typeof t){if("<"!=t.charAt(0)||">"!=t.charAt(t.length-1)){var e=t.indexOf("<")
if(e<0)return["",$("<span>"+t.replace(">","&gt;")+"</span>"),""]
var i=t.lastIndexOf(">")
return i<0?["",$("<span>"+t.replace("<","&lt;")+"</span>"),""]:[t.substring(0,e),$(t.substring(e,i+1)),t.substring(i+1)]}return["",$(t),""]}return t instanceof jQuery?["",t,""]:["",$("<span>"+t+"</span>"),""]}function c(t){if(!t)return["","",""]
if(" "==t)return["","&nbsp;",""]
var e=" "==t.charAt(0)?"&nbsp;":"",i=t.length>1&&" "==t.charAt(t.length-1)?"&nbsp;":"",n=t.trim().split("<>")
return!n||n.length<2?[e,t.trim(),i]:(e+=n[0],2==n.length?[e,n[1],""]:(i+=n[2],[e,n[1],i]))}function f(t){if(t instanceof U){var e=t.name,i=t.id
return e||(e="WComponent"),i?e+"("+i+")":e}if(t instanceof jQuery){if(t.length){var n=t.attr("id")?" id="+t.attr("id"):""
return t.selector?'$("'+t.selector+'")':"$(<"+t.prop("tagName")+n+">)"}return'$("'+t.selector+'").length=0'}return"object"==typeof t?JSON.stringify(t):t+""}function g(e){if(!e)return""
if(e instanceof U){var i=e.rootTag
if(i)return i.toLowerCase()
var n=e.getRoot()
return n?"":t.getTagName(n)}if(!(e instanceof jQuery)){var o=""+e
if("<"==o.charAt(0)){var r=o.indexOf(" ")
if(r<0&&(r=o.indexOf(">")),r>0){var i=o.substring(1,r).toLowerCase()
return"/"==i.charAt(i.length-1)?i.substring(0,i.length-1):i}return""}return"#"==o.charAt(0)?t.getTagName($(o)):t.getTagName($("#"+o))}if(e.length){var i=e.prop("tagName")
return i?(""+i).toLowerCase():""}return""}function y(t,e){return e?null==t?"string"==typeof e?""==e:!e.id:"object"==typeof t?"string"==typeof e?e==t.id:e.id==t.id:"string"==typeof e?e==t:e.id==t:!t}function b(t){if(!t)return 0
var e=""+t,i=0,n=e.length,o=0
if(n>0)for(;o<n;)i=(i<<5)-i+e.charCodeAt(o++)|0
return i}function m(t){var e=v(t),i={}
if(!e)return i
for(var n=e.split(";"),o=0,r=n;o<r.length;o++){var s=r[o],a=s.split(":")
a.length<2||(i[a[0].trim()]=a[1].trim())}return i}function v(t){var e=""
return t?"string"==typeof t?t.indexOf(":")<=0?"":";"!=t.charAt(t.length-1)?t+";":t:(t.s&&(e+=w(t.s)),t.fs&&(e+="font-style:"+t.fs+";"),t.fw&&(e+="font-weight:"+t.fw+";"),t.tt&&(e+="text-transform:"+t.tt+";"),t.tr&&(e+="transform:"+t.tr+";"),t.fl&&(e+="float:"+t.fl+";"),t.cl&&(e+="clear:"+t.cl+";"),t.a&&(e+="text-align:"+t.a+";"),t.c&&(e+="color:"+t.c+";"),t.v&&(e+="vertical-align:"+t.v+";"),t.d&&(e+="display:"+t.d+";"),t.z&&(e+="z-index:"+t.z+";"),t.lh&&(e+="line-height:"+t.lh+";"),t.ps&&(e+="position:"+t.ps+";"),t.o&&(e+="overflow:"+t.o+";"),t.ox&&(e+="overflow-x:"+t.ox+";"),t.oy&&(e+="overflow-y:"+t.oy+";"),null!=t.op&&(e+="opacity:"+t.op+";"),null!=t.ol&&(e+="outline:"+t.ol+";"),t.cr&&(e+="cursor:"+t.cr+";"),t.cn&&(e+="content:"+t.cn+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-webkit"+t.k+";":"-webkit-"+t.k+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-moz"+t.k+";":"-moz-"+t.k+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-o"+t.k+";":"-o-"+t.k+";"),t.k&&t.k.indexOf(":")>0&&(e+="-"==t.k.charAt(0)?"-ms"+t.k+";":"-ms-"+t.k+";"),t.bs&&(e+="box-shadow:"+t.bs+";"),t.bz&&(e+="box-sizing:"+t.bz+";"),t.b&&(e+=t.b.indexOf(":")>0?w("border"+t.b):t.b.match(/^(|none|inherit|initial|unset)$/)?"border:"+t.b+";":t.b.indexOf(" ")>0?"border:"+t.b+";":"border:1px solid "+t.b+";"),t.bc&&(e+="border-collapse:"+t.bc+";"),null!=t.br&&(e+="number"==typeof t.br?"border-radius:"+t.br+"px;":"border-radius:"+t.br+";"),null!=t.bsp&&(e+="number"==typeof t.bsp?"border-spacing:"+t.bsp+"px;":"border-spacing:"+t.bsp+";"),null!=t.m&&(e+="number"==typeof t.m?"margin:"+t.m+"px;":t.m.indexOf(":")>0?w("margin"+t.m):"margin:"+t.m+";"),null!=t.mt&&(e+="number"==typeof t.mt?"margin-top:"+t.mt+"px;":"margin-top:"+t.mt+";"),null!=t.mr&&(e+="number"==typeof t.mr?"margin-right:"+t.mr+"px;":"margin-right:"+t.mr+";"),null!=t.mb&&(e+="number"==typeof t.mb?"margin-bottom:"+t.mb+"px;":"margin-bottom:"+t.mb+";"),null!=t.ml&&(e+="number"==typeof t.ml?"margin-left:"+t.ml+"px;":"margin-left:"+t.ml+";"),null!=t.p&&(e+="number"==typeof t.p?"padding:"+t.p+"px;":t.p.indexOf(":")>0?w("padding"+t.p):"padding:"+t.p+";"),null!=t.pt&&(e+="number"==typeof t.pt?"padding-top:"+t.pt+"px;":"padding-top:"+t.pt+";"),null!=t.pr&&(e+="number"==typeof t.pr?"padding-right:"+t.pr+"px;":"padding-right:"+t.pr+";"),null!=t.pb&&(e+="number"==typeof t.pb?"padding-bottom:"+t.pb+"px;":"padding-bottom:"+t.pb+";"),null!=t.pl&&(e+="number"==typeof t.pl?"padding-left:"+t.pl+"px;":"padding-left:"+t.pl+";"),null!=t.f&&(e+="number"==typeof t.f?"font-size:"+t.f+"px;":t.f.indexOf(":")>0?w("font"+t.f):"font-size:"+t.f+";"),t.bg&&(e+=t.bg.indexOf(":")>0?w("background"+t.bg):t.bg.indexOf("url")>=0?"background:"+t.bg+";":"background-color:"+t.bg+";"),t.bgi&&(e+="background-image:"+t.bgi+";"),t.bgp&&(e+="background-position:"+t.bgp+";"),t.bgr&&(e+="background-repeat:"+t.bgr+";"),t.text&&(e+=t.text.indexOf(":")>0?w("text"+t.text):"text-decoration:"+t.text+";"),null!=t.l&&(e+="number"==typeof t.l?"left:"+t.l+"px;":"left:"+t.l+";"),null!=t.r&&(e+="number"==typeof t.r?"right:"+t.r+"px;":"right:"+t.r+";"),null!=t.t&&(e+="number"==typeof t.t?"top:"+t.t+"px;":"top:"+t.t+";"),null!=t.bt&&(e+="number"==typeof t.bt?"bottom:"+t.bt+"px;":"bottom:"+t.bt+";"),t.w&&(e+="number"==typeof t.w?"width:"+t.w+"px;":"width:"+t.w+";"),t.h&&(e+="number"==typeof t.h?"height:"+t.h+"px;":"height:"+t.h+";"),t.minw&&(e+="number"==typeof t.minw?"min-width:"+t.minw+"px;":"min-width:"+t.minw+";"),t.maxw&&(e+="number"==typeof t.maxw?"max-width:"+t.maxw+"px;":"max-width:"+t.maxw+";"),t.minh&&(e+="number"==typeof t.minh?"min-height:"+t.minh+"px;":"min-height:"+t.minh+";"),t.maxh&&(e+="number"==typeof t.maxh?"max-height:"+t.maxh+"px;":"max-height:"+t.maxh+";"),t.ws&&(e+="white-space:"+t.ws+";"),e):e}function _(t,e,i,n){return e&&i?t?n&&t.indexOf(e+":")>=0?w(t):w(t)+e+":"+i+";":e+":"+i+";":w(t)}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||0==t.length)return""
for(var i="",n={},o=!0,r=0;r<t.length;r++){var s=t[r]
s&&("string"==typeof s?(o||(i+=v(n),n={},o=!0),s.indexOf(":")>0&&(i+=s,";"!=s.charAt(s.length-1)&&(i+=";"))):($.extend(n,s),o=!1))}return o||(i+=v(n)),i}function x(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||!t.length)return""
for(var i="",n=0;n<t.length;n++){var o=t[n]
if(o){var r="string"==typeof o?o:o.n
r&&(r.indexOf(":")>0||(i+=r+" "))}}return i.trim()}function C(t){if(!t)return""
if("string"==typeof t)return t
if("object"==typeof t){var e=""
for(var i in t)e+=i+'="'+t[i]+'" '
return e.trim()}return""}function S(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]
if(!e||!e.length)return""
for(var n=t?"<ul"+O(t)+">":"<ul>",o=0;o<e.length;o++){var r=e[o]
null!=r&&(n+="<li>"+r+"</li>")}return n+="</ul>"}function T(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n]
if(!i||!i.length)return""
var o=""
o=null!=e?t?"<ol"+O(t)+' start="'+e+'">':'<ol start="'+e+'">':t?"<ol"+O(t)+">":"<ol>"
for(var r=0;r<i.length;r++){var s=i[r]
null!=s&&(o+="<li>"+s+"</li>")}return o+="</ol>"}function O(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||!t.length)return""
var i=x.apply(void 0,t),n=w.apply(void 0,t),o=""
return i&&(o+=' class="'+i+'"'),n&&(o+=' style="'+n+'"'),o}function k(t,e){if(!t||!e)return t
for(var i=t.split(" "),n="",o=0,r=i;o<r.length;o++){var s=r[o]
s!=e&&(n+=s+" ")}return n.trim()}function W(t,e){if(!t)return e
if(!e)return t
for(var i=t.split(" "),n=!1,o="",r=0,s=i;r<s.length;r++){var a=s[r]
a!=e?o+=a+" ":n=!0}return n?o.trim():o.trim()+" "+e}function R(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]
if(!t||!e||!e.length)return t
if(t instanceof U)t.css.apply(t,e)
else if(t instanceof jQuery){if(!t.length)return t
var n=w.apply(void 0,e),o=x.apply(void 0,e)
o&&t.addClass(o),n&&t.css(m(n))}return t}function D(t,e,i,n,o,r){if(!t)return""
e||(e=""),i||(i="")
var s=r?' title="'+r+'"':""
return o=o?" "+o:"",t.indexOf(".")>0?e+'<img src="'+t+'"'+s+">"+i:!n||n<2?e+'<i class="fa '+t+o+'"'+s+"></i>"+i:(n>5&&(n=5),e+'<i class="fa '+t+" fa-"+n+"x"+o+'"'+s+"></i>"+i)}function I(e,i,n,o,r,s){e||(e="div")
var a,l
"string"==typeof n?n.indexOf(":")>0?l=n:a=n:n&&(n.n&&(a=n.n),l=t.style(n)),s&&(a?a+=" "+s:a=s)
var h="<"+e
r&&(h+=' id="'+r+'"'),a&&(h+=' class="'+a+'"'),l&&(h+=' style="'+l+'"')
var u=t.attributes(o)
u&&(h+=" "+u),h+=">"
var d=c(i)
return h+=d[1],"input"==e?d[0]+h+d[2]:(h+="</"+e+">",d[0]+h+d[2])}function E(e,i,n,o){if(!e||!i)return e
var r=t.cls(i.classStyle,i.style),s=t.style(i.style),a=i.type?i.type:"div",l="<"+a
i.id&&(l+=' id="'+i.id+'"'),r&&(l+=' class="'+r+'"'),s&&(l+=' style="'+s+'"')
var h=t.attributes(C)
h&&(l+=" "+h),i.title&&(l+=' title="'+i.title+'"'),l+=">",l+="</"+a+">"
var u=$(l)
return i.element=u,n&&e.append(n),e.append(u),o&&e.append(o),i.wrapper?t.addWrapper(u,i.wrapper,i.begin,i.end):(i.begin&&u.append(i.begin),i.end&&u.append(i.end),u)}function A(e,i){if(e){if("string"==typeof e){if(e.indexOf("<")>=0)return
e.indexOf("#")<0&&(e="#"+e)
var n=t.getComponent(e)
if(n){if(void 0===i)return n.getState()
n.setState(i)}else{if(void 0===i)return $(e).val()
$(e).val(i)}}else if(e instanceof U){if(void 0===i)return e.getState()
e.setState(i)}else if(e instanceof jQuery){if(void 0===i)return e.val()
e.val(i)}else{if(void 0===i)return $(e).val()
$(e).val(i)}return i}}function L(e,i){if(void 0===i&&(i="div"),e){if("string"==typeof e){if(e.indexOf("<")>=0)return
return e.indexOf("#")<0&&(e="#"+e),t.getContainer($(e))}if(e instanceof U){var n=e.getContext()
if(n){var o=n.closest(i)
if(o&&o.length)return o}return n}var o=e.parent().closest(i)
return o&&o.length?o:e.parent()}}function M(t,e,i,n){if(void 0===e&&(e=!0),void 0===i&&(i=!1),t){if(n&&"object"==typeof n){var o=""
for(var r in n)if(n.hasOwnProperty(r)){var s=n[r]
o+="&"+encodeURIComponent(r)+"="+encodeURIComponent(s)}o&&(t.indexOf("?")>0?t+=o:t+="?"+o.substring(1))}i?window.open(t,"_blank"):e?window.location.assign(t):window.location.replace(t)}}t.debug=!1,t.registry=[],t.version="1.0.0"
var U=function(){function e(e,i,n,o,r,s){if(this.mounted=!1,this.debug=t.debug,this.forceOnChange=!1,this.rootTag="div",this.subSeq=0,this.dontTrigger=!1,this._visible=!0,this._enabled=!0,this.handlers={},this.cuid=Math.floor(1e9*Math.random()),e instanceof jQuery)this.root=e,this.root&&this.root.length&&(this.mounted=!0),this.debug&&console.log("["+f(this)+"] new wrapper root="+f(this.root))
else{"string"==typeof e&&(this.id="*"==e?"w"+this.cuid:e),this.name=i||"WComponent",this._classStyle=o
var a=t.cls(r)
a&&(this._classStyle=this._classStyle?this._classStyle+" "+a:a),this._style=t.style(r),this._attributes=t.attributes(s),this.debug&&console.log("["+f(this)+"] new"),this.debug&&console.log("["+f(this)+"] updateProps",n),this.updateProps(n)}}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.internal?this.internal.visible:this._visible},set:function(t){this._visible=t,this.internal&&(this.internal.visible=t),this.root&&this.root.length&&(this._visible?this.root.show():this.root.hide())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this.internal?this.internal.enabled:this._enabled},set:function(t){this._enabled=t,this.internal&&(this.internal.enabled=t),this.root&&this.root.length&&this.root.prop("disabled",!this._enabled)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.internal?this.internal.style:this._style},set:function(e){this._style=t.css(this._baseStyle,e),this.internal&&(this.internal.style=e),this.root&&this.root.length&&this.root.attr("style",this._style)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classStyle",{get:function(){return this.internal?this.internal.classStyle:this._classStyle},set:function(e){this.internal&&(this.internal.classStyle=e)
var i=!1,n=!1
e&&e.length>1&&"!"==e.charAt(0)?(e=e.substring(1),i=!0):e&&e.length>1&&"?"==e.charAt(0)&&(e=e.substring(1),n=!0),this._classStyle=i?t.removeClass(this._classStyle,e):n?t.toggleClass(this._classStyle,e):t.cls(this._baseClass,e),this.root&&this.root.length&&(i?this.root.removeClass(e):n?this.root.toggleClass(e):this.root.addClass(this._classStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"attributes",{get:function(){return this.internal?this.internal.attributes:this._attributes},set:function(t){this._attributes=t,this.internal&&(this.internal.attributes=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.internal?this.internal.tooltip:this._tooltip},set:function(t){this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.root&&this.root.length&&this.root.attr("title",this._tooltip)},enumerable:!1,configurable:!0}),e.prototype.css=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!t||0==t.length)return this
var i=x.apply(void 0,t)
i&&(this.classStyle=i)
var n=w.apply(void 0,t)
return n&&(this.style=n),this},e.prototype.focus=function(){return this.internal&&this.internal.focus(),this.root&&this.root.length&&this.root.focus(),this},e.prototype.blur=function(){return this.internal&&this.internal.blur(),this.root&&this.root.length&&this.root.blur(),this},e.prototype.forceUpdate=function(t){return this.update(this.props,this.state,!1,!1,!0,t),this},e.prototype.getContext=function(){return this.context},e.prototype.getRoot=function(){if(!this.root&&this.internal)return this.internal.getRoot()
if(!this.root){if(this.id){var t=$("#"+this.id)
if(t.length)return t}return this.context}return this.root},e.prototype.getState=function(){return this.state},e.prototype.setState=function(t,e,i){return this.debug&&console.log("["+f(this)+"] setState",t),this.update(this.props,t,!1,!0,this.forceOnChange||e,i),this},e.prototype.getProps=function(){return this.props},e.prototype.setProps=function(t,e,i){return this.debug&&console.log("["+f(this)+"] setProps",t),this.update(t,this.state,!0,!1,this.forceOnChange||e,i),this},e.prototype.on=function(t,e){if(!t)return this
for(var i=t.split(" "),n=0,o=i;n<o.length;n++){var r=o[n]
this.handlers[r]||(this.handlers[r]=[]),this.handlers[r].push(e)}return this.internal&&this.internal.on(t,e),this.root&&this.root.length&&this.root.on(t,e),this},e.prototype.off=function(t){if(t)for(var e=t.split(" "),i=0,n=e;i<n.length;i++){var o=n[i]
delete this.handlers[o]}else this.handlers={}
return this.internal&&this.internal.off(t),this.root&&this.root.length&&this.root.off(t),this},e.prototype.trigger=function(t){for(var e,i,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o]
if(this.debug&&console.log("["+f(this)+"] trigger",t,n),t){var r=n&&n.length>0?n[0]:void 0
if("_"==t.charAt(0)||"mount"==t||"unmount"==t||"statechange"==t||"propschange"==t){if(void 0!==r&&("statechange"==t?this.state!=n[0]&&(this.state=n[0],this.debug&&console.log("["+f(this)+"] trigger set state",this.state)):"propschange"==t&&this.props!=n[0]&&(this.props=n[0],this.debug&&console.log("["+f(this)+"] trigger set props",this.props))),!this.handlers||!this.handlers[t])return this
for(var s=this.createEvent(t,r),a=0,l=this.handlers[t];a<l.length;a++){(0,l[a])(s)}}else this.root&&this.root.length&&(this.debug&&console.log("["+f(this)+"] trigger "+t+" on root="+f(this.root)),(e=this.root).trigger.apply(e,__spreadArray([t],n,!1)))
return this.internal&&(this.debug&&console.log("["+f(this)+"] trigger "+t+" on internal="+f(this.internal)),(i=this.internal).trigger.apply(i,__spreadArray([t],n,!1))),this}},e.prototype.unmount=function(){if(this.debug&&console.log("["+f(this)+"] unmount ctx="+f(this.context)+" root="+f(this.root),this.state,this.props),this.componentWillUnmount(),this.internal&&this.internal.unmount(),this.internal=void 0,this.root&&this.root.length&&this.root.remove(),this.root=void 0,this.id){var e=t.registry.indexOf(this.id)
e>=0&&t.registry.splice(e,1)}return this.mounted=!1,this.trigger("unmount"),this},e.prototype.mount=function(i){this.debug&&console.log("["+f(this)+"] mount ctx="+f(i)+" root="+f(this.root),this.state,this.props),this.id||this.root&&this.root.length&&(this.id=this.root.attr("id")),i&&i.length&&(this.context=i),this.context||this.root&&this.root.length&&(this.context=this.root.parent(),this.context||(this.context=this.root))
try{if(this.mounted&&this.unmount(),this.mounted=!1,!this.context||!this.context.length){var n=$("#"+this.id)
n.length&&(this.context=n)}if(this.debug&&console.log("["+f(this)+"] componentWillMount ctx="+f(i)+" root="+f(this.root)),this.componentWillMount(),this.context&&this.context.length){this.debug&&console.log("["+f(this)+"] render ctx="+f(i)+" root="+f(this.root))
var o=this.render()
if(void 0!==o&&null!==o)if(o instanceof e){if(this.debug&&console.log("["+f(this)+"] render -> "+f(o)),this.internal=o,o.parent||(o.parent=this),o.mount(this.context),!this.root)if(this.id){var n=$("#"+this.id)
this.root=n.length?n:this.internal.getRoot()}else this.root=this.context}else if(o instanceof jQuery)this.context.append(o),this.root||(this.root=o)
else{var r=p(o),s=r[0],a=r[1],l=r[2]
s&&this.context.append(s),this.context.append(a),l&&this.context.append(l),this.root||(this.root=this.id?$("#"+this.id):a)}else this.internal&&this.internal.mount(this.context),this.root||(this.root=this.id?$("#"+this.id):this.context)}if(this._visible||(this.internal?this.internal.visible=!1:this.root.hide()),this._enabled||(this.internal?this.internal.enabled=!1:this.root.prop("disabled",!0)),this.debug&&console.log("["+f(this)+"] componentDidMount ctx="+f(i)+" root="+f(this.root)),this.componentDidMount(),this.root&&this.root.length)for(var h in this.handlers)if(h&&"_"!=h.charAt(0)&&"mount"!=h&&"unmount"!=h&&"statechange"!=h&&"propschange"!=h)for(var u=0,d=this.handlers[h];u<d.length;u++){var c=d[u]
this.root.on(h,c)}if(this.root.wuxComponent(this),this.mounted=!0,this.id&&(!this.internal||this.internal.id!=this.id)){if(t.registry.indexOf(this.id)>=0){var g=t.getComponent(this.id)
g&&g.cuid!=this.cuid&&console.error("["+f(this)+"] id already used by "+f(g))}else t.registry.push(this.id)}this.trigger("mount")}catch(t){var y=f(this)+" "+f(this.context)
console.error("["+f(this)+"] mount error "+y,t),this.componentDidCatch(t,y)}return this},e.prototype.componentWillUnmount=function(){},e.prototype.componentWillMount=function(){},e.prototype.render=function(){return this.buildRoot(this.rootTag)},e.prototype.componentDidMount=function(){},e.prototype.componentDidCatch=function(t,e){},e.prototype.shouldComponentUpdate=function(t,e){return"object"==typeof t||"object"==typeof e||(this.props!=t||this.state!=e)},e.prototype.componentWillUpdate=function(t,e){},e.prototype.componentDidUpdate=function(t,e){},e.prototype.updateProps=function(t){this.props=t},e.prototype.updateState=function(t){this.state=t},e.prototype.update=function(t,e,i,n,o,r){void 0===o&&(o=!1),this.debug&&console.log("["+f(this)+"] update",t,e,"propsChange="+i+",stateChange="+n+",force="+o),t=void 0===t?this.props:t
var s=this.props,a=this.state
if(this.dontTrigger=!1,this.mounted){if(o||this.shouldComponentUpdate(t,e)){try{this.debug&&console.log("["+f(this)+"] componentWillUpdate",t,e),this.componentWillUpdate(t,e),i&&(this.debug&&console.log("["+f(this)+"] updateProps",t),this.updateProps(t)),n&&(this.debug&&console.log("["+f(this)+"] updateState",e),this.updateState(e)),o&&this.mount(),this.debug&&console.log("["+f(this)+"] componentDidUpdate",s,a),this.componentDidUpdate(s,a),i&&!this.dontTrigger&&this.trigger("propschange"),n&&!this.dontTrigger&&this.trigger("statechange")}catch(t){return this.componentDidCatch(t,f(this)+"|"+f(this.context)),!1}r&&r()}}else i&&(this.debug&&console.log("["+f(this)+"] updateProps",t),this.updateProps(t),this.dontTrigger||this.trigger("propschange")),n&&(this.debug&&console.log("["+f(this)+"] updateState",e),this.updateState(e),this.dontTrigger||this.trigger("statechange"))
return!0},e.prototype.createEvent=function(t,e){var i=this.root&&this.root.length?this.root.get(0):this.root
return{component:this,element:this.root,target:i,type:t,data:e}},e.prototype.shouldBuildRoot=function(){if(this.internal)return!1
if(this.root&&this.root.length)return!1
if(this.context&&this.context.length){var t=this.context.attr("id")
if(!t&&t==this.id)return!1}return!0},e.prototype.buildRoot=function(t,e,i,n,o,r,s){return this.debug&&console.log("["+f(this)+"] buildRoot",t,e,i,n,o,r,s),this.shouldBuildRoot()?(this.debug&&console.log("["+f(this)+"] shouldBuildRoot() -> true"),this.build(t,e,i,n,o,r,s)):void(this.debug&&console.log("["+f(this)+"] shouldBuildRoot() -> false"))},e.prototype.build=function(e,i,n,o,r,s,a){e||(e="div"),void 0===o&&(o=this._classStyle),void 0===r&&(r=this._style),void 0===s&&(s=this._attributes),void 0===a&&(a=this.id)
var l="<"+e
a&&(l+=' id="'+a+'"'),o&&(l+=' class="'+o+'"'),r&&(l+=' style="'+r+'"')
var h=t.attributes(s)
h&&(l+=" "+h)
var u=t.attributes(n)
u&&(l+=" "+u),l+=">"
var d=c(null==i?this.make():i)
return l+=d[1],"input"==e?d[0]+l+d[2]:(l+="</"+e+">",d[0]+l+d[2])},e.prototype.make=function(){return""},e.prototype.subId=function(t,i){if(t instanceof e){var n=t.id
return n&&this.id?0!=n.indexOf(this.id+"-")?n:n.substring(this.id.length+1):n}return this.id&&"*"!=this.id||(this.id="w"+this.cuid),t&&"*"!=t||(t=(this.subSeq++).toString()),i||0==i?this.id+"-"+t+"-"+i:this.id+"-"+t},e.prototype.ripId=function(t){return t&&this.id&&0==t.indexOf(this.id)&&t.length>this.id.length+1?t.substring(this.id.length+1):t},e.prototype.transferTo=function(t,e,i){return this.debug&&console.log("["+f(this)+"] transferTo "+f(t)),!!t&&(t.setState(this.getState(),e,i),!0)},e}()
t.WComponent=U
!function(t){t.Text="text",t.Number="number",t.Password="password",t.CheckBox="checkbox",t.Radio="radio",t.Date="date",t.DateTime="datetime",t.Time="time",t.File="file",t.Image="image",t.Color="color",t.Email="email",t.Url="url",t.Month="month",t.Week="week",t.Search="search",t.Hidden="hidden",t.Note="note",t.Select="select",t.Static="static",t.Component="component",t.Blank="blank",t.Link="link",t.Integer="integer",t.TreeSelect="tree"}(t.WInputType||(t.WInputType={}))
var F=function(){function e(){}return e.toArrayComponent=function(t){if(!t)return[]
if(Array.isArray(t)&&t.length)return t[0]instanceof U?t:[]
var e=[]
return t instanceof U&&e.push(t),e},e.hasComponents=function(t){return!!t&&(Array.isArray(t)&&t.length?t[0]instanceof U:t instanceof U)},e.toArray=function(t){if(t instanceof U&&(t=t.getState()),null==t)return[]
if(Array.isArray(t))return t
var e=[]
return e.push(t),e},e.toArrayNumber=function(t,i){if(t instanceof U&&(t=t.getState()),null==t)return[]
var n=[]
if(Array.isArray(t))for(var o=0,r=t;o<r.length;o++){var s=r[o],a=e.toNumber(s)
i&&!a||n.push(a)}else{var a=e.toNumber(t)
if(i&&!a)return n
n.push(a)}return n},e.toArrayString=function(t,i){if(t instanceof U&&(t=t.getState()),null==t)return[]
var n=[]
if(Array.isArray(t))for(var o=0,r=t;o<r.length;o++){var s=r[o],a=e.toString(s)
i&&!a||n.push(a)}else{var a=e.toString(t)
if(i&&!a)return n
n.push(e.toString(t))}return n},e.splitNumbers=function(t,i){if(!t)return[]
for(var n=e.toString(t),o=n.split(i),r=[],s=0,a=o;s<a.length;s++){var l=a[s]
r.push(e.toNumber(l))}return r},e.toObject=function(t,e){return t instanceof U&&(t=t.getState()),null==t?e:"object"==typeof t?t:e},e.toString=function(i,n){return void 0===n&&(n=""),i instanceof U&&(i=i.getState()),null==i?n:"string"==typeof i?i:i instanceof Date?t.formatDate(i):"object"==typeof i&&void 0!=i.id?e.toString(i.id,n):Array.isArray(i)&&i.length?e.toString(i[0],n):""+i},e.toText=function(t,i){return void 0===i&&(i=""),e.toString(t,i).replace("<","&lt;").replace(">","&gt;")},e.toNumber=function(t,i){if(void 0===i&&(i=0),t instanceof U&&(t=t.getState()),null==t)return i
if("number"==typeof t)return t
if(t instanceof Date)return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()
if("object"==typeof t&&void 0!=t.id)return e.toNumber(t.id,i)
if(Array.isArray(t)&&t.length)return e.toNumber(t[0],i)
var n=(""+t).trim()
n.indexOf(".")>=0&&n.indexOf(",")>=0&&(n=n.replace(".","")),n=n.replace(",",".")
var o=n.indexOf(".")>=i?parseFloat(n):parseInt(n)
return isNaN(o)?i:o},e.toInt=function(t,i){if(void 0===i&&(i=0),t instanceof U&&(t=t.getState()),null==t)return i
if("number"==typeof t)return Math.floor(t)
if(t instanceof Date)return 1e4*t.getFullYear()+100*(t.getMonth()+1)+t.getDate()
if("object"==typeof t&&void 0!=t.id)return e.toInt(t.id,i)
if(Array.isArray(t)&&t.length)return e.toInt(t[0],i)
var n=(""+t).replace(",","."),o=parseInt(n)
return isNaN(o)?i:o},e.toIntTime=function(t,i){if(void 0===i&&(i=0),t instanceof U&&(t=t.getState()),null==t)return i
if(t instanceof Date)return 100*t.getHours()+t.getMinutes()
if(Array.isArray(t)&&t.length)return e.toIntTime(t[0],i)
var n=(""+t).replace(":","").replace(".","").replace(",",""),o=parseInt(n)
return isNaN(o)?i:o},e.isNumeric=function(t){return!isNaN(t)},e.checkEmail=function(t){if(!t)return""
var i=e.toString(t)
if(!i)return""
if(i.length<5)return""
var n=i.indexOf("@")
return n<=0?"":i.lastIndexOf(".")<n?"":i.trim().toLowerCase()},e.starts=function(t,i){return!(!t||null==i)&&0==e.toString(t).indexOf(i)},e.ends=function(t,i){if(!t||null==i)return!1
var n=e.toString(t),o=n.lastIndexOf(i)
return!(o<0)&&o==n.length-i.length},e.isEmpty=function(t){if(!t)return!0
if(Array.isArray(t)&&!t.length)return!0
if("object"==typeof t){for(var e in t)if(t.hasOwnProperty(e))return!1
return!0}return!1},e.toBoolean=function(e,i){return void 0===i&&(i=!1),e instanceof t.WCheck&&(e=e.getProps()),e instanceof U&&(e=e.getState()),null==e?i:"boolean"==typeof e?e:"string"==typeof e&&e.length?"1YyTtSs".indexOf(e.charAt(0))>=0:!!i},e.toDate=function(t,e){if(t instanceof U&&(t=t.getState()),null==t)return e
if(t instanceof Date)return t
if("number"==typeof t)return t<10000101?e:new Date(t/1e4,t%1e4/100-1,t%1e4%100)
if("string"==typeof t){if(t.length<8)return e
var i=t.indexOf(",")
if(i>=0&&(t=t.substring(i+1)),t.indexOf("-")>3)return new Date(t.trim())
if(this.isNumeric(t)){var n=parseInt(t)
return n<10000101?e:new Date(n/1e4,n%1e4/100-1,n%1e4%100)}return new Date(t.trim().replace(/(\d{1,2}).(\d{1,2}).(\d{4})/,"$3-$2-$1"))}return e},e.getWeek=function(t){var i
i=t instanceof Date?new Date(t.getTime()):e.toDate(t),i||(i=new Date),i.setHours(0,0,0,0),i.setDate(i.getDate()+3-(i.getDay()+6)%7)
var n=new Date(i.getFullYear(),0,4)
return 1+Math.round(((i.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},e.getParam=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&")
var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=i.exec(e)
return n&&n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):""},e.size=function(t){if(!t)return 0
if(Array.isArray(t))return t.length
if("object"==typeof t){var e=0
for(var i in t)t.hasOwnProperty(i)&&e++
return e}return 0},e.setValue=function(t,e,i){return"object"==typeof t&&(t[e]=i),t},e.getValue=function(t,i,n){if(!i)return n
if(Array.isArray(t)&&t.length)return"-1"==i?e.getLast(t,n):e.isNumeric(i)?e.getItem(t,e.toInt(i),n):e.getValue(t[0],i,n)
if("object"==typeof t){var o=i.indexOf(".")
if(null==t[i]&&o>0){var r=i.substring(0,o)
return null==t[r]?n:e.getValue(t[r],i.substring(o+1),n)}return null==t[i]?n:t[i]}return n},e.getItem=function(t,e,i){if(e<0)return i
if(Array.isArray(t)){if(t.length>e){var n=t[e]
return null==n?i:n}return i}return i},e.getEntity=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n]
if(!t)return null
var o
if(Array.isArray(t)){var r=t[0]
return r?(o={id:r},o.text=e.toString(t[1]),null!=t[2]&&(o.code=t[2]),null!=t[3]&&(o.group=t[3]),null!=t[4]&&(o.type=t[4]),null!=t[5]&&(o.date=e.toDate(t[5])),null!=t[6]&&(o.reference=t[6]),null!=t[7]&&(o.value=e.toNumber(t[7])),o):null}if(!i||!i.length)return null
if(i[0]){var r=e.getValue(t,i[0])
if(!r)return null
o={id:r}}return o?(i[1]&&(o.text=e.getString(t,i[1])),i[2]&&(o.code=e.getValue(t,i[2])),i[3]&&(o.group=e.getValue(t,i[3])),i[4]&&(o.type=e.getValue(t,i[4])),i[5]&&(o.date=e.getDate(t,i[5])),i[6]&&(o.reference=e.getValue(t,i[6])),i[7]&&(o.value=e.getNumber(t,i[7])),o):null},e.toEntity=function(t,i){if(!t||!i||!i.id)return null
var n={id:e.getValue(t,i.id)}
return i.text&&(n.text=e.getString(t,i.text)),i.code&&(n.code=e.getValue(t,i.code)),i.group&&(n.group=e.getValue(t,i.group)),i.type&&(n.type=e.getValue(t,i.type)),i.reference&&(n.reference=e.getValue(t,i.reference)),i.enabled&&(n.enabled=e.getBoolean(t,i.enabled)),i.marked&&(n.marked=e.getBoolean(t,i.marked)),i.date&&(n.date=e.getDate(t,i.date)),i.notBefore&&(n.notBefore=e.getDate(t,i.notBefore)),i.expires&&(n.expires=e.getDate(t,i.expires)),i.icon&&(n.icon=e.getString(t,i.icon)),i.color&&(n.color=e.getString(t,i.color)),i.value&&(n.value=e.getNumber(t,i.value)),n},e.getFirst=function(t,e){if(Array.isArray(t)){if(t.length>0){var i=t[0]
return null==i?e:i}return e}return e},e.getLast=function(t,e){if(Array.isArray(t)){if(t.length>0){var i=t[t.length-1]
return null==i?e:i}return e}return e},e.toCode=function(t,e){return void 0===e&&(e=""),t instanceof U&&(t=t.getState()),null==t?e:"string"==typeof t?t:"object"==typeof t&&void 0!=t.code?t.code:Array.isArray(t)&&t.length?t.length>1?t[1]:t[0]:t},e.toDesc=function(t,i){return void 0===i&&(i=""),t instanceof U&&(t=t.getState()),null==t?i:"string"==typeof t?t:"object"==typeof t&&void 0!=t.text?e.toString(t.text,i):Array.isArray(t)&&t.length?e.toString(t[t.length-1],i):e.toString(t,i)},e.getNumber=function(t,i,n){return e.toNumber(e.getValue(t,i,n))},e.getInt=function(t,i,n){return e.toInt(e.getValue(t,i,n))},e.getString=function(i,n,o,r){var s=e.getValue(i,n)
return null==s?o:r?"?"==r?"number"==typeof s?t.formatNum(s):e.toString(s):"c"==r?t.formatCurr(s):"c5"==r?t.formatCurr5(s):"n"==r?t.formatNum(s):"n2"==r?t.formatNum2(s):"m"==r?t.formatMonth(s):"d"==r?t.formatDate(s):"dt"==r?t.formatDateTime(s):"t"==r?t.formatTime(s):e.toString(s):e.toString(s)},e.getText=function(t,i,n){return e.toText(e.getValue(t,i,n))},e.getBoolean=function(t,i,n){return e.toBoolean(e.getValue(t,i,n))},e.getDate=function(t,i,n){return e.toDate(e.getValue(t,i,n))},e.getArray=function(t,i){return e.toArray(e.getValue(t,i))},e.getArrayNumber=function(t,i,n){return e.toArrayNumber(e.getValue(t,i),n)},e.getArrayString=function(t,i,n){return e.toArrayString(e.getValue(t,i),n)},e.getCode=function(t,i,n){return e.toCode(e.getValue(t,i,n))},e.getDesc=function(t,i,n){return e.toDesc(e.getValue(t,i,n))},e.getObject=function(t,i,n){var o=e.toObject(e.getValue(t,i))
return!o&&n?{}:o},e.sort=function(t,i,n){if(void 0===i&&(i=!0),!t)return[]
var o=e.toArray(t)
if(!n){var r=o.sort()
return i?r:r.reverse()}var s=o.sort(function(t,i){var o=e.getValue(t,n),r=e.getValue(i,n)
return o<r?-1:o>r?1:0})
return i?s:s.reverse()},e.find=function(t,i,n){if(!t||!i)return null
for(var o=e.toArray(t),r=0,s=o;r<s.length;r++){var a=s[r],l=e.getValue(a,i)
if(l instanceof Date&&n instanceof Date&&l.getTime()==n.getTime())return a
if(l==n)return a}return null},e.indexOf=function(t,i,n){if(!t||!i)return-1
for(var o=e.toArray(t),r=0;r<o.length;r++){var s=e.getValue(o[r],i)
if(s instanceof Date&&n instanceof Date&&s.getTime()==n.getTime())return r
if(s==n)return r}return-1},e.isSameDate=function(t,e){return this.toNumber(t)==this.toNumber(e)},e.indexOfDate=function(t,i){if(!t||!i)return-1
for(var n=e.toNumber(i),o=0;o<t.length;o++)if(t[o]){var r=e.toNumber(t[o])
if(r==n)return o}return-1},e.round2=function(t){if(null==t)return 0
var i=e.toNumber(t)
return Math.round(100*i)/100},e.floor2=function(t){if(null==t)return 0
var i=e.toNumber(t)
return Math.floor(100*i)/100},e.ceil2=function(t){if(null==t)return 0
var i=e.toNumber(t)
return Math.ceil(100*i)/100},e.compare2=function(t,i){if(!t&&!i)return 0
var n=Math.round(100*e.toNumber(t)),o=Math.round(100*e.toNumber(i))
return n==o?0:n>o?1:-1},e.compare5=function(t,i){if(!t&&!i)return 0
var n=Math.round(1e4*e.toNumber(t)),o=Math.round(1e4*e.toNumber(i))
return n==o?0:n>o?1:-1},e.getCurrDate=function(t,e,i,n,o){var r=new Date
return r.setHours(0,0,0,0),t&&r.setDate(r.getDate()+t),e&&r.setMonth(r.getMonth()+e),i&&r.setFullYear(r.getFullYear()+i),n&&r.setDate(1),o&&(r.setMonth(r.getMonth()+1),r.setDate(0)),r},e.calcDate=function(t,e,i,n,o,r){return t=t?new Date(t.getTime()):new Date,t.setHours(0,0,0,0),e&&t.setDate(t.getDate()+e),i&&t.setMonth(t.getMonth()+i),n&&t.setFullYear(t.getFullYear()+n),o&&t.setDate(1),r&&(t.setMonth(t.getMonth()+1),t.setDate(0)),t},e.timestamp=function(t){var i=t?e.toDate(t):new Date
i||(i=new Date)
var n=""+i.getFullYear(),o=i.getMonth()+1,r=o<10?"0"+o:""+o,s=i.getDate(),a=s<10?"0"+s:""+s,l=i.getHours(),h=l<10?"0"+l:""+l,u=i.getMinutes(),d=u<10?"0"+u:""+u,p=i.getSeconds()
return n+r+a+h+d+(p<10?"0"+p:""+p)},e.nvl=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(t&&t){for(var i=0,n=t;i<n.length;i++){var o=n[i]
if(!o)return o}return t[0]}},e.eqValues=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n]
if(!t&&!e)return!0
if(!t||!e)return!1
for(var o=0,r=i;o<r.length;o++){var s=r[o]
if(t[s]!=e[s])return!1}return!0},e.cat=function(t,i,n,o,r){var s=e.toString(t),a=e.toString(i),l=e.toString(n),h=e.toString(o),u=e.toString(r),d=""
return s&&(d+=s,l&&(d+=l)),a&&(h&&(d+=h),d+=a,u&&(d+=u)),d},e.col=function(t,i,n){var o=[]
if(!t||!t.length)return o
for(var r=0,s=t;r<s.length;r++){var a=s[r]
o.push(e.getItem(a,i,n))}return o},e.getSortedKeys=function(t){if(!t)return[]
var e=[]
for(var i in t)t.hasOwnProperty(i)&&e.push(i)
return e.sort()},e.diffMinutes=function(t,i){var n=e.toDate(t),o=e.toDate(i)
return n||(n=new Date),o||(o=new Date),(n.getTime()-o.getTime())/6e4},e.diffHours=function(t,i){var n=e.toDate(t),o=e.toDate(i)
return n||(n=new Date),o||(o=new Date),(n.getTime()-o.getTime())/36e5},e.diffDays=function(t,i){var n=e.toDate(t),o=e.toDate(i)
n||(n=new Date),o||(o=new Date)
var r=n.getTime()-o.getTime(),s=r/864e5,a=r%864e5,l=a/6e4,h=s
return l>12&&h++,h},e}()
t.WUtil=F,t.getId=e,t.firstSub=i,t.lastSub=n,t.getComponent=o,t.getRootComponent=r,t.setProps=s,t.getProps=a,t.setState=l,t.getState=h,t.newInstance=u,t.same=d,t.parse=p,t.divide=c,t.str=f,t.getTagName=g,t.match=y,t.hashCode=b,t.styleObj=m,t.style=v,t.addStyle=_,t.css=w,t.cls=x,t.attributes=C,t.ul=S,t.ol=T,t.buildCss=O,t.removeClass=k,t.toggleClass=W,t.setCss=R,t.buildIcon=D,t.build=I,t.addWrapper=E,t.val=A,t.getContainer=L,t.openURL=M}(WUX||(WUX={}))
var WUX
!function(t){function e(t,e,i,n){_showMessage(t,e,i,n)}function i(t,e,i,n){_showInfo(t,e,i,n)}function n(t,e,i){_showSuccess(t,e,i)}function o(t,e,i){_showWarning(t,e,i)}function r(t,e,i){_showError(t,e,i)}function s(t,e){_confirm(t,e)}function a(t,e,i){_getInput(t,e,i)}function l(){return $("#ptitle")}function h(){return $("#pbreadcrumb")}function u(){return $("#pheader")}function d(){return $("#pfooter")}function p(){return $("#side-menu")}function c(){return $("#view-root")}function f(t){}function g(){}function y(e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),!e)return""
var o=t.WUtil.toDate(e)
if(!o)return""
var r=o.getMonth()+1,s=r<10?"0"+r:""+r,a=o.getDate()<10?"0"+o.getDate():""+o.getDate()
return i?t.formatDay(o.getDay(),n)+", "+a+"/"+s+"/"+o.getFullYear():a+"/"+s+"/"+o.getFullYear()}function b(e,i,n,o){if(void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),!e)return""
var r=t.WUtil.toDate(e)
if(!r)return""
var s=r.getMonth()+1,a=s<10?"0"+s:""+s,l=r.getDate()<10?"0"+r.getDate():""+r.getDate(),h=r.getHours()<10?"0"+r.getHours():""+r.getHours(),u=r.getMinutes()<10?"0"+r.getMinutes():""+r.getMinutes()
if(i){var d=r.getSeconds()<10?"0"+r.getSeconds():""+r.getSeconds()
return n?t.formatDay(r.getDay(),o)+", "+l+"/"+a+"/"+r.getFullYear()+" "+h+":"+u+":"+d:l+"/"+a+"/"+r.getFullYear()+" "+h+":"+u+":"+d}return n?t.formatDay(r.getDay(),o)+", "+l+"/"+a+"/"+r.getFullYear()+" "+h+":"+u:l+"/"+a+"/"+r.getFullYear()+" "+h+":"+u}function m(t,e){if(void 0===e&&(e=!1),null==t)return""
if("number"==typeof t){if(e){t<1e4&&(t*=100)
var i=Math.floor(t/1e4),n=Math.floor(t%1e4/100),o=t%1e4%100,r=n<10?"0"+n:""+n,s=o<10?"0"+o:""+o
return i+":"+r+":"+s}t>9999&&(t=Math.floor(t/100))
var i=Math.floor(t/100),n=t%100,r=n<10?"0"+n:""+n
return i+":"+r}if("string"==typeof t){var a=t.indexOf("T")
a<0&&(a=t.indexOf(" ")),a>=0&&(t=t.substring(a+1)),a=t.indexOf("+"),a<0&&(a=t.indexOf("-")),a<0&&(a=t.indexOf("Z")),a>=0&&(t=t.substring(0,a))
return m(parseInt(t.replace(":","").replace(".","")))}if(t instanceof Date){var l=t.getHours()<10?"0"+t.getHours():""+t.getHours(),h=t.getMinutes()<10?"0"+t.getMinutes():""+t.getMinutes()
if(e){var s=t.getSeconds()<10?"0"+t.getSeconds():""+t.getSeconds()
return l+":"+h+":"+s}return l+":"+h}return""}function v(e,i,n,o){if(""===e||null==e)return""
var r=t.WUtil.toNumber(e),s=(""+Math.round(100*r)/100).replace(".",",")
return null!=i&&0!=r?null!=o&&r<0?o.replace("$",s):i.replace("$",s):null!=n&&0==r?n.replace("$",s):s}function _(e,i,n,o){if(""===e||null==e)return""
var r=t.WUtil.toNumber(e),s=(""+r).replace(".",",")
return null!=i&&0!=r?null!=o&&r<0?"l"==o?r.toLocaleString("it-IT"):o.replace("$",s):"l"==i?r.toLocaleString("it-IT"):i.replace("$",s):null!=n&&0==r?n.replace("$",s):s}function w(e,i,n,o){if(""===e||null==e)return""
var r=t.WUtil.toNumber(e),s=(Math.round(100*r)/100).toLocaleString("it-IT"),a=s.indexOf(",")
return a<0&&(s+=",00"),a==s.length-2&&(s+="0"),null!=i&&0!=r?null!=o&&r<0?o.replace("$",s):i.replace("$",s):null!=n&&0==r?n.replace("$",s):s}function x(e,i,n,o){if(""===e||null==e)return""
var r=t.WUtil.toNumber(e),s=(""+Math.round(1e5*r)/1e5).replace(".",","),a=s.indexOf(",")
if(a<0&&(s+=",00"),a==s.length-2&&(s+="0"),a>0){for(var l=s.substring(0,a),h=s.substring(a),u="",d=1;d<=l.length;d++)d>3&&(d-1)%3==0&&(u="."+u),u=l.charAt(l.length-d)+u
s=u+h}return null!=i&&0!=r?null!=o&&r<0?o.replace("$",s):i.replace("$",s):null!=n&&0==r?n.replace("$",s):s}function C(t){return null==t?"":t?"S":"N"}function S(e){if(null==e)return""
if("string"==typeof e)return e
if("boolean"==typeof e)return t.formatBoolean(e)
if("number"==typeof e){return(""+e).indexOf(".")>=0?t.formatCurr(e):t.formatNum(e)}if(e instanceof Date)return t.formatDate(e)
if(e instanceof t.WComponent){if(e instanceof t.WCheck)return e.checked?e.text:""
if("select"==e.rootTag){var i=e.getProps()
if(Array.isArray(i)&&i.length>1){for(var n="",o=0,r=i;o<r.length;o++){var s=r[o],a=""+s
if(a)if(a.length>9){var l=a.indexOf(" -")
l>0&&(a=a.substring(0,l).trim()),n+=","+a}else n+=","+a}return n.length&&(n=n.substring(1)),n}var a=""+e.getProps()
return a||(a=e.getState()),t.format(a)}return t.format(e.getState())}return""+e}function T(t,e){switch(t){case 0:return e?"Domenica":"Dom"
case 1:return e?"Luned&igrave;":"Lun"
case 2:return e?"Marted&igrave;":"Mar"
case 3:return e?"Mercoled&igrave;":"Mer"
case 4:return e?"Giove&igrave;":"Gio"
case 5:return e?"Venerd&igrave;":"Ven"
case 6:return e?"Sabato":"Sab"}return""}function O(t,e,i){switch(t>100&&(i=Math.floor(t/100),t%=100),i=i?" "+i:"",t){case 1:return e?"Gennaio"+i:"Gen"+i
case 2:return e?"Febbraio"+i:"Feb"+i
case 3:return e?"Marzo"+i:"Mar"+i
case 4:return e?"Aprile"+i:"Apr"+i
case 5:return e?"Maggio"+i:"Mag"+i
case 6:return e?"Giugno"+i:"Giu"+i
case 7:return e?"Luglio"+i:"Lug"+i
case 8:return e?"Agosto"+i:"Ago"+i
case 9:return e?"Settembre"+i:"Set"+i
case 10:return e?"Ottobre"+i:"Ott"+i
case 11:return e?"Novembre"+i:"Nov"+i
case 12:return e?"Dicembre"+i:"Dic"+i}return""}function k(e){if(!e)return 0
if("number"==typeof e)return e>0&&e<13?e:0
var i=(""+e).toLowerCase()
if(i.length>3&&(i=i.substring(0,3)),"gen"==i)return 1
if("feb"==i)return 2
if("mar"==i)return 3
if("apr"==i)return 4
if("mag"==i)return 5
if("giu"==i)return 6
if("lug"==i)return 7
if("ago"==i)return 8
if("set"==i)return 9
if("ott"==i)return 10
if("nov"==i)return 11
if("dic"==i)return 12
var n=t.WUtil.toInt(i)
return n>0&&n<13?n:0}function W(t){return t?(t=""+t,t=t.replace("À","A'").replace("È","E'").replace("Ì","I'").replace("Ò","O'").replace("Ù","U'"),t=t.replace("à","a'").replace("è","e'").replace("ì","i'").replace("ò","o'").replace("ù","u'"),t=t.replace("á","a`").replace("é","e`").replace("í","i`").replace("ó","o`").replace("ú","u`"),t=t.replace("€","E").replace("ª","a").replace("°","o")):""}function R(t){return t?(t=""+t,t=t.replace("A'","À").replace("E'","È").replace("I'","Ì").replace("O'","Ò").replace("U'","Ù"),t=t.replace("a'","à").replace("e'","è").replace("i'","ì").replace("o'","ò").replace("u'","ù"),t=t.replace("a`","á").replace("e`","é").replace("i`","í").replace("o`","ó").replace("u`","ú"),t=t.replace(" pò"," po'")):""}function D(t){return t?(t=""+t,t=t.replace("&Agrave;","A'").replace("&Egrave;","E'").replace("&Igrave;","I'").replace("&Ograve;","O'").replace("&Ugrave;","U'"),t=t.replace("&agrave;","a'").replace("&egrave;","e'").replace("&igrave;","i'").replace("&ograve;","o'").replace("&ugrave;","u'"),t=t.replace("&aacute;","a`").replace("&eacute;","e`").replace("&iacute;","i`").replace("&oacute;","o`").replace("&uacute;","u`"),t=t.replace("&euro;","E").replace("&nbsp;"," ").replace("&amp;","&").replace("&gt;",">").replace("&lt;","<").replace("&quot;",'"')):""}function I(t){if(!t)return""
for(var e=""+t,i="",n=0,o=0;o<e.length;o++){n=n>=M.length-1?0:n+1
var r=e.charCodeAt(o),s=M.charCodeAt(n),a=r
r>=32&&r<=126&&(a-=s)<32&&(a=127+a-32),i+=String.fromCharCode(a)}return i}function E(t){if(!t)return""
for(var e=""+t,i="",n=0,o=0;o<e.length;o++){n=n>=M.length-1?0:n+1
var r=e.charCodeAt(o),s=M.charCodeAt(n),a=r
r>=32&&r<=126&&(a+=s)>126&&(a=31+a-126),i+=String.fromCharCode(a)}return i}var A={},L={}
t.global={locale:"it",main_class:"container-fluid",con_class:"container",box_class:"ibox",box_header:"ibox-title",box_title:"<h5>$</h5>",box_tools:"ibox-tools",box_content:"ibox-content",box_footer:"ibox-footer",chart_bg0:"rgba(26,179,148,0.5)",chart_bg1:"rgba(220,220,220,0.5)",chart_bg2:"rgba(160,220,255,0.5)",chart_bc0:"rgba(26,179,148,0.7)",chart_bc1:"rgba(220,220,220,0.7)",chart_bc2:"rgba(160,220,255,0.7)",chart_p0:"rgba(26,179,148,1)",chart_p1:"rgba(220,220,220,1)",chart_p2:"rgba(160,220,255,1)",area:{b:"-radius:8px",m:"0px 0px 0px 0px",p:"16px 7px 5px 7px",bg:"white"},area_title:{b:"none",f:14,fw:"bold",w:"unset",ps:"relative",t:12,l:0,m:0},section:{b:"#e7eaec",m:"2px 0px 4px 0px",p:"8px 8px 8px 8px",bg:"#fafafa"},section_title:{b:"none",f:16,fw:"600",w:"unset",m:"-bottom:2px",tt:"uppercase"},window_top:{ps:"fixed",t:0,bg:"#ffffff",ml:-10,p:"0 10px",z:1001},window_bottom:{ps:"fixed",bt:0,bg:"#ffffff",ml:-10,p:"0 10px",z:1001},init:function(e){t.debug&&console.log("[WUX] global.init...")
var i=location.pathname.indexOf("/",1),n=i<=0?"cldr/":location.pathname.substring(0,i)+"/cldr/"
$.when($.getJSON(n+"cldr-data-"+t.global.locale+".json")).then(function(t){Globalize.load(t)}).then(function(){Globalize.locale(t.global.locale),DevExpress.localization.locale(t.global.locale),DevExpress.config({defaultCurrency:"EUR"}),t.debug&&console.log("[WUX] global.init completed"),e&&e()}).fail(function(){console.error("[WUX] global.init failed: check cldr data.")})},setData:function(t,e,i){if(void 0===i&&(i=!1),t||(t="global"),A[t]=e,!i&&L[t])for(var n=0,o=L[t];n<o.length;n++){var r=o[n]
r(e)}},getData:function(t,e){t||(t="global")
var i=A[t]
return null==i?e:i},onDataChanged:function(t,e){t||(t="global"),L[t]||(L[t]=[]),L[t].push(e)}},t.showMessage=e,t.showInfo=i,t.showSuccess=n,t.showWarning=o,t.showError=r,t.confirm=s,t.getInput=a,t.getPageTitle=l,t.getBreadcrump=h,t.getPageHeader=u,t.getPageFooter=d,t.getPageMenu=p,t.getViewRoot=c,t.sticky=f,t.stickyRefresh=g,t.formatDate=y,t.formatDateTime=b,t.formatTime=m,t.formatNum2=v,t.formatNum=_,t.formatCurr=w,t.formatCurr5=x,t.formatBoolean=C,t.format=S,t.formatDay=T,t.formatMonth=O,t.decodeMonth=k,t.norm=W,t.den=R,t.text=D
var M="@D:=E?('B;F)<=A>C@?):D';@=B<?C;)E:'@=?A(B<=;(?@>E:"
t.encrypt=I,t.decrypt=E
!function(t){t.PRIMARY="btn btn-primary",t.SECONDARY="btn btn-secondary",t.SUCCESS="btn btn-success",t.DANGER="btn btn-danger",t.WARNING="btn btn-warning",t.INFO="btn btn-info",t.LIGHT="btn btn-light",t.DARK="btn btn-dark",t.LINK="btn btn-link",t.WHITE="btn btn-white",t.SM_PRIMARY="btn btn-sm btn-primary btn-block",t.SM_DEFAULT="btn btn-sm btn-default btn-block",t.SM_SECONDARY="btn btn-sm btn-secondary btn-block",t.SM_INFO="btn btn-sm btn-info btn-block",t.SM_WARNING="btn btn-sm btn-warning btn-block",t.SM_DANGER="btn btn-sm btn-danger btn-block",t.SM_WHITE="btn btn-sm btn-white btn-block",t.ACT_PRIMARY="btn btn-sm btn-primary",t.ACT_DEFAULT="btn btn-sm btn-default",t.ACT_SECONDARY="btn btn-sm btn-secondary",t.ACT_INFO="btn btn-sm btn-info",t.ACT_WARNING="btn btn-sm btn-warning",t.ACT_DANGER="btn btn-sm btn-danger",t.ACT_WHITE="btn btn-sm btn-white",t.ACT_OUTLINE_PRIMARY="btn btn-sm btn-primary btn-outline",t.ACT_OUTLINE_DEFAULT="btn btn-sm btn-default btn-outline",t.ACT_OUTLINE_INFO="btn btn-sm btn-info btn-outline",t.ACT_OUTLINE_WARNING="btn btn-sm btn-warning btn-outline",t.ACT_OUTLINE_DANGER="btn btn-sm btn-danger btn-outline"}(t.BTN||(t.BTN={}))
var U=function(){function t(){}return t.STICKY_CONTAINER="data-b2x-sticky-container",t.STICKY_ELEMENT='data-b2x-sticky-element data-b2x-sticky-element-z-index="3"',t.BOX_FILTER='data-b2x-sticky-element data-b2x-sticky-element-ignore-margin-bottom="true" data-b2x-sticky-element-z-index="3"',t}()
t.ATT=U
var F=function(){function t(){}return t.NORMAL={bg:"#ffffff"},t.ERROR={bg:"#fce6e8"},t.WARNING={bg:"#fef3e6"},t.SUCCESS={bg:"#d1f0ea"},t.INFO={bg:"#ddedf6"},t.COMPLETED={bg:"#eeeeee"},t.MARKED={bg:"#fff0be"},t.BTN_MED={w:110,f:12,a:"left"},t.BTN_SMALL={w:90,f:12,a:"left"},t.STACK_BTNS={pt:2,pb:2,a:"center"},t.LINE_BTNS={pl:2,pr:2,a:"center"},t.FORM_CTRL="form-control",t.FORM_CTRL_SM="form-control input-sm",t.FIELD_REQUIRED={c:"#676a96"},t.FIELD_CRITICAL={c:"#aa6a6c"},t.FIELD_INTERNAL={c:"#aa6a6c"},t.LABEL_NOTICE={c:"#aa6a6c",fw:"bold"},t.LABEL_INFO={c:"#676a96",fw:"bold"},t}()
t.CSS=F
!function(t){t.LARGE="fa-lg ",t.ADDRESS_CARD="fa-address-card",t.ANGLE_DOUBLE_LEFT="fa-angle-double-left",t.ANGLE_DOUBLE_RIGHT="fa-angle-double-right",t.ANGLE_LEFT="fa-angle-left",t.ANGLE_RIGHT="fa-angle-right",t.ARROW_CIRCLE_DOWN="fa-arrow-circle-down",t.ARROW_CIRCLE_LEFT="fa-arrow-circle-left",t.ARROW_CIRCLE_O_DOWN="fa-arrow-circle-o-down",t.ARROW_CIRCLE_O_LEFT="fa-arrow-circle-o-left",t.ARROW_CIRCLE_O_RIGHT="fa-arrow-circle-o-right",t.ARROW_CIRCLE_O_UP="fa-arrow-circle-o-up",t.ARROW_CIRCLE_RIGHT="fa-arrow-circle-right",t.ARROW_CIRCLE_UP="fa-arrow-circle-up",t.ARROW_DOWN="fa-arrow-down",t.ARROW_LEFT="fa-arrow-left",t.ARROW_RIGHT="fa-arrow-right",t.ARROW_UP="fa-arrow-up",t.BOLT="fa-bolt",t.BACKWARD="fa-backward",t.BOOKMARK="fa-bookmark",t.BOOKMARK_O="fa-bookmark-o",t.CALENDAR="fa-calendar",t.CALCULATOR="fa-calculator",t.CHAIN="fa-chain",t.CHAIN_BROKEN="fa-chain-broken",t.CHECK="fa-check",t.CHECK_CIRCLE="fa-check-circle",t.CHECK_CIRCLE_O="fa-check-circle-o",t.CHECK_SQUARE="fa-check-square",t.CHECK_SQUARE_O="fa-check-square-o",t.CHEVRON_DOWN="fa-chevron-down",t.CHEVRON_UP="fa-chevron-up",t.CLOCK_O="fa-clock-o",t.CLOSE="fa-close",t.COG="fa-cog",t.COMMENT="fa-comment",t.COMMENTS_O="fa-comments-o",t.COPY="fa-copy",t.CUT="fa-cut",t.DATABASE="fa-database",t.EDIT="fa-edit",t.ENVELOPE_O="fa-envelope-o",t.EXCHANGE="fa-exchange",t.FILE="fa-file",t.FILE_O="fa-file-o",t.FILE_CODE_O="fa-file-code-o",t.FILE_PDF_O="fa-file-pdf-o",t.FILE_TEXT_O="fa-file-text-o",t.FILES="fa-files-o",t.FILTER="fa-filter",t.FOLDER="fa-folder",t.FOLDER_O="fa-folder-o",t.FOLDER_OPEN="fa-folder-open",t.FOLDER_OPEN_O="fa-folder-open-o",t.FORWARD="fa-forward",t.GRADUATION_CAP="fa-graduation-cap",t.INFO_CIRCLE="fa-info-circle",t.LIFE_RING="fa-life-ring",t.LINK="fa-link",t.LEGAL="fa-legal",t.LIST="fa-list",t.MINUS="fa-minus",t.MINUS_SQUARE_O="fa-minus-square-o",t.PASTE="fa-paste",t.PENCIL="fa-pencil",t.PIE_CHART="fa-pie-chart",t.PLUS="fa-plus",t.PLUS_SQUARE_O="fa-plus-square-o",t.PRINT="fa-print",t.QUESTION_CIRCLE="fa-question-circle",t.RANDOM="fa-random",t.RECYCLE="fa-recycle",t.REFRESH="fa-refresh",t.SEARCH="fa-search",t.SEARCH_MINUS="fa-search-minus",t.SEARCH_PLUS="fa-search-plus",t.SEND="fa-send",t.SHARE_SQUARE_O="fa-share-square-o",t.SHOPPING_CART="fa-shopping-cart",t.SIGN_IN="fa-sign-in",t.SIGN_OUT="fa-sign-out",t.SQUARE="fa-square",t.SQUARE_O="fa-square-o",t.TH_LIST="fa-th-list",t.THUMBS_O_DOWN="fa-thumbs-o-down",t.THUMBS_O_UP="fa-thumbs-o-up",t.TIMES="fa-times",t.TIMES_CIRCLE="fa-times-circle",t.TOGGLE_OFF="fa-toggle-off",t.TOGGLE_ON="fa-toggle-on",t.TRASH="fa-trash",t.TRUCK="fa-truck",t.UNDO="fa-undo",t.UPLOAD="fa-upload",t.USER="fa-user",t.USER_O="fa-user-o",t.USERS="fa-users",t.WARNING="fa-warning",t.WIFI="fa-wifi",t.WRENCH="fa-wrench"}(t.WIcon||(t.WIcon={}))
var N=function(){function t(){}return t.OK="OK",t.CLOSE="Chiudi",t.CANCEL="Annulla",t.ERR_DATE="Data non ammessa.",t.FILE_NAME="File",t.FILE_SIZE="Dim.",t.FILE_TYPE="Tipo",t.FILE_LMOD="Ult.Mod.",t}()
t.RES=N}(WUX||(WUX={}))
var WUX
!function(t){var e=function(e){function i(i,n,o,r,s){var a=e.call(this,i,"WChartJS",n,o,r,s)||this
return a.rootTag="canvas",a.title="",a._opset=!1,a.legend="pie"==n||"doughnut"==n||"polarArea"==n,a.colors=[],a.bg0=t.global.chart_bg0,a.bg1=t.global.chart_bg1,a.bg2=t.global.chart_bg2,a.bc0=t.global.chart_bc0,a.bc1=t.global.chart_bc1,a.bc2=t.global.chart_bc2,a.p0=t.global.chart_p0,a.p1=t.global.chart_p1,a.p2=t.global.chart_p2,a.pbc="#fff",a.forceOnChange=!0,a}return __extends(i,e),Object.defineProperty(i.prototype,"options",{get:function(){return this._options},set:function(t){this._options=t,this._opset=!!t},enumerable:!1,configurable:!0}),i.prototype.onClickChart=function(t){t&&(this.handlers._click||(this.handlers._click=[]),this.handlers._click.push(t))},i.prototype.getLabel=function(e){if(!this.state)return""
if(!e||!e.data)return""
var i=e.data.split("_"),n=t.WUtil.toNumber(i[i.length-1])
return t.WUtil.toString(this.state.labels[n])},i.prototype.getValue=function(e){if(!this.state)return 0
if(!e||!e.data)return 0
var i=e.data.split("_"),n=i.length>1?t.WUtil.toNumber(i[0]):0,o=t.WUtil.toNumber(i[i.length-1])
return this.state.series[n][o]},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.buildChart()},i.prototype.buildChart=function(){var e=this
if(this.state&&this.root){this.state.labels||(this.state.labels=[]),this.state.titles||(this.state.titles=[]),this.state.series||(this.state.series=[[]]),this.props||(this.props="line"),this._opset&&this._options||("pie"==this.props||"doughnut"==this.props||"polarArea"==this.props?this.legend=!0:this.state.titles&&this.state.titles.length||this.title||(this.legend=!1),this._options={responsive:!0,maintainAspectRatio:!1,onClick:function(i,n){var o=e.chart.getElementAtEvent(i)
if(o&&o.length){var r=t.WUtil.getString(o[0],"_datasetIndex",""),s=t.WUtil.getString(o[0],"_index","")
e.trigger("_click",r+"_"+s)}},legend:{display:this.legend}})
var i
if("pie"==this.props||"doughnut"==this.props||"polarArea"==this.props)this.colors&&this.colors.length||(this.colors=["#dfefdf","#e4f4ff","#ffffcc","#ffddaa","#ffccff","#e6ccff","#f1e7cb","#eeeeee","#d9f2e6","#d9e6f2"]),i={labels:this.state.labels,datasets:[{backgroundColor:this.colors,data:this.state.series[0]}]}
else{for(var n=[],o=0;o<this.state.series.length;o++){var r=this.state.titles[o]
r||(r=""),n.push({label:r,backgroundColor:0==o?this.bg0:1==o?this.bg1:this.bg2,borderColor:0==o?this.bc0:1==o?this.bc1:this.bc2,pointBackgroundColor:0==o?this.p0:1==o?this.p1:this.p2,pointBorderColor:this.pbc,data:this.state.series[o]})}i={labels:this.state.labels,datasets:n}}this.chart=new Chart(this.root[0].getContext("2d"),{type:this.props,data:i,options:this._options})}},i}(t.WComponent)
t.WChartJS=e}(WUX||(WUX={}))
var WUX
!function(t){var e=function(e){function i(i,n,o,r,s,a,l){var h=e.call(this,i,"WContainer",a,n,t.style(o),r)||this
return h.inline=!1,h.components=[],h.inline=s,l&&(h._classStyle=h._classStyle?h._classStyle+" "+l:l),h.rootTag=s?"span":"div","aside"==a&&(h.rootTag="aside"),h}return __extends(i,e),i.create=function(t){if(!t)return new i
var e=t.type?"<"+t.type+">":"",n=new i(t.id,t.classStyle,t.style,t.attributes,!1,e)
return n.wrapper=t.wrapper,n},i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.stateComp&&this.stateComp.setState(this.state)},i.prototype.getState=function(){return this.stateComp&&(this.state=this.stateComp.getState()),this.state},i.prototype.on=function(t,i){return e.prototype.on.call(this,t,i),"statechange"==t&&this.stateComp&&this.stateComp.on("statechange",i),this},i.prototype.off=function(t){return e.prototype.off.call(this,t),"statechange"==t&&this.stateComp&&this.stateComp.off("statechange"),this},i.prototype.trigger=function(t){for(var i,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o]
return e.prototype.trigger.apply(this,__spreadArray([t],n,!1)),"statechange"==t&&this.stateComp&&(i=this.stateComp).trigger.apply(i,__spreadArray(["statechange"],n,!1)),this},i.prototype.setLayout=function(t){this.layoutManager=t},i.prototype.section=function(e,i,n){return this.legend=e,this.fieldsetStyle=i?t.css(t.global.section,i):t.global.section,this.legendStyle=n?t.css(t.global.section_title,n):t.global.section_title,this},i.prototype.area=function(e,i,n){return this.legend=e,this.fieldsetStyle=i?t.css(t.global.area,i):t.global.area,this.legendStyle=n?t.css(t.global.area_title,n):t.global.area_title,this},i.prototype.end=function(){return this.parent instanceof i?this.parent.end():this},i.prototype.grid=function(){return"row"==this.props&&this.parent instanceof i?this.parent:this.parent instanceof i?this.parent.grid():this},i.prototype.row=function(){if("row"==this.props)return this
if(!this.parent){if(!this.components||!this.components.length)return this
for(var t=this.components.length-1;t>=0;t--){var e=this.components[t]
if(e instanceof i&&"row"==e.getProps())return e}return this}return this.parent instanceof i?this.parent.row():this},i.prototype.col=function(){return"col"==this.props?this:this.parent instanceof i?this.parent.col():this},i.prototype.addDiv=function(e,i,n,o){if("number"==typeof e){if(e<1)return this
var r=t.build("div",i,{h:e,n:n})
return this.add($(r))}var r=t.build("div",i,e,n,o)
return this.add($(r))},i.prototype.addSpan=function(e,i,n,o){if("number"==typeof e){var r=t.build("span",i,{w:e,d:"inline-block",a:"center",n:n})
return this.add($(r))}var r=t.build("span",i,e,n,o)
return this.add($(r))},i.prototype.addGroup=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i]
if(t){var n=this.addContainer(t)
if(!e||!e.length)return this
for(var o=0,r=e;o<r.length;o++){var s=r[o]
n.add(s)}return this}if(!e||!e.length)return this
for(var a=0,l=e;a<l.length;a++){var s=l[a]
this.add(s)}return this},i.prototype.add=function(e,i){if(!e)return this
e instanceof t.WComponent&&(e.parent||(e.parent=this))
var n
return"string"==typeof e&&e.length>0&&"<"==e.charAt(0)&&">"==e.charAt(e.length-1)&&(n=$(e)),n||(n=e),this.components.push(n),this.layoutManager&&this.layoutManager.addLayoutComponent(n,i),this},i.prototype.remove=function(t){if(t<0&&(t=this.components.length+t),!(t<0||t>=this.components.length)){var e=this.components.splice(t,1)
return this.layoutManager&&e.length&&this.layoutManager.removeLayoutComponent(e[0]),this}},i.prototype.removeAll=function(){if(this.layoutManager)for(var e=0,i=this.components;e<i.length;e++){var n=i[e]
this.layoutManager.removeLayoutComponent(n)}if(this.mounted){this.parent=null
for(var o=0,r=this.components;o<r.length;o++){var s=r[o]
s instanceof t.WComponent&&s.unmount()}}return this.components=[],this},i.prototype.addRow=function(t,e,n,o){var r=null==t?"row":t,s=new i(n,r,e,o,!1,"row")
return s.name=s.name+"_row",this.grid().addContainer(s)},i.prototype.addCol=function(e,n,o,r){t.WUtil.isNumeric(e)&&(e="col-md-"+e)
var s=null==e?"col":e,a=new i(o,s,n,r,!1,"col")
return a.name=a.name+"_col",this.row().addContainer(a)},i.prototype.addASide=function(t,e,n,o){var r=new i(n,t,e,o,!1,"aside")
return r.name=r.name+"_aside",this.end().addContainer(r)},i.prototype.addBox=function(t,e,i,o,r){var s=new n(o,t,e,i,r)
return this.addContainer(s),s},i.prototype.addText=function(e,i,n,o,r,s){if(!e||!e.length)return this
var a=""
if(i){var l=i.indexOf(" ")
a=l>0?i.substring(0,l):i}for(var h="",u=0,d=e;u<d.length;u++){var p=d[u]
if(p&&p.length>3){var c=p.substring(0,3)
if("<ul"==c||"<ol"==c||"<li"==c||"<di"==c){h+=p
continue}}h+=i&&"br"!=i?"<"+i+">"+p+"</"+a+">":p+"<br>"}return n||o||r||s?this.add(t.build("div",h,o,s,r,n)):this.add(h),this},i.prototype.findBox=function(t){var e=""
t&&t.length>1&&"#"==t.charAt(0)&&(e=t.substring(1))
for(var o=0,r=this.components;o<r.length;o++){var s=r[o]
if(s instanceof n)if(e){if(s.id==e)return s}else{if(!t)return s
if(s.title==t||s.id==t)return s}else if(s instanceof i){var a=s.findBox(t)
if(!a)return a}}return null},i.prototype.addStack=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o]
if(!n||0==n.length)return this
for(var r=t.style(e),s=t.cls(e),a=0;a<n.length;a++){var l=new i(this.subId(),s,r).add(n[a])
l.name=l.name+"_stack_"+a,this.addContainer(l)}return this},i.prototype.addLine=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o]
if(!n||0==n.length)return this
for(var r=t.style(e),s=t.cls(e),a=0;a<n.length;a++){var l=n[a],h=this.subId(),u=void 0
u=s||r?s?new i(h,s,null,null,!0).add(l):new i(h,"",r,null,!0).add(l):new i(h,"",null,null,!0).add(l),u.name=u.name+"_line_"+a,this.addContainer(u)}return this},i.prototype.addContainer=function(e,n,o,r,s,a){if(e instanceof i)return null==this._classStyle&&e._classStyle&&0==e._classStyle.indexOf("row")&&(this.parent instanceof i?this._classStyle=t.global.con_class:this._classStyle=t.global.main_class),e.parent=this,e.layoutManager||(e.layoutManager=this.layoutManager),this.components.push(e),this.layoutManager&&this.layoutManager.addLayoutComponent(e,n),e
if("string"==typeof e){var l=new i(e,n,o,r,s,a)
return l.layoutManager||(l.layoutManager=this.layoutManager),this.components.push(l),this.layoutManager&&this.layoutManager.addLayoutComponent(l),l}if(!e)return this
var h=i.create(e)
return h.parent=this,h.layoutManager=this.layoutManager,this.components.push(h),this.layoutManager&&this.layoutManager.addLayoutComponent(h,n),h},i.prototype.render=function(){return this.parent||this._classStyle||this._style?this.build(this.rootTag):this.buildRoot(this.rootTag)},i.prototype.make=function(){if(null==this.legend)return""
var e=this.fieldsetStyle?' style="'+t.style(this.fieldsetStyle)+'"':"",i=this.legendStyle?' style="'+t.style(this.legendStyle)+'"':""
return'<fieldset id="'+this.subId("fs")+'"'+e+"><legend"+i+">"+this.legend+"</legend></fieldset>"},i.prototype.componentDidMount=function(){var e=this.root
if(null!=this.legend){var i=$("#"+this.subId("fs"))
i&&i.length&&(e=i)}if(this.wrapper&&(e=t.addWrapper(e,this.wrapper)),this.layoutManager)return void this.layoutManager.layoutContainer(this,e)
for(var n=0,o=this.components;n<o.length;n++){var r=o[n]
r instanceof t.WComponent?r.mount(e):e.append(r)}},i.prototype.componentWillUnmount=function(){for(var e=0,i=this.components;e<i.length;e++){var n=i[e]
n instanceof t.WComponent&&n.unmount()}},i.prototype.rebuild=function(){var e=this.root
if(null!=this.legend){var i=$("#"+this.subId("fs"))
i&&i.length&&(e=i)}if(e.empty(),this.wrapper&&(e=t.addWrapper(e,this.wrapper)),this.layoutManager)return void this.layoutManager.layoutContainer(this,e)
for(var n=0,o=this.components;n<o.length;n++){var r=o[n]
r instanceof t.WComponent?r.mount(e):e.append(r)}return this},i}(t.WComponent)
t.WContainer=e
var i=function(){function e(){this.mapConstraints={},this.mapComponents={}}return e.prototype.addLayoutComponent=function(e,i){if(e&&i){var n=t.getId(e)
n&&(this.mapConstraints[n]=i,this.mapComponents[i]=e)}},e.prototype.removeLayoutComponent=function(e){var i=t.getId(e)
if(i){var n=this.mapConstraints[i]
delete this.mapConstraints[i],n&&delete this.mapComponents[n]}},e.prototype.layoutContainer=function(e,i){for(var n=t.getId(this.currComp),o=0,r=e.components;o<r.length;o++){var s=r[o],a=t.getId(s),l=!1
a&&a!=n&&this.mapConstraints[a]&&(l=!0),s instanceof t.WComponent?(l&&(s.visible=!1),s.mount(i)):s instanceof jQuery&&l&&s.hide()}},e.prototype.show=function(e,i){var n=this.mapComponents[i]
n&&(this.currComp instanceof t.WComponent?this.currComp.visible=!1:this.currComp instanceof jQuery&&this.currComp.show(),n instanceof t.WComponent?(n.visible=!0,this.currComp=n):this.currComp instanceof jQuery?(n.show(),this.currComp=n):this.currComp=void 0)},e}()
t.WCardLayout=i
var n=function(i){function n(e,n,o,r,s){var a=i.call(this,e,t.global.box_class,r,s,!1,"box")||this
return a.TOOL_COLLAPSE="collapse-link",a.TOOL_CLOSE="close-link",a.TOOL_FILTER="filter-link",a.name="WBox",a._addClassStyle=o,a.title=n,a}return __extends(n,i),Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(e){this._title&&this.header.remove(0),this._title=e,e&&("<"!=e.charAt(0)&&t.global.box_title?this.header.add(t.global.box_title.replace("$",e)):this.header.add(e))},enumerable:!1,configurable:!0}),n.prototype.addTool=function(i,n,o,r){var s=this
if(!i)return this
if("string"==typeof i){n||(n=t.WIcon.WRENCH),this.cntls||(this.cntls=new e("",t.global.box_tools),this.header.add(this.cntls),this.tools={})
var a=$('<a class="'+i+'">'+t.buildIcon(n)+"</a>")
this.cntls.add(a),this.tools[i]=a,r?i==this.TOOL_COLLAPSE?this.handlers["_"+this.TOOL_COLLAPSE]=[function(t){s.collapse(r)}]:this.handlers["_"+i]=[r]:(i==this.TOOL_COLLAPSE&&(this.handlers["_"+this.TOOL_COLLAPSE]=[function(t){s.collapse()}]),i==this.TOOL_CLOSE&&(this.handlers["_"+this.TOOL_CLOSE]=[function(t){s.close()}]))}else this.header.add(i)
return this},n.prototype.addCollapse=function(e){return this.addTool(this.TOOL_COLLAPSE,t.WIcon.CHEVRON_UP,"",e),this},n.prototype.addClose=function(e){return this.addTool(this.TOOL_CLOSE,t.WIcon.TIMES,"",e),this},n.prototype.addFilter=function(e){return this.addTool(this.TOOL_FILTER,t.WIcon.FILTER,"",e),this},Object.defineProperty(n.prototype,"header",{get:function(){return this._header?this._header:this._header=new e("",t.cls(t.global.box_header,this._addClassStyle))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"content",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"footer",{get:function(){return this._footer?this._footer:this._footer=new e("",t.cls(t.global.box_footer,this._addClassStyle))},enumerable:!1,configurable:!0}),n.prototype.componentDidMount=function(){this._header&&this._header.mount(this.root)
var e=$(this.build("div","","",t.cls(t.global.box_content,this._addClassStyle),void 0,null))
this.root.append(e)
for(var i=0,n=this.components;i<n.length;i++){var o=n[i]
o instanceof t.WComponent?o.mount(e):e.append(o)}if(this._footer&&this._footer.mount(this.root),this.tools)for(var r in this.tools){var s=this.handlers["_"+r]
if(s&&s.length)for(var a=0,l=s;a<l.length;a++){var h=l[a]
this.tools[r].click(h)}}},n.prototype.componentWillUnmount=function(){i.prototype.componentWillUnmount.call(this),this._header&&this._header.unmount(),this._footer&&this._footer.unmount()},n.prototype.end=function(){return this.parent instanceof e?this.parent:this},n.prototype.addRow=function(t,i,n,o){var r=null==t?"row":t,s=new e(n,r,i,o,!1,"row")
return s.name=s.name+"_row",this.content.addContainer(s)},n.prototype.collapse=function(e){if(!this.root)return this
if(e){e(this.createEvent("_"+this.TOOL_COLLAPSE,{collapsed:this.isCollapsed()}))}this.tools&&this.tools[this.TOOL_COLLAPSE]&&this.tools[this.TOOL_COLLAPSE].find("i").toggleClass(t.WIcon.CHEVRON_UP).toggleClass(t.WIcon.CHEVRON_DOWN)
var i=this.root
return i.children(".ibox-content").slideToggle(200),i.toggleClass("").toggleClass("border-bottom"),setTimeout(function(){i.resize(),i.find("[id^=map-]").resize()},50),this},n.prototype.expand=function(t){return this.isCollapsed()&&this.collapse(t),this},n.prototype.isCollapsed=function(){return!!this.root&&this.tools[this.TOOL_COLLAPSE].find("i").hasClass(t.WIcon.CHEVRON_DOWN)},n.prototype.close=function(){if(!this.root)return this
this.root.remove()},n}(e)
t.WBox=n
var o=function(i){function n(e,n,o,r,s,a,l){void 0===n&&(n="WDialog"),void 0===o&&(o=!0),void 0===r&&(r=!0)
var h=i.call(this,e,n,void 0,s,a,l)||this
return h.buttons=[],h.tagTitle="h3",r&&(o||(h.txtCancel=t.RES.CLOSE),h.buttonCancel()),o&&h.buttonOk(),h.ok=!1,h.cancel=!1,h.isShown=!1,h.id&&"*"!=h.id&&$("#"+h.id).length&&$("#"+h.id).remove(),WuxDOM.onRender(function(t){h.mounted||h.mount(t.element)}),h}return __extends(n,i),n.prototype.onShownModal=function(t){this.on("shown.bs.modal",t)},n.prototype.onHiddenModal=function(t){this.on("hidden.bs.modal",t)},Object.defineProperty(n.prototype,"header",{get:function(){return this.cntHeader?this.cntHeader:(this.cntHeader=new e("","modal-header"),this.btnCloseHeader=new h(this.subId("bhc"),'<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>',void 0,"close","",'data-dismiss="modal"'),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"body",{get:function(){return this.cntBody?this.cntBody:(this.cntBody=new e("",t.cls("modal-body",this._classStyle),"",this._attributes),this.cntBody)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"footer",{get:function(){return this.cntFooter?this.cntFooter:(this.cntFooter=new e("","modal-footer"),this.cntFooter)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!1,configurable:!0}),n.prototype.onClickOk=function(){return!0},n.prototype.onClickCancel=function(){return!0},n.prototype.buildBtnOK=function(){return new h(this.subId("bfo"),t.RES.OK,"",t.BTN.INFO+" button-sm","","")},n.prototype.buildBtnCancel=function(){return this.txtCancel?new h(this.subId("bfc"),this.txtCancel,"",t.BTN.SECONDARY+" button-sm","",""):new h(this.subId("bfc"),t.RES.CANCEL,"",t.BTN.SECONDARY+" button-sm","","")},n.prototype.buttonOk=function(){var t=this
if(this.btnOK)return this.btnOK
this.btnOK=this.buildBtnOK(),this.btnOK.on("click",function(e){t.onClickOk()&&(t.ok=!0,t.cancel=!1,t.root.modal("hide"))}),this.buttons.push(this.btnOK)},n.prototype.buttonCancel=function(){var t=this
if(this.btnCancel)return this.btnCancel
this.btnCancel=this.buildBtnCancel(),this.btnCancel.on("click",function(e){t.onClickCancel()&&(t.ok=!1,t.cancel=!0,t.root.modal("hide"))}),this.buttons.push(this.btnCancel)},n.prototype.show=function(t,e){this.beforeShow()&&(this.ok=!1,this.cancel=!1,this.parent=t,this.parentHandler=e,this.mounted||WuxDOM.mount(this),this.root&&this.root.length&&this.root.modal({backdrop:"static",keyboard:!1}))},n.prototype.hide=function(){this.root&&this.root.length&&this.root.modal("hide")},n.prototype.close=function(){this.ok=!1,this.cancel=!1,this.root&&this.root.length&&this.root.modal("hide")},n.prototype.selection=function(e,i){if(!e)return!1
var n=e.getSelectedRows()
if(!n||!n.length)return i&&t.showWarning(i),!1
var o=e.getSelectedRowsData()
if(!o||!o.length)return i&&t.showWarning(i),!1
if(null==this.props||"number"==typeof this.props){var r=n[0]
this.setProps(r)}return this.setState(o[0]),!0},n.prototype.beforeShow=function(){return!0},n.prototype.onShown=function(){},n.prototype.onHidden=function(){},n.prototype.render=function(){this.isShown=!1,this.cntRoot=new e(this.id,"modal inmodal fade","",'role="dialog" aria-hidden="true"'),this.cntMain=this.cntRoot.addContainer("","modal-dialog modal-lg",this._style),this.cntContent=this.cntMain.addContainer("","modal-content"),this.cntHeader&&this.cntContent.addContainer(this.cntHeader),this.cntBody&&this.cntContent.addContainer(this.cntBody)
for(var t=0,i=this.buttons;t<i.length;t++){var n=i[t]
this.footer.add(n)}return this.cntFooter&&this.cntContent.addContainer(this.cntFooter),this.cntRoot},n.prototype.componentDidMount=function(){var t=this
this.root.on("shown.bs.modal",function(e){t.isShown=!0,t.onShown()}),this.root.on("hidden.bs.modal",function(e){t.isShown=!1,t.onHidden(),t.parentHandler&&(t.parentHandler(e),t.parentHandler=null)})},n.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.btnCancel&&this.btnCancel.unmount(),this.cntFooter&&this.cntFooter.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntContent&&this.cntContent.unmount(),this.cntMain&&this.cntMain.unmount(),this.cntRoot&&this.cntRoot.unmount()},n.prototype.buildTitle=function(e){return this.tagTitle||(this.tagTitle="h3"),"<"+this.tagTitle+">"+t.WUtil.toText(e)+"</"+this.tagTitle+">"},n}(t.WComponent)
t.WDialog=o
var r=function(e){function i(t,i,n,o,r,s){var a=e.call(this,t||"*","WLabel",n,o,r,s)||this
return a.rootTag="span",a.updateState(i),a}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!1,configurable:!0}),i.prototype.updateState=function(i){i||(i=""),e.prototype.updateState.call(this,i),this.root&&this.root.html(t.buildIcon(this.props,""," ")+i)},i.prototype.for=function(e){return this.forId=t.getId(e),this},i.prototype.blink=function(t){return this.root&&this.root.length?(this.blinks=t||3,this.highlight(),this):this},i.prototype.highlight=function(){return this.root&&this.root.length?(this.blinks&&(this.blinks--,this.root.effect("highlight",{},600,this.highlight.bind(this))),this):this},i.prototype.render=function(){var e=this.state?this.state:""
return this.forId?this.buildRoot("label",t.buildIcon(this.props,""," ")+e,'for="'+this.forId+'"',this._classStyle):this.buildRoot(this.rootTag,t.buildIcon(this.props,""," ")+e,null,this._classStyle)},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},i}(t.WComponent)
t.WLabel=r
var s=function(e){function i(t,i,n,o,r,s){var a=e.call(this,t||"*","WInput",i,o,r,s)||this
return a.rootTag="input",a.size=n,a.valueType="s",a.blurOnEnter=!1,a}return __extends(i,e),i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.root&&this.root.val(t)},i.prototype.onEnterPressed=function(t){this.handlers._enter||(this.handlers._enter=[]),this.handlers._enter.push(t)},i.prototype.render=function(){var t=""
if(this.label){t=this.id?'<label for="'+this.id+'">':"<label>"
var e=this.label.lastIndexOf("<br")
e>0?(t+=this.label.substring(0,e).replace("<","&lt;").replace(">","&gt;"),t+="</label><br>"):(t+=this.label.replace("<","&lt;").replace(">","&gt;"),t+="</label> ")}if("static"==this.props)return t+this.build("span",this.state)
var i='name="'+this.id+'"'
return i+=this.props?' type="'+this.props+'"':' type="text"',this.size&&(i+=' size="'+this.size+'"'),this.state&&(i+=' value="'+this.state+'"'),this.placeHolder&&(i+=' placeholder="'+this.placeHolder+'"'),t+this.build(this.rootTag,"",i)},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)
var e=this
this.root.keypress(function(i){if(13==i.which){var n=this.value
"c"==e.valueType?this.value&&(this.value=t.formatCurr(t.WUtil.toNumber(this.value))):"c5"==e.valueType?this.value&&(this.value=t.formatCurr5(t.WUtil.toNumber(this.value))):"n"==e.valueType||"p"==e.valueType?this.value&&(this.value=t.formatNum(this.value)):"i"==e.valueType&&this.value&&(this.value=t.WUtil.toInt(this.value)),e.trigger("statechange",n),e.trigger("_enter"),e.blurOnEnter&&$(this).blur()}}),this.root.blur(function(i){var n=this.value
"c"==e.valueType?this.value&&(this.value=t.formatCurr(t.WUtil.toNumber(this.value))):"c5"==e.valueType?this.value&&(this.value=t.formatCurr5(t.WUtil.toNumber(this.value))):"n"==e.valueType||"p"==e.valueType?this.value&&(this.value=t.formatNum(this.value)):"i"==e.valueType&&this.value&&(this.value=t.WUtil.toInt(this.value)),e.state!=n&&e.trigger("statechange",n)}),this.root.focus(function(i){if(this.value){if("c"==e.valueType||"c5"==e.valueType){var n=t.formatNum(this.value)
n.indexOf(",00")>=0&&n.indexOf(",00")==n.length-3&&(n=n.substring(0,n.length-3)),n.indexOf(",0")>=0&&n.indexOf(",0")==n.length-2&&(n=n.substring(0,n.length-3)),this.value=n}else"n"==e.valueType||"p"==e.valueType?this.value=t.formatNum(this.value):"i"==e.valueType&&(this.value=this.value=t.WUtil.toInt(this.value))
$(this).select()}})},i}(t.WComponent)
t.WInput=s
var a=function(e){function i(t,i,n,o,r){var s=e.call(this,t||"*","WTextArea",i,n,o,r)||this
return s.rootTag="textarea",i||(s.props=5),s}return __extends(i,e),i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.root&&this.root.val(this.state)},i.prototype.getState=function(){return this.root&&(this.state=t.norm(this.root.val())),this.state},i.prototype.render=function(){return this.props||(this.props=1),this._style?this._style.indexOf("width")<0&&(this._style+=";width:100%"):this._style="width:100%",this._attributes?this._style.indexOf("rows=")<0&&(this._attributes+=' rows="'+this.props+'"'):this._attributes='rows="'+this.props+'"',t.build("textarea","",this._style,this._attributes,this.id,this._classStyle)},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.root.val(t.den(this.state))},i}(t.WComponent)
t.WTextArea=a
var l=function(e){function i(t,i,n,o,r,s,a){var l=e.call(this,t||"*","WCheck",o,r,s,a)||this
return l.rootTag="input",l.value=n||"1",o&&l.updateState(n),l._text=i,l}return __extends(i,e),Object.defineProperty(i.prototype,"text",{get:function(){return!this._text&&this.$label?this.$label.text():this._text},set:function(t){if(!this._text&&this.$label)return void this.$label.text(t)
this._text=t,this.mounted&&this.root.html(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"checked",{get:function(){return this.props=this.root.is(":checked"),this.state=this.props?this.value:void 0,this.props},set:function(t){this.setProps(t)},enumerable:!1,configurable:!0}),i.prototype.getState=function(){return this.checked?this.state=this.value:this.state=null,this.state},i.prototype.updateProps=function(t){e.prototype.updateProps.call(this,t),this.state=this.props?this.value:void 0,this.root&&this.root.prop("checked",this.props)},i.prototype.updateState=function(t){"boolean"==typeof t&&(t=t?this.value:void 0),e.prototype.updateState.call(this,t),this.root&&this.root.prop("checked",void 0!=this.state)},i.prototype.render=function(){var t='name="'+this.id+'" type="checkbox"'
t+=this.props?' checked="checked"':""
var e=this._text?"&nbsp;"+this._text:""
return this.build(this.rootTag,e,t)},i.prototype.componentDidMount=function(){var t=this
this._tooltip&&this.root.attr("title",this._tooltip),this.root.change(function(e){var i=t.root.is(":checked")
t.trigger("propschange",i),t.trigger("statechange",i?t.value:void 0)})},i.prototype.getWrapper=function(e){return this.wrapper?this.wrapper:(this.id?this.$label=this._text?$('<label for="'+this.id+'">'+this._text+"</label>"):$("<label></label>"):this.$label=this._text?$("<label>"+this._text+"</label>"):$("<label></label>"),this._text="",this.wrapper=new t.WContainer(this.subId(),"checkbox",e),this.wrapper.add(this),this.wrapper.add(this.$label),this.wrapper.stateComp=this,this.wrapper)},i}(t.WComponent)
t.WCheck=l
var h=function(e){function i(t,i,n,o,r,s,a){var l=e.call(this,t||"*","WButton",n,o,r,s)||this
return l.updateState(i),l.rootTag="button",l.type=a||"button",l}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!1,configurable:!0}),i.prototype.setText=function(t,e){null!=e&&(this.props=e),this.setState(t)},i.prototype.render=function(){this._classStyle||(this._classStyle=t.BTN.PRIMARY)
var e=this.type?'type="'+this.type+'"':"",i=""
return this.state?i+=t.buildIcon(this.props,""," ")+this.state:i+=t.buildIcon(this.props),this.build(this.rootTag,i,e)},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},i.prototype.componentWillUpdate=function(e,i){var n=""
n+=i?t.buildIcon(this.props,""," ")+i:t.buildIcon(this.props),this.root.html(n)},i}(t.WComponent)
t.WButton=h
var u=function(e){function i(t,i,n,o,r,s,a,l){var h=e.call(this,t||"*","WLink",n,o,r,s)||this
return h.updateState(i),h.rootTag="a",h._href=a,h._target=l,h}return __extends(i,e),Object.defineProperty(i.prototype,"icon",{get:function(){return this.props},set:function(t){this.update(t,this.state,!0,!1,!1)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"href",{get:function(){return this._href},set:function(t){this._href=t,this.root&&this.root.length&&(t?this.root.attr("href",t):this.root.removeAttr("href"))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t,this.root&&this.root.length&&(t?this.root.attr("target",t):this.root.removeAttr("target"))},enumerable:!1,configurable:!0}),i.prototype.render=function(){var e=""
this._href&&(e+='href="'+this._href+'"'),this._target&&(e&&(e+=" "),e+='target="'+this._target+'"')
var i=""
return this.state?i+=t.buildIcon(this.icon,""," ")+this.state:i+=t.buildIcon(this.icon),this.build(this.rootTag,i,e)},i.prototype.componentDidMount=function(){this._tooltip&&this.root.attr("title",this._tooltip)},i.prototype.componentWillUpdate=function(e,i){var n=""
n+=i?t.buildIcon(this.icon,""," ")+i:t.buildIcon(this.icon),this.root.html(n)},i}(t.WComponent)
t.WLink=u
var d=function(i){function n(t,e,n,o,r){var s=i.call(this,t||"*","WTab",r,e,n,o)||this
return s.tabs=[],s}return __extends(n,i),n.prototype.addTab=function(i,n){var o=new e("","panel-body")
return o.name=t.buildIcon(n,""," ")+i,this.tabs.push(o),o},n.prototype.render=function(){null==this.state&&(this.state=0)
var t="<div"
this._classStyle?t+=' class="tabs-container '+this._classStyle+'"':t+=' class="tabs-container"',t+=' id="'+this.id+'"',this._style&&(t+=' style="'+this._style+'"'),this.attributes&&(t+=" "+this.attributes),t+=">",t+='<ul class="nav nav-tabs">'
for(var e=0;e<this.tabs.length;e++){var i=this.tabs[e]
e==this.state?t+='<li class="active"><a data-toggle="tab" href="#'+this.id+"-"+e+'"> '+i.name+"</a></li>":t+='<li><a data-toggle="tab" href="#'+this.id+"-"+e+'"> '+i.name+"</a></li>"}t+="</ul>",t+='<div class="tab-content">'
for(var e=0;e<this.tabs.length;e++)e==this.state?t+='<div id="'+this.id+"-"+e+'" class="tab-pane active"></div>':t+='<div id="'+this.id+"-"+e+'" class="tab-pane"></div>'
return t+="</div></div>"},n.prototype.componentDidUpdate=function(t,e){$('.nav-tabs a[href="#'+this.id+"-"+this.state+'"]').tab("show")},n.prototype.componentDidMount=function(){if(this.tabs.length){for(var t=0;t<this.tabs.length;t++){var e=this.tabs[t],i=$("#"+this.id+"-"+t)
i.length&&e.mount(i)}var n=this
this.root.find('a[data-toggle="tab"]').on("shown.bs.tab",function(t){var e=$(t.target).attr("href")
if(e){var i=e.lastIndexOf("-")
i>=0&&n.setState(parseInt(e.substring(i+1)))}})}},n.prototype.componentWillUnmount=function(){for(var t=0,e=this.tabs;t<e.length;t++){var i=e[t]
i&&i.unmount()}},n}(t.WComponent)
t.WTab=d
var p=function(e){function i(t,i,n,o,r,s){var a=e.call(this,t||"*","WSelect",null,o,r,s)||this
return a.rootTag="select",a.options=i,a.multiple=n,a}return __extends(i,e),i.prototype.getProps=function(){var t=this
return this.root?(this.props=[],this.root.find("option:selected").each(function(e,i){t.props.push($(i).text())}),this.props):this.props},i.prototype.select=function(t){return this.root&&this.options?(this.setState(this.options.length>t?this.options[t]:null),this):this},i.prototype.addOption=function(t,e){if(!t)return this
if(this.options||(this.options=[]),this.options.push(t),!this.mounted)return this
var i=this.buildOptions()
return this.root.html(i),e&&this.updateState(t),this},i.prototype.remOption=function(t){if(!t||!this.options)return this
for(var e=-1,i=0;i<this.options.length;i++){var n=this.options[i]
if(n)if("string"==typeof t){if("string"==typeof n){if(n==t){e=i
break}}else if(n.id==t){e=i
break}}else if("string"==typeof n){if(n==t.id){e=i
break}}else if(n.id==t.id){e=i
break}}if(e>=0){if(this.options.splice(e,1),!this.mounted)return this
var o=this.buildOptions()
this.root.html(o)}return this},i.prototype.setOptions=function(e,i){if(this.options=e,!this.mounted)return this
var n=this.root.val(),o=this.buildOptions()
return this.root.html(o),i?this.root.val(n):e&&e.length&&("string"==typeof e[0]?this.trigger("statechange",e[0]):this.trigger("statechange",t.WUtil.getString(e[0],"id"))),this},i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.root&&(null==this.state?this.root.val(""):"string"==typeof this.state||"number"==typeof this.state?this.root.val(""+this.state):this.root.val(this.state.id))},i.prototype.render=function(){var t=this.buildOptions(),e='name="'+this.id+'"'
return this.multiple&&(e+=' multiple="multiple"'),this.buildRoot("select",t,e)},i.prototype.componentDidMount=function(){var t=this
this._tooltip&&this.root.attr("title",this._tooltip),this.state&&this.root.val(this.state),this.root.on("change",function(e){t.trigger("statechange",t.root.val())})},i.prototype.buildOptions=function(){var t=""
this.options||(this.options=[])
for(var e=0,i=this.options;e<i.length;e++){var n=i[e]
t+="string"==typeof n?"<option>"+n+"</option>":'<option value="'+n.id+'">'+n.text+"</option>"}return t},i}(t.WComponent)
t.WSelect=p
var c=function(e){function i(t,i,n,o,r,s){var a=e.call(this,t||"*","WRadio",s,n,o,r)||this
return a.options=i,a}return __extends(i,e),Object.defineProperty(i.prototype,"tooltip",{set:function(t){if(this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.options&&this.options.length)for(var e=0;e<this.options.length;e++){var i=$("#"+this.id+"-"+e)
i.length&&(this._tooltip&&i.attr("title",this._tooltip))}},enumerable:!1,configurable:!0}),i.prototype.select=function(t){return this.root&&this.options?(this.setState(this.options.length>t?this.options[t]:null),this):this},i.prototype.render=function(){var e=""
if(this.label&&(e+=this.id?'<label for="'+this.id+'">':"<label>",e+=this.label.replace("<","&lt;").replace(">","&gt;"),e+="</label> "),!this.options||!this.options.length)return e
void 0===this.state&&(this.state=this.options[0])
for(var i=0;i<this.options.length;i++){var n=this.options[i]
"string"==typeof n?t.match(this.state,n)?e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n+'" name="'+this.id+'" id="'+this.id+"-"+i+'" checked> '+n+"</label>&nbsp;":e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n+'" name="'+this.id+'" id="'+this.id+"-"+i+'"> '+n+"</label>&nbsp;":t.match(this.state,n)?e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n.id+'" name="'+this.id+'" id="'+this.id+"-"+i+'" checked> '+n.text+"</label>&nbsp;":e+='&nbsp;<label style="display:inline;"><input type="radio" value="'+n.id+'" name="'+this.id+'" id="'+this.id+"-"+i+'"> '+n.text+"</label>&nbsp;"}return e},i.prototype.componentDidMount=function(){var t=this
if(this.options&&this.options.length)for(var e=this,i=0;i<this.options.length;i++)!function(i){var n=$("#"+e.id+"-"+i)
if(!n.length)return"continue"
e._tooltip&&n.attr("title",e._tooltip)
var o=e.options[i]
n.click(function(){t.setState(o)})}(i)},i.prototype.componentDidUpdate=function(e,i){for(var n=-1,o=0;o<this.options.length;o++)if(t.match(this.state,this.options[o])){n=o
break}n>=0&&$("#"+this.id+"-"+n).prop("checked",!0)},i}(t.WComponent)
t.WRadio=c
var f=function(e){function i(t,i,n,o,r,s,a){var l=e.call(this,t||"*","WTable",a,o,r,s)||this
if(l.selectedRow=-1,l.rootTag="table",l.header=i,n&&n.length)l.keys=n
else if(l.keys=[],l.header)for(var h=0;h<l.header.length;h++)l.keys.push(h)
return l.widths=[],l.templates=[],l.boldNonZero=!1,l.selClass="success",l}return __extends(i,e),i.prototype.onSelectionChanged=function(t){this.handlers._selectionchanged||(this.handlers._selectionchanged=[]),this.handlers._selectionchanged.push(t)},i.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},i.prototype.onRowPrepared=function(t){this.handlers._rowprepared||(this.handlers._rowprepared=[]),this.handlers._rowprepared.push(t)},i.prototype.onCellClick=function(t){this.handlers._cellclick||(this.handlers._cellclick=[]),this.handlers._cellclick.push(t)},i.prototype.onCellHoverChanged=function(t){this.handlers._cellhover||(this.handlers._cellhover=[]),this.handlers._cellhover.push(t)},i.prototype.clearSelection=function(){if(this.selectedRow=-1,!this.mounted)return this
if(this.root.find("tbody tr").removeClass("success"),!this.handlers._selectionchanged)return this
for(var t=0,e=this.handlers._selectionchanged;t<e.length;t++){(0,e[t])({element:this.root,selectedRowsData:[]})}return this},i.prototype.select=function(t){if(this.selectedRow=t&&t.length?t[0]:-1,!this.mounted)return this
this.root.find("tbody tr").removeClass("success")
for(var e=[],i=0,n=t;i<n.length;i++){var o=n[i]
this.root.find("tbody tr:eq("+o+")").addClass("success"),this.state&&this.state.length>o&&e.push(this.state[o])}if(!this.handlers._selectionchanged)return this
for(var r=0,s=this.handlers._selectionchanged;r<s.length;r++){(0,s[r])({element:this.root,selectedRowsData:e})}return this},i.prototype.selectAll=function(t){if(!this.mounted)return this
if(t&&this.selectedRow>=0)return this.clearSelection()
if(this.selectedRow=-1,this.state&&this.state.length&&(this.selectedRow=0),this.root.find("tbody tr").addClass("success"),!this.handlers._selectionchanged)return this
for(var e=0,i=this.handlers._selectionchanged;e<i.length;e++){(0,i[e])({element:this.root,selectedRowsData:this.state})}return this},i.prototype.getSelectedRows=function(){return this.mounted?this.selectedRow<0?[]:[this.selectedRow]:[]},i.prototype.getSelectedRowsData=function(){return this.mounted?this.selectedRow<0?[]:this.state&&this.state.length?this.state.length<=this.selectedRow?[]:[this.state[this.selectedRow]]:[]:[]},i.prototype.getFilteredRowsData=function(){return this.state},i.prototype.refresh=function(){return this},i.prototype.getCellValue=function(e,i){if(e<0||i<0)return null
if(!this.state||this.state.length<=e)return null
if(!this.keys||this.keys.length<=i)return null
var n=this.keys[i],o=this.state[e]
return t.WUtil.getValue(o,n)},i.prototype.getColHeader=function(t){return t<0?"":!this.header||this.header.length<=t?"":this.header[t]},i.prototype.render=function(){if(this.shouldBuildRoot()){var e="table"
this._classStyle&&(e=this._classStyle.indexOf("table ")>=0?this._classStyle:e+" "+this._classStyle)
var i=this.style?' style="'+this.style+'"':"",n='<div class="table-responsive"'+t.buildCss(this.divStyle)+'><table id="'+this.id+'" class="'+e+'"'+i+">"
if(this.header&&this.header.length){var o=!1
if("string"==typeof this.headStyle?this.headStyle.indexOf("text-align")>0&&(o=!0):this.headStyle&&this.headStyle.a&&(o=!0),!this.hideHeader){n+=o?"<thead><tr>":"<thead><tr"+t.buildCss(this.headStyle)+">"
for(var r=-1,s=0,a=this.header;s<a.length;s++){var l=a[s]
r++
var h=void 0
h=0==r?this.col0Style?this.col0Style:this.colStyle:r==this.header.length-1?this.colLStyle?this.colLStyle:this.colStyle:o?this.headStyle:this.colStyle
var u=this.widths&&this.widths.length>r?this.widths[r]:0
u?this.widthsPerc?n+="<th"+t.buildCss(h,{w:u+"%"})+">"+l+"</th>":n+="<th"+t.buildCss(h,{w:u})+">"+l+"</th>":n+="<th"+t.buildCss(h)+">"+l+"</th>"}n+="</tr></thead>"}}return n+="<tbody></tbody>",n+="</table></div>"}},i.prototype.componentDidMount=function(){this.buildBody()
var t=this
this.root.on("click","tbody tr",function(e){if(t.selectionMode&&"none"!=t.selectionMode){var i=$(this)
i.addClass("success").siblings().removeClass("success"),t.selectedRow=i.index()
var n=t.state&&t.state.length?t.state[t.selectedRow]:void 0
if(t.handlers._selectionchanged)for(var o=0,r=t.handlers._selectionchanged;o<r.length;o++){var s=r[o]
s({element:t.root,selectedRowsData:[n]})}}}),this.root.on("click","tbody tr td",function(e){if(t.handlers._cellclick)for(var i=$(this),n=i.parent().index(),o=i.index(),r=0,s=t.handlers._cellclick;r<s.length;r++){var a=s[r]
a({element:t.root,rowIndex:n,colIndex:o})}}),this.root.on("mouseover","tbody tr td",function(e){if(t.handlers._cellhover)for(var i=$(this),n=i.parent().index(),o=i.index(),r=0,s=t.handlers._cellhover;r<s.length;r++){var a=s[r]
a({element:t.root,rowIndex:n,colIndex:o})}}),this.root.on("dblclick","tbody tr",function(e){if(t.handlers._doubleclick)for(var i=0,n=t.handlers._doubleclick;i<n.length;i++){var o=n[i]
o({element:t.root})}})},i.prototype.componentDidUpdate=function(t,e){this.buildBody()},i.prototype.buildBody=function(){this.selectedRow=-1
var e=this.root.find("tbody")
if(e.html(""),this.state&&this.state.length&&this.keys&&this.keys.length)for(var i=-1,n=0,o=this.state;n<o.length;n++){var r=o[n]
i++
var s=void 0
if(s=i==this.state.length-1&&this.footerStyle?$(t.build("tr","",this.footerStyle)):$(t.build("tr","",this.rowStyle)),e.append(s),this.handlers._rowprepared)for(var a={element:this.root,rowElement:s,data:r,rowIndex:i},l=0,h=this.handlers._rowprepared;l<h.length;l++){var u=h[l]
u(a)}for(var d=-1,p=0,c=this.keys;p<c.length;p++){var f=c[p],g=r[f],y=""
null==g&&(g=""),d++
var b=t.WUtil.getItem(this.types,d)
switch(b){case"w":y="text-center"
break
case"c":g=t.formatCurr(g),y="text-right"
break
case"c5":g=t.formatCurr5(g),y="text-right"
break
case"i":g=t.formatNum(g),y="text-right"
break
case"n":g=t.formatNum2(g),y="text-right"
break
case"d":g=t.formatDate(g)
break
case"t":g=t.formatDateTime(g)
break
case"b":g=g?"&check;":""
break
default:g instanceof Date&&(g=t.formatDate(g)),"boolean"==typeof g&&(g=g?"&check;":""),"number"==typeof g&&(g=t.formatNum2(g),y="text-right")}var m=void 0
m=0==d?this.col0Style?this.col0Style:this.colStyle:d==this.header.length-1&&this.colLStyle?this.colLStyle:this.colStyle,"string"==typeof m?m.indexOf("text-align")>0&&(y=""):m&&m.a&&(y="")
var v=this.widths&&this.widths.length>d?this.widths[d]:0,_=this.templates&&this.templates.length>d?this.templates[d]:void 0
if(_){var w=$("<td"+t.buildCss(m,y,{w:v})+"></td>")
_(w,{data:r,text:g}),s.append(w)}else if(t.WUtil.hasComponents(g))for(var x=t.WUtil.toArrayComponent(g),C=0,S=x;C<S.length;C++){var T=S[C],w=$("<td"+t.buildCss(m,y,{w:v})+"></td>")
s.append(w),T.mount(w)}else this.boldNonZero&&0!=g&&"0"!=g&&""!=g?s.append($("<td"+t.buildCss(m,y,{w:v})+"><strong>"+g+"</strong></td>")):s.append($("<td"+t.buildCss(m,y,{w:v})+">"+g+"</td>"))}if(this.header&&this.header.length>this.keys.length)for(var O=0;O<this.header.length-this.keys.length;O++)s.append($("<td"+t.buildCss(this.colStyle)+"></td>"))}},i}(t.WComponent)
t.WTable=f
var g=function(e){function i(i,n,o,r){var s=e.call(this,i||"*","WFormPanel",r)||this
return s.rootTag="form",s._attributes=o?'role="form" name="'+s.id+'" action="'+o+'"':'role="form" name="'+s.id+'" action="javascript:void(0);"',s.stateChangeOnBlur=!1,s.inputClass=t.CSS.FORM_CTRL,s.title=n,s.nextOnEnter=!0,s.autoValidate=!1,s.init(),s}return __extends(i,e),i.prototype.init=function(){return this.rows=[],this.roww=[],this.hiddens=[],this.internals={},this.components=[],this.captions=[],this.dpids=[],this.nextMap={},this.mapTooltips={},this.mapLabelLinks={},this.minValues={},this.maxValues={},this.footer=[],this.currRow=null,this.addRow(),this},i.prototype.focus=function(){if(!this.mounted)return this
var t=this.first(!0)
return t&&(t.component?t.component.focus():t.element&&t.element.focus()),this},i.prototype.first=function(t){if(!this.rows)return null
for(var e=0,i=this.rows;e<i.length;e++)for(var n=i[e],o=0,r=n;o<r.length;o++){var s=r[o]
if(!t)return s
if((null==s.enabled||s.enabled)&&(null==s.readonly||!s.readonly))return s}return null},i.prototype.focusOn=function(t){if(!this.mounted)return this
var e=this.getField(t)
return e?(e.component?e.component.focus():e.element&&e.element.focus(),this):this},i.prototype.onEnterPressed=function(t){t&&(this.handlers._enter||(this.handlers._enter=[]),this.handlers._enter.push(t),this.nextOnEnter=!1)},i.prototype.onEnd=function(t){t&&(this.handlers._end||(this.handlers._end=[]),this.handlers._end.push(t))},i.prototype.onChangeDate=function(t){t&&(this.handlers._changedate||(this.handlers._changedate=[]),this.handlers._changedate.push(t))},i.prototype.addToFooter=function(t,e){return t||this.footer?(void 0!=e&&(this.footerSep=e),this.footer.push(t),this):this},i.prototype.addRow=function(e,i,n,o,r){return void 0===r&&(r="row"),this.currRow&&!this.currRow.length?(this.roww[this.roww.length-1]={classStyle:e,style:i,id:n,attributes:t.attributes(o),type:r},this):(this.currRow=new Array,this.rows.push(this.currRow),this.roww.push({classStyle:e,style:i,id:n,attributes:t.attributes(o),type:r}),this)},i.prototype.addTextField=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Text,readonly:n}),this},i.prototype.addNoteField=function(e,i,n,o){return n||(n=3),this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Note,attributes:'rows="'+n+'"',readonly:o}),this},i.prototype.addCurrencyField=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Text,readonly:n,valueType:"c",style:{a:"right"}}),this},i.prototype.addCurrency5Field=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Text,readonly:n,valueType:"c5",style:{a:"right"}}),this},i.prototype.addIntegerField=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Text,readonly:n,valueType:"i"}),this},i.prototype.addDecimalField=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Text,readonly:n,valueType:"n"}),this},i.prototype.addDateField=function(e,i,n,o,r){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Date,readonly:n,valueType:"d",minValue:o,maxValue:r}),this},i.prototype.addOptionsField=function(e,i,n,o,r){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Select,readonly:r,options:n,attributes:o}),this},i.prototype.addBooleanField=function(e,i){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.CheckBox}),this},i.prototype.addBlankField=function(e,i,n,o,r,s){return this.currRow.push({id:o,label:e,type:t.WInputType.Blank,classStyle:i,style:n,attributes:r,placeholder:s}),this},i.prototype.addRadioField=function(e,i,n){var o=new c(this.subId(e),n)
return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Radio,component:o}),this},i.prototype.addPasswordField=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Password,readonly:n}),this},i.prototype.addEmailField=function(e,i,n){return this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Email,readonly:n}),this},i.prototype.addComponent=function(e,i,n,o){return n?(e?(n.id=this.subId(e),this.currRow.push({id:this.subId(e),label:i,type:t.WInputType.Component,component:n,readonly:o}),n instanceof t.WInput&&(n.classStyle||(n.classStyle=t.CSS.FORM_CTRL))):(n.id="",this.currRow.push({id:"",label:i,type:t.WInputType.Component,component:n,readonly:o})),this.components.push(n),this):this},i.prototype.addCaption=function(e,i,n,o){if(e){var r=new t.WLabel("",e,i,n,o)
return this.currRow.push({id:"",label:"",type:t.WInputType.Component,component:r,readonly:!0}),this.components.push(r),this.captions.push(r),this}},i.prototype.addInternalField=function(t,e){return void 0===e&&(e=null),this.internals[t]=e,this},i.prototype.addHiddenField=function(e,i){return this.hiddens.push({id:this.subId(e),type:t.WInputType.Hidden,value:i}),this},i.prototype.setTooltip=function(t,e){var i=this.getField(t)
return i?(e?this.mapTooltips[i.id]=e:delete this.mapTooltips[i.id],this):this},i.prototype.setLabelLinks=function(t,e){var i=this.getField(t)
return i?(e&&e.length?this.mapLabelLinks[i.id]=e:delete this.mapLabelLinks[i.id],this):this},i.prototype.setReadOnly=function(e,i){if("string"==typeof e){var n=this.getField(e)
if(!n)return this
if(n.readonly=i,this.mounted)if(n.component)n.component.enabled=!i
else{var o=$("#"+n.id),r=t.getTagName(o)
"select"==r?i?o.prop("disabled",!0):o.prop("disabled",!1):o.prop("readonly",i)}}else for(var s=0;s<this.rows.length;s++)for(var a=this.rows[s],l=0;l<a.length;l++){var n=a[l]
if(n.readonly=e,this.mounted)if(n.component)n.component.enabled=!e
else{var o=$("#"+n.id),r=t.getTagName(o)
"select"==r?e?o.prop("disabled",!0):o.prop("disabled",!1):o.prop("readonly",e)}}return this.trigger("propschange"),this},Object.defineProperty(i.prototype,"enabled",{set:function(t){this._enabled=t
for(var e=0;e<this.rows.length;e++)for(var i=this.rows[e],n=0;n<i.length;n++){var o=i[n]
o.enabled=t,this.mounted&&(o.component?o.component.enabled=t:$("#"+o.id).prop("disabled",!t))}},enumerable:!1,configurable:!0}),i.prototype.setEnabled=function(t,e){if("string"==typeof t){var i=this.getField(t)
if(!i)return this
i.enabled=e,this.mounted&&(i.component?i.component.enabled=e:$("#"+i.id).prop("disabled",!e))}else this.enabled=t
return this.trigger("propschange"),this},i.prototype.setVisible=function(t,e){var i=this.getField(t)
return i?(i.visible=e,this.mounted&&(i.component?i.component.visible=e:e?$("#"+i.id).show():$("#"+i.id).hide(),i.label&&(e?$('label[for="'+i.id+'"]').show():$('label[for="'+i.id+'"]').hide())),this.trigger("propschange"),this):this},i.prototype.setLabelCss=function(e,i){var n=this.getField(e)
if(!n)return this
if(n.labelCss=i,this.mounted){var o=$('label[for="'+n.id+'"]')
o.length&&t.setCss(o,i)}return this},i.prototype.setLabelText=function(t,e){var i=this.getField(t)
if(!i)return this
if(i.label=e,this.mounted){var n=$('label[for="'+i.id+'"]')
n.length&&n.html(e)}return this},i.prototype.setSpanField=function(t,e){var i=this.getField(t)
return i?(i.span=e,this):this},i.prototype.getField=function(t){if(t)for(var e=0==t.indexOf(this.id+"-")?t:this.subId(t),i=0;i<this.rows.length;i++)for(var n=this.rows[i],o=0;o<n.length;o++){var r=n[o]
if(r.id==e)return r}},i.prototype.onMount=function(t,e){var i=this.getField(t)
return i?(i.onmount=e,this):this},i.prototype.onFocus=function(t,e){var i=this.getField(t)
return i?(i.onfocus=e,this):this},i.prototype.onBlur=function(t,e){var i=this.getField(t)
return i?(i.onblur=e,this):this},i.prototype.getStateOf=function(t){var e=this.getField(t)
return e&&e.component?e.component.getState():null},i.prototype.getPropsOf=function(t){var e=this.getField(t)
return e&&e.component?e.component.getProps():null},i.prototype.next=function(t){if(t){var e=0==t.indexOf(this.id+"-")?t:this.subId(t)
if(this.nextMap){var i=this.nextMap[this.ripId(e)]
if(i){var n=this.getField(i)
if(n)return n}}for(var o=!1,r=0;r<this.rows.length;r++)for(var s=this.rows[r],a=0;a<s.length;a++){var l=s[a]
if(o)return l
l.id==e&&(o=!0)}}},i.prototype.setMandatory=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
if(!this.rows)return this
for(var i=[],n=0,o=t;n<o.length;n++){var r=o[n],s=0==r.indexOf(this.id+"-")?r:this.subId(r)
i.push(s)}for(var a=0;a<this.rows.length;a++)for(var l=this.rows[a],h=0;h<l.length;h++){var u=l[h]
i.indexOf(u.id)>=0?u.required=!0:u.required=!1}return this},i.prototype.checkMandatory=function(t,e,i){var n=this.getState()
n||(n={})
for(var o="",r="",s=!1,a=0;a<this.rows.length;a++)for(var l=this.rows[a],h=0;h<l.length;h++){var u=l[h],d=this.ripId(u.id),p=n[d]
u.required&&(null==p||""==p?(o+=t?","+u.label:","+d,r||(r=d)):s=!0)}return i&&s?"":(r&&e&&this.focusOn(r),o?o.substring(1):o)},i.prototype.getState=function(){return this.state=this.autoValidate?this.validate():this.getValues(),this.state},i.prototype.render=function(){return this.buildRoot(this.rootTag)},i.prototype.componentDidMount=function(){var e=this
this.inputClass||(this.inputClass=t.CSS.FORM_CTRL),this.minValues={},this.maxValues={},this.dpids=[]
for(var i=0;i<this.rows.length;i++){var n=this.roww[i],o="<div"
if(n){var r=t.cls(n.type,n.classStyle,n.style)
r&&(o+=' class="'+r+'"')
var s=t.style(n.style)
s&&(o+=' style="'+s+'"'),n.id&&(o+=' id="'+n.id+'"'),n.attributes&&(o+=" "+n.attributes)}else o+=' class="row"'
o+="></div>"
var a=$(o)
this.root.append(a)
for(var l=this.rows[i],h=0,u=0;u<l.length;u++){var d=l[u]
d.type!==t.WInputType.Hidden&&(h+=d.span&&d.span>0?d.span:1)}for(var u=0;u<l.length;u++){var d=l[u]
if(d.id&&(d.minValue&&(this.minValues[d.id]=d.minValue),d.maxValue&&(this.maxValues[d.id]=d.maxValue)),d.type!==t.WInputType.Hidden){var p=Math.floor(12/h)
p<1&&(p=1),1==p&&h<11&&(0==u||u==h-1)&&(p=2),d.span&&d.span>0&&(p*=d.span)
var c=$('<div class="col-md-'+p+'"></div>')
a.append(c)
var f=$('<div class="form-group"></div>')
if(c.append(f),d.label){var g="",y=""
if(d.labelCss){var b=t.cls(d.labelCss),m=t.style(d.labelCss)
b&&(g+=' class="'+b+'"'),m&&(g+=' style="'+m+'"')}else if(d.required){var b=t.cls(t.CSS.FIELD_REQUIRED),m=t.style(t.CSS.FIELD_REQUIRED)
b&&(g+=' class="'+b+'"'),m&&(g+=' style="'+m+'"'),y=" *"}if(d.id&&this.mapTooltips[d.id]?f.append($('<label for="'+d.id+'" title="'+this.mapTooltips[d.id]+'"'+g+">"+d.label+y+"</label>")):d.id?f.append($('<label for="'+d.id+'" title="'+d.label+'"'+g+">"+d.label+y+"</label>")):f.append($('<label title="'+d.label+'"'+g+">"+d.label+y+"</label>")),d.id&&this.mapLabelLinks[d.id])for(var v=0,_=this.mapLabelLinks[d.id];v<_.length;v++){var w=_[v],x=$('<span style="padding-left:8px;"></span>')
f.append(x),w.mount(x)}}switch(d.type){case t.WInputType.Blank:d.element=$(t.build("div",d.placeholder,d.style,d.attributes,d.id,d.classStyle))
break
case t.WInputType.Text:var C='<input type="text" name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'" '
d.readonly&&(C+="readonly "),0==d.enabled&&(C+="disabled "),d.style&&(C+=' style="'+t.style(d.style)+'"'),C+="/>",d.element=$(C)
break
case t.WInputType.Note:var S='<textarea name="'+d.id+'" id="'+d.id+'" class="form-control" '
d.attributes&&(S+=d.attributes+" "),d.readonly&&(S+="readonly "),0==d.enabled&&(S+="disabled "),d.style&&(S+=' style="'+t.style(d.style)+'"'),S+="></textarea>",d.element=$(S)
break
case t.WInputType.Date:this.dpids.push(d.id)
var T='<div class="input-group" id="igd-'+d.id+'">'
T+='<span class="input-group-addon">'+t.buildIcon(t.WIcon.CALENDAR)+"</span> ",T+='<input type="text" name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'" ',d.readonly&&(T+="readonly "),0==d.enabled&&(T+="disabled "),T+="/></div>",d.element=$(T)
break
case t.WInputType.CheckBox:if(!this.checkboxStyle){var O=Math.round(.8*parseInt(this.root.css("font-size")));(isNaN(O)||O<16)&&(O=16),this.checkboxStyle="height:"+O+"px;"}this.checkboxStyle.length>2?d.element=$('<input type="checkbox" name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'" style="'+this.checkboxStyle+'"/>'):d.element=$('<input type="checkbox" name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'"/>')
break
case t.WInputType.Radio:d.component&&d.component.mount(f)
break
case t.WInputType.Select:var k=""
if(d.attributes?(k+='<select name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'" '+d.attributes,(d.readonly||0==d.enabled)&&(k+=" disabled"),k+=">"):(k+='<select name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'"',(d.readonly||0==d.enabled)&&(k+="disabled"),k+=">"),d.options&&d.options.length>0)for(var W=0;W<d.options.length;W++){var R=d.options[W]
k+="string"==typeof R?"<option>"+R+"</option>":'<option value="'+R.id+'">'+R.text+"</option>"}k+="</select>",d.element=$(k)
break
case t.WInputType.Email:var D='<input type="text" name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'" '
d.readonly&&(D+="readonly "),0==d.enabled&&(D+="disabled "),d.style&&(D+=' style="'+t.style(d.style)+'"'),D+="/>",d.element=$(D)
break
case t.WInputType.Password:var I='<input type="password" name="'+d.id+'" id="'+d.id+'" class="'+this.inputClass+'" '
d.readonly&&(I+="readonly "),0==d.enabled&&(I+="disabled "),d.style&&(I+=' style="'+t.style(d.style)+'"'),I+="/>",d.element=$(I)
break
case t.WInputType.Component:d.component&&((0==d.enabled||d.readonly)&&(d.component.enabled=!1),d.component.mount(f),d.onmount&&d.onmount(d),d.onfocus&&d.component.on("focus",d.onfocus),d.onblur&&d.component.on("blur",d.onblur))}d.element&&(f.append(d.element),d.type==t.WInputType.Text&&("c"==d.valueType||"c5"==d.valueType?(d.element.focus(function(e){if(this.value){var i=t.formatNum(this.value)
i.indexOf(",00")>=0&&i.indexOf(",00")==i.length-3&&(i=i.substring(0,i.length-3)),i.indexOf(",0")>=0&&i.indexOf(",0")==i.length-2&&(i=i.substring(0,i.length-3)),this.value=i,$(this).select()}}),"c"==d.valueType?d.element.blur(function(e){this.value&&(this.value=t.formatCurr(t.WUtil.toNumber(this.value)))}):d.element.blur(function(e){this.value&&(this.value=t.formatCurr5(t.WUtil.toNumber(this.value)))})):"n"==d.valueType?(d.element.focus(function(e){this.value&&(this.value=t.formatNum(this.value),$(this).select())}),d.element.blur(function(e){this.value&&(this.value=t.formatNum(this.value))})):"i"==d.valueType?(d.element.focus(function(e){this.value&&(this.value=t.WUtil.toInt(this.value),$(this).select())}),d.element.blur(function(e){this.value&&(this.value=t.WUtil.toInt(this.value))})):d.element.focus(function(t){$(this).select()})),null==d.visible||d.visible||(d.element.hide(),d.label&&$('label[for="'+d.id+'"]').hide()),d.onmount&&d.onmount(d),d.onfocus&&d.element.focus(d.onfocus),d.onblur&&d.element.blur(d.onblur))}}}for(var E=0,A=this.hiddens;E<A.length;E++){var d=A[E]
null==d.value&&(d.value=""),this.root.append('<input type="hidden" name="'+d.id+'" id="'+d.id+'" value="'+d.value+'">')}if(this.footer&&this.footer.length>0){var L=t.style(this.footerStyle)
if(this.footerClass||(this.footerClass="col-md-12"),L=L?' style="'+L+'"':' style="text-align:right;"',this.footerSep)if("string"==typeof this.footerSep){var M=this.footerSep.charAt(0)
"<"==M?this.root.append(this.footerSep):t.WUtil.isNumeric(M)&&this.root.append('<div style="height:'+this.footerSep+'px;"></div>')}else this.root.append('<div style="height:'+this.footerSep+'px;"></div>')
var U=$('<div class="row"></div>')
this.root.append(U)
var F=$('<div class="'+this.footerClass+'"'+L+"></div>")
U.append(F)
for(var N=0,P=this.footer;N<P.length;N++){var H=P[N]
"string"==typeof H&&H.length>0?F.append($(H)):H instanceof t.WComponent?H.mount(F):F.append(H)}}for(var V=this,B=0,G=this.dpids;B<G.length;B++){var j=G[B]
!function(i){var n=t.WUtil.getDate(V.minValues,i)
$("#"+i).datepicker({language:t.global.locale,todayBtn:"linked",keyboardNavigation:!1,forceParse:!1,calendarWeeks:!0,autoclose:!0,minDate:n}).on("changeDate",function(n){if(e.handlers._changedate)for(var o=0,r=e.handlers._changedate;o<r.length;o++){var s=r[o]
s(n)}var a=t.WUtil.getDate(e.minValues,i),l=t.WUtil.getDate(e.maxValues,i)
if(a||l){var h=t.WUtil.getDate(n,"date")
if(h){var u=t.WUtil.toInt(h)
if(!(u<19000101)){var d=t.WUtil.toInt(a)
d>=19000101&&u<d&&(t.showWarning(t.RES.ERR_DATE),$(n.target).datepicker("setDate",a))
var p=t.WUtil.toInt(l)
p>=19000101&&u>p&&(t.showWarning(t.RES.ERR_DATE),$(n.target).datepicker("setDate",l))}}}})}(j)}"object"==typeof this.state&&this.updateView(),this.root.find("input").keypress(function(t){if(13==t.which){for(var i=$(t.target).attr("id"),n=e.next(i);n&&!e.isFocusable(n);)n=e.next(n.id)
n&&e.nextOnEnter?(n.component?n.component.focus():n.element&&("DIV"==n.element.prop("tagName")?n.element.find("input").focus():n.element.focus()),e.stateChangeOnBlur||(e.lastChanged=e.ripId(i),e.trigger("statechange"))):(e.lastChanged=e.ripId(i),e.trigger("statechange")),e.trigger("_enter",e.ripId(i)),n||e.trigger("_end",e.ripId(i))}}),this.stateChangeOnBlur&&this.root.find("input").blur(function(t){e.lastChanged=e.ripId($(t.target).attr("id")),e.trigger("statechange")}),this.root.on("change","select",function(t){var i=(new Date).getTime()
e.lastTs&&i-e.lastTs<200||(e.lastTs=i,e.lastChanged=e.ripId($(t.target).attr("id")),e.trigger("statechange"))})},i.prototype.isFocusable=function(t){return!!t&&(!t.readonly&&!(null!=t.enabled&&!t.enabled))},i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.mounted&&(!t||$.isEmptyObject(t)?this.clear():this.updateView())},i.prototype.isBlank=function(t){if(t){var e=this.getValue(t)
if(0===e)return!1
if(!e)return!0
var i=""+e
return!i.trim()}for(var n=0;n<this.rows.length;n++)for(var o=this.rows[n],r=0;r<o.length;r++){var s=o[r],e=this.getValue(s)
if(0==e)return!1
if(e)return!1
var i=""+e
if(i.trim())return!1}return!0},i.prototype.isZero=function(t){var e=this.getValue(t)
return!e||("0"==e||!(""+e).trim())},i.prototype.match=function(e,i){var n=this.getValue(e)
return t.WUtil.toString(n)==t.WUtil.toString(i)},i.prototype.transferTo=function(i,n,o){var r
if(i instanceof t.WFormPanel){i.clear(),r=e.prototype.transferTo.call(this,i,n)
for(var s=0;s<this.rows.length;s++)for(var a=this.rows[s],l=0;l<a.length;l++){var h=a[l]
if(h.component){var u=i.getField(this.ripId(h.id))
u&&u.component&&(r=r&&h.component.transferTo(u.component))}}o&&o()}else r=e.prototype.transferTo.call(this,i,n,o)
return r},i.prototype.clear=function(){this.debug&&console.log("WUX.WFormPanel.clear")
for(var t=0;t<this.components.length;t++)this.components[t].id&&this.components[t].setState(null)
for(var e in this.internals)this.internals.hasOwnProperty(e)&&(this.internals[e]=null)
if(!this.root)return this
var i=this.root,n=i[0]
if(!n||!n.elements)return this
for(var o=0;o<n.elements.length;o++){var r=n.elements[o]
switch(r.type){case"checkbox":case"radio":r.checked=!1
break
case"select-one":case"select-multiple":r.selectedIndex=-1
break
default:r.value=""}}if(this.dpids)for(var s=0,a=this.dpids;s<a.length;s++){var l=a[s]
$("#"+l).datepicker("setDate",null)}return this},i.prototype.select=function(t,e){if(!t)return this
var i=this.getField(t)
if(!i||!i.component)return this
var n=i.component.select
return"function"==typeof n?(n.bind(i.component)(e),this):(console.error("WFormPanel.select("+t+","+e+") not applicable."),this)},i.prototype.setValue=function(e,i,n){if(void 0===n&&(n=!0),this.debug&&console.log("WUX.WFormPanel.setValue("+e+","+i+","+n+")"),!e)return this
var o=this.subId(e)
if(n&&(this.state||(this.state={}),this.state[e]=i),void 0!==this.internals[e])return void 0===i&&(i=null),this.internals[e]=i,this
for(var r=0,s=this.components;r<s.length;r++){var a=s[r]
if(a.id==o)return a.setState(i),this}if(!this.root||!this.root.length)return this
if("number"==typeof i&&(i=t.formatNum(i)),this.dpids&&this.dpids.indexOf(o)>=0)return void $("#"+o).datepicker("setDate",t.WUtil.toDate(i))
var l=this.root.find("[name="+o+"]")
if(l.length||(l=$("#"+o)),!l.length)return this
switch(null==i&&(i=""),l.attr("type")){case"checkbox":case"radio":l.prop("checked",i)
break
default:i instanceof Date?l.val(t.formatDate(i)):Array.isArray(i)?l.val(i):l.val(t.den(i.toString()))}return this},i.prototype.getValue=function(t){if(t){var e,i
"string"==typeof t?(e=this.subId(t),i=t):(e=t.id,i=t.id)
for(var n=0,o=this.components;n<o.length;n++){var r=o[n]
if(r.id==e)return r.getState()}if(void 0!==this.internals[i])return this.internals[i]
if(this.root&&this.root.length){var s=this.root.find("[name="+e+"]")
if(s.length||(s=$("#"+e)),s.length){var a=s.get(0)
if(a)switch(a.type){case"checkbox":return a.checked
case"select-multiple":for(var l=[],h=0;h<a.length;h++)l.push(a.options[h].value)
return l}return s.val()}}}},i.prototype.getValues=function(e){if(!this.root||!this.root.length)return{}
var i={}
for(var n in this.internals)if(this.internals.hasOwnProperty(n)){var o=this.internals[n]
null!=o&&(i[n]=o)}var r=this.root,s=r[0]
if(!s||!s.elements)return i
for(var a=0;a<s.elements.length;a++){var l=s.elements[a]
if(l.name&&l.value){var h=l.name
switch(l.type){case"checkbox":i[this.ripId(h)]=l.checked
break
case"radio":l.checked&&(i[this.ripId(h)]=l.value)
break
case"select-one":i[this.ripId(h)]=l.options[l.selectedIndex].value
break
case"select-multiple":for(var u=[],d=0;d<l.length;d++)l.options[d].selected&&u.push(l.options[d].value)
i[this.ripId(h)]=u
break
case"text":case"textarea":i[this.ripId(h)]=t.norm(l.value)
break
default:i[this.ripId(h)]=l.value}}}for(var p=0,c=this.components;p<c.length;p++){var f=c[p]
if(f.id){var g=null
if(null==(g=e?t.format(f):f.getState()))continue
i[this.ripId(f.id)]=g}}return i},i.prototype.updateView=function(){if(this.debug&&console.log("WUX.WFormPanel.updateView()"),!this.state)return void this.clear()
for(var t in this.state)this.setValue(t,this.state[t],!1)},i.prototype.validate=function(){for(var e=this.getValues(),i=0;i<this.rows.length;i++)for(var n=this.rows[i],o=0;o<n.length;o++){var r=n[o],s=r.id,a=this.ripId(s)
if(r.required&&null==e[a])throw new Error(r.label+": obbligatorio")
if(r.size&&null!=e[a]&&e[a].length>r.size)throw new Error(r.label+": supera "+r.size+" caratteri")
if(r.type&&null!=e[a]){var l=null,h=null
switch(r.type==t.WInputType.Date&&(e[a]=t.WUtil.toDate(e[a])),r.type){case t.WInputType.Number:h=new RegExp("^\\d+\\.\\d{1,2}$|^\\d*$"),h.test(e[a])||(l=r.label+": "+e[a]+" non numerico")
break
case t.WInputType.Integer:h=new RegExp("^\\d*$"),h.test(e[a])||(l=r.label+": "+e[a]+" non intero")
break
case t.WInputType.Email:h=new RegExp(/^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/),h.test(e[a])||(l=r.label+": "+e[a]+" email non valida")}if(l)throw new Error(l)}}return e},i}(t.WComponent)
t.WFormPanel=g
var y=function(i){function n(t,e,o,r,s){void 0===e&&(e="WWindow")
var a=i.call(this,t||"*",e,s,"","",r)||this
return a.position=o,a.position||(a.position="bottom"),a.headerStyle=n.DEF_HEADER_STYLE,a.id&&"*"!=a.id&&$("#"+a.id).length&&$("#"+a.id).remove(),WuxDOM.onRender(function(t){a.mounted||a.mount(t.element)}),a}return __extends(n,i),n.prototype.onShow=function(t){this.handlers._onshow||(this.handlers._onshow=[]),this.handlers._onshow.push(t)},n.prototype.onHide=function(t){this.handlers._onhide||(this.handlers._onhide=[]),this.handlers._onhide.push(t)},n.prototype.onClose=function(t){this.handlers._onclose||(this.handlers._onclose=[]),this.handlers._onclose.push(t)},Object.defineProperty(n.prototype,"header",{get:function(){var t=this
return this.cntHeader?this.cntHeader:(this.cntHeader=new e("","modal-header",this.headerStyle),this.btnCloseHeader=new h(this.subId("bhc"),'<span aria-hidden="true" tabIndex="-1">&times;</span><span class="sr-only">Close</span>',void 0,"close",{op:.6}),this.btnCloseHeader.on("click",function(e){t.close()}),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"body",{get:function(){return this.cntBody?this.cntBody:(this.cntBody=new e("",t.cls(this._classStyle)),this.cntBody)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"container",{get:function(){if(this.cntRoot)return this.cntRoot
var i="",n={}
return this.width&&(n.w=this.width),this.height&&(n.h=this.height),this.background&&(n.bg=this.background),this.color&&(n.c=this.color),"top"==this.position?this.gap?(n.ml=t.WUtil.getNumber(t.global.window_top,"ml")+this.gap,i=t.css(t.global.window_top,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)",t:this.gap},this._style,n)):i=t.css(t.global.window_top,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)"},this._style,n):this.gap?(n.ml=t.WUtil.getNumber(t.global.window_bottom,"ml")+this.gap,i=t.css(t.global.window_bottom,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)",bt:this.gap},this._style,n)):i=t.css(t.global.window_bottom,{d:"none",b:"rgba(0,0,0,0)",bs:"0 1px 3px rgba(0, 0, 0, 0.6)"},this._style,n),this.cntRoot=new e(this.id,this._classStyle,i,this._attributes),this.cntRoot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!1,configurable:!0}),n.prototype.show=function(t){if(this.beforeShow()&&(this.parent=t,this.mounted||WuxDOM.mount(this),this.root&&this.root.length&&(this.isShown=!0,this.isClosed=!1,this.root.show()),this.handlers._onshow))for(var e=0,i=this.handlers._onshow;e<i.length;e++){var n=i[e]
n(this.createEvent("_onshow"))}},n.prototype.hide=function(){if(this.isShown=!1,this.root&&this.root.length&&this.root.hide(),this.handlers._onhide)for(var t=0,e=this.handlers._onhide;t<e.length;t++){var i=e[t]
i(this.createEvent("_onhide"))}},n.prototype.close=function(){if(this.isClosed=!0,this.handlers._onclose)for(var t=0,e=this.handlers._onclose;t<e.length;t++){var i=e[t]
i(this.createEvent("_onclose"))}this.hide()},n.prototype.scroll=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=4),!e||!this.root)return 0
var o=e instanceof t.WComponent?e.getRoot():e
if("top"==this.position){var r=$(document).scrollTop(),s=o.offset().top,a=s-r-2,l=this.root.height()
if(i&&l<i&&(l=i),a<l){var h=a-l
return r<h?$(document).scrollTop(0):$(document).scrollTop(r-h),h}}else{var r=$(document).scrollTop(),s=o.offset().top
if(!s){var u=o.position()
u&&(s=u.top)}var d=o.height()
d||(d=18)
var p=s+d,c=p-r+2,f=$(window).height(),l=this.root.height()
i&&l<i&&(l=i)
var g=f-l
if(c>g){var h=c-g+n
return $(document).scrollTop(r+h),h}}return 0},n.prototype.scrollY=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=4),"top"==this.position){var n=$(document).scrollTop(),o=t-2,r=this.root.height()
if(e&&r<e&&(r=e),o<r){var s=o-r
return n<s?$(document).scrollTop(0):$(document).scrollTop(n-s),s}}else{var n=$(document).scrollTop(),a=t+i/2+2,l=$(window).height(),r=this.root.height()
e&&r<e&&(r=e)
var h=l-r
if(a>h){var s=a-h+i
return $(document).scrollTop(n+s),s}}return 0},n.prototype.beforeShow=function(){return!0},n.prototype.onShown=function(){},n.prototype.onHidden=function(){},n.prototype.render=function(){return this.isShown=!1,this.isClosed=!1,this.cntHeader&&this.container.addContainer(this.cntHeader),this.cntBody&&this.container.addContainer(this.cntBody),this.cntRoot},n.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntRoot&&this.cntRoot.unmount()},n.prototype.buildTitle=function(e){if(null==e)return""
if(this.tagTitle||(this.tagTitle="h3"),this.titleStyle){var i=t.style(this.titleStyle)
if(i)return"<"+this.tagTitle+' style="'+i+'">'+t.WUtil.toText(e)+"</"+this.tagTitle+">"}return"<"+this.tagTitle+">"+t.WUtil.toText(e)+"</"+this.tagTitle+">"},n.DEF_HEADER_STYLE={p:5,a:"center"},n}(t.WComponent)
t.WWindow=y}(WUX||(WUX={}))
var WUX
!function(t){var e=function(e){function i(i,n,o,r,s,a,l){var h=e.call(this,i,"WDXTable",l,r,s,a)||this
if(h.header=n,h.keys=[],o)for(var u=0,d=o;u<d.length;u++){var p=d[u]
h.keys.push(t.WUtil.toString(p))}else if(h.header)for(var c=0;c<h.header.length;c++)h.keys.push(c.toString())
return h.types=[],h.widths=[],h.templates=[],h.selectionMode="single",h.filter=!1,h.keepSorting=!1,h.scrolling="virtual",h.pageSize=100,h.paging=!1,h.actions=[],h.groups=[],h.groupsCols=[],h._editable=!1,h.editables=[],h.editmap={},h.hiddenCols=[],h}return __extends(i,e),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){if(this._editable=t,this.mounted){var e={editing:{mode:"cell",allowUpdating:!0}}
this.root.dxDataGrid(e)}},enumerable:!1,configurable:!0}),i.prototype.setCellEditable=function(t,e,i){return this.editmap[t+"_"+e]=i,this.mounted,this},i.prototype.addHidden=function(t){return this.hiddenCols.push(t),this},i.prototype.refresh=function(){return this.mounted?(this.root.dxDataGrid("instance").refresh(),this):this},i.prototype.refreshAndEdit=function(t,e,i){if(void 0===i&&(i=50),!this.mounted)return this
var n=this.root.dxDataGrid("instance")
return null==t||null==e||""==e||-1==e?n.refresh():n.refresh().done([function(){setTimeout(function(){e&&n.editCell(t,e)},i)}]),this},i.prototype.repaintAndEdit=function(t,e,i){if(void 0===i&&(i=50),!this.mounted)return this
var n=this.root.dxDataGrid("instance")
return null==t||null==e||""==e||-1==e?n.repaint():(n.repaintRows([t]),null!=e&&setTimeout(function(){e&&n.editCell(t,e)},i)),this},i.prototype.repaint=function(){var t=this
return this.mounted?(this.root.dxDataGrid("instance").repaint(),this.handlers._selectall&&"multiple"==this.selectionMode&&setTimeout(function(){var e=$(".dx-header-row .dx-checkbox").first()
if(e&&e.length&&(!t.$cbSelAll||!t.$cbSelAll.is(e))){t.$cbSelAll=e
var i=t.$cbSelAll.dxCheckBox("instance").option("value")
t.$cbSelAll.on("click",function(e){e.data=i
for(var n=0,o=t.handlers._selectall;n<o.length;n++){(0,o[n])(e)}})}},500),this):this},i.prototype.closeEditCell=function(){return this.mounted?(this.root.dxDataGrid("instance").closeEditCell(),this):this},i.prototype.repaintRows=function(t){return this.mounted?(this.root.dxDataGrid("instance").repaintRows(t),this):this},i.prototype.repaintRowByKey=function(t){if(!this.mounted||!t)return this
var e=this.root.dxDataGrid("instance"),i=e.getRowIndexByKey(t)
return i<0?this:(e.repaintRows([i]),this)},i.prototype.addActions=function(t,e){return e?(t||(t=""),e.key=t,this.actions.push(e),this):this},i.prototype.addGroupBefore=function(t,e){t||(t=""),this.groups.push(t)
var i=this.keys.length
if(null!=e)if("number"!=typeof e){var n=this.keys.indexOf(e)
n>0&&(i=n)}else i=e
for(var o=[],r=0;r<i;r++)o.push(r)
this.groupsCols.push(o)},i.prototype.addGroupAfter=function(t,e){t||(t=""),this.groups.push(t)
var i=0,n=this.keys.length
if(null!=e)if("number"!=typeof e){var o=this.keys.indexOf(e)
o>=0&&(i=o+1)}else i=e+1
for(var r=[],s=i;s<n;s++)r.push(s)
this.groupsCols.push(r)},i.prototype.addGroup=function(t,e){if(e&&e.length){t||(t=""),this.groups.push(t)
if("number"!=typeof e[0]){for(var i=[],n=0;n<e.length;n++){var o=this.keys.indexOf(e[n])
o>=0&&i.push(o)}this.groupsCols.push(i)}else this.groupsCols.push(e)}},i.prototype.onClickAction=function(t){this.handlers._clickaction||(this.handlers._clickaction=[]),this.handlers._clickaction.push(t)},i.prototype.onSelectionChanged=function(t){if(this.handlers._selectionchanged=[t],this.mounted){var e={onSelectionChanged:t}
this.root.dxDataGrid(e)}},i.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},i.prototype.onSelectAll=function(t){this.handlers._selectall||(this.handlers._selectall=[]),this.handlers._selectall.push(t)},i.prototype.onDoneRefresh=function(t){this.handlers._donerefresh||(this.handlers._donerefresh=[]),this.handlers._donerefresh.push(t)},i.prototype.onRowPrepared=function(t){if(this.handlers._rowprepared=[t],this.mounted){var e={onRowPrepared:t}
this.root.dxDataGrid(e)}},i.prototype.onCellPrepared=function(t){if(this.handlers._cellprepared=[t],this.mounted){var e={onCellPrepared:t}
this.root.dxDataGrid(e)}},i.prototype.onContentReady=function(t){if(this.handlers._contentready=[t],this.mounted){var e={onContentReady:t}
this.root.dxDataGrid(e)}},i.prototype.onRowUpdated=function(t){if(this.handlers._rowupdated=[t],this.mounted){var e={onRowUpdated:t}
this.root.dxDataGrid(e)}},i.prototype.onEditorPreparing=function(t){if(this.handlers._editorpreparing=[t],this.mounted){var e={onEditorPreparing:t}
this.root.dxDataGrid(e)}},i.prototype.onEditorPrepared=function(t){if(this.handlers._editorprepared=[t],this.mounted){var e={onEditorPrepared:t}
this.root.dxDataGrid(e)}},i.prototype.onEditingStart=function(t){if(this.handlers._editingstart=[t],this.mounted){var e={onEditingStart:t}
this.root.dxDataGrid(e)}},i.prototype.onCellClick=function(t){if(this.handlers._cellclick=[t],this.mounted){var e={onCellClick:t}
this.root.dxDataGrid(e)}},i.prototype.onScroll=function(t){this.handlers._scroll=[t],this.mounted&&this.root.dxDataGrid("instance").getScrollable().on("scroll",t)},i.prototype.onKeyDown=function(t){if(this.handlers._keydown=[t],this.mounted){var e={onKeyDown:t}
this.root.dxDataGrid(e)}},i.prototype.onToolbarPreparing=function(t){if(this.handlers._toolbarpreparing=[t],this.mounted){var e={onToolbarPreparing:t}
this.root.dxDataGrid(e)}},i.prototype.scrollTo=function(t){this.mounted&&this.root.dxDataGrid("instance").getScrollable().scrollTo(t)},i.prototype.scrollToRow=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=0),this.mounted&&this.state){var n=this.state.length
if(!(n<2)){var o=this.root.dxDataGrid("instance").getScrollable()
if(o){var r=o.scrollHeight()
if(r){t-=e,t<0&&(t=0)
var s=t*(r/n)
i?setTimeout(function(){o.scrollTo({top:s,left:0})},i):o.scrollTo({top:s,left:0})}}}}},i.prototype.clearFilter=function(){this.mounted&&this.state&&this.root.dxDataGrid("instance").clearFilter()},i.prototype.off=function(t){if(e.prototype.off.call(this,t),!t)return this
var i={}
return t.indexOf("_selectionchanged")>=0&&(i.onSelectionChanged=null),t.indexOf("_rowprepared")>=0&&(i.onRowPrepared=null),t.indexOf("_cellprepared")>=0&&(i.onCellPrepared=null),t.indexOf("_contentready")>=0&&(i.onContentReady=null),t.indexOf("_rowupdated")>=0&&(i.onRowUpdated=null),t.indexOf("_editorprepared")>=0&&(i.onEditorPrepared=null),t.indexOf("_editorpreparing")>=0&&(i.onEditorPreparing=null),t.indexOf("_editingstart")>=0&&(i.onEditingStart=null),t.indexOf("_cellclick")>=0&&(i.onCellClick=null),t.indexOf("_keydown")>=0&&(i.onKeyDown=null),t.indexOf("_toolbarpreparing")>=0&&(i.onToolbarPreparing=null),this.root.dxDataGrid(i),this},i.prototype.clearSelection=function(){return this.mounted&&this.state?(this.root.dxDataGrid("instance").clearSelection(),this):this},i.prototype.deselectAll=function(){return this.mounted?(this.root.dxDataGrid("instance").deselectAll(),this):this},i.prototype.select=function(t){return this.mounted?(this.root.dxDataGrid("instance").selectRowsByIndexes(t),this):this},i.prototype.selectRows=function(t,e){return this.mounted?(this.root.dxDataGrid("instance").selectRows(t,e),this):this},i.prototype.deselectRows=function(t){return this.mounted?(this.root.dxDataGrid("instance").deselectRows(t),this):this},i.prototype.selectAll=function(e){if(!this.mounted)return this
if(e){var i=t.WUtil.size(this.getSelectedRows()),n=t.WUtil.size(this.state)
i&&i==n?this.root.dxDataGrid("instance").clearSelection():this.root.dxDataGrid("instance").selectAll()}else this.root.dxDataGrid("instance").selectAll()
return this},i.prototype.setSelectionMode=function(t){if(this.selectionMode=t,!this.mounted)return this
var e={}
return this.selectionFilter&&this.selectionFilter.length?e.selection={mode:this.selectionMode,deferred:!0}:e.selection={mode:this.selectionMode},this.root.dxDataGrid(e),this},i.prototype.setColVisible=function(t,e){return this.root.dxDataGrid("columnOption",t,"visible",e),this},i.prototype.edit=function(t,e,i){var n=this
return void 0===i&&(i=200),this.mounted?(setTimeout(function(){n.root.dxDataGrid("instance").editCell(t,e)},i),this):this},i.prototype.getFilter=function(e){if(!this.mounted)return""
for(var i=this.root.dxDataGrid("instance").getCombinedFilter(!0),n=t.WUtil.size(i),o=0;o<n;o++){var r=i[o]
if(Array.isArray(r)){if(r.length>2){if(e!=r[0])continue
return""+r[1]+r[2]}}else if("string"==typeof r&&e==r&&n>2)return""+i[1]+i[2]}return""},i.prototype.getInstance=function(t){return this.mounted?(t&&this.root.dxDataGrid(t),this.root.dxDataGrid("instance")):null},i.prototype.getSelectedKeys=function(){return this.mounted?this.root.dxDataGrid("instance").getSelectedRowKeys():[]},i.prototype.getSelectedRows=function(){if(!this.mounted)return[]
var t=this.root.dxDataGrid("instance"),e=t.getSelectedRowKeys()
if(!e||!e.length)return[]
for(var i=[],n=0,o=e;n<o.length;n++){var r=o[n],s=t.getRowIndexByKey(r)
s<0||i.push(s)}return i},i.prototype.isSelected=function(t){return!!this.mounted&&this.root.dxDataGrid("instance").isRowSelected(t)},i.prototype.getSelectedRowsData=function(){return this.mounted?this.root.dxDataGrid("instance").getSelectedRowsData():[]},i.prototype.getFilteredRowsData=function(){if(!this.root)return this.state
var t=this.root.dxDataGrid("instance"),e=t.getDataSource()
if(!e)return this.state
var i=e.items()
return i&&i.length?i:this.state},i.prototype.cellValue=function(t,e,i){if(!this.root)return null
var n=this.root.dxDataGrid("instance")
if(void 0===i)return n.cellValue(t,e)
n.cellValue(t,e,i)},i.prototype.saveEditData=function(t){var e=this.root.dxDataGrid("instance")
return null!=t?e.saveEditData().done([function(){setTimeout(function(){e.repaintRows([t])},0)}]):e.saveEditData(),this},i.prototype.count=function(){return this.state?this.state.length:0},i.prototype.beforeInit=function(t){},i.prototype.componentDidMount=function(){var e=this
this.header||(this.header=[])
var i,n=this
i="object"==typeof this.props?this.props:{showColumnLines:!0,showRowLines:!0,showBorders:!0,allowColumnResizing:!0,columnAutoWidth:!0,rowAlternationEnabled:!1},this._editable&&(i.editing={mode:"cell",allowUpdating:!0}),this.hideHeader&&(i.showColumnHeaders=!1),this.editmap={}
var o=[]
if(this.groups&&this.groups.length)for(var r=0;r<this.groups.length;r++){for(var s=this.groups[r],a=this.groupsCols[r],l={caption:s},h=[],u=0;u<a.length;u++){var d=a[u],p=void 0
if(this.keys&&this.keys.length){var c=this.keys[d]
if(this.hiddenCols.indexOf(c)>=0)continue
p={caption:this.header[d],dataField:c}}else{var c=d.toString()
if(this.hiddenCols.indexOf(c)>=0)continue
p={caption:this.header[d],dataField:d.toString()}}var f=this.widths&&this.widths.length>d?this.widths[d]:0
f&&(f<0?p.allowSorting=!1:(p.width=this.widthsPerc?f+"%":f,0==d&&(p.fixed=!0)))
var g=this.filterOps&&this.filterOps.length>d?this.filterOps[d]:void 0
g&&("-"==g?p.allowFiltering=!1:p.selectedFilterOperation=g)
var y=this.templates&&this.templates.length>d?this.templates[d]:void 0
y&&(p.cellTemplate=y),p.allowEditing=!!(this.editables&&this.editables.length>d)&&this.editables[d]
var b=t.WUtil.getItem(this.types,d)
switch(b){case"s":p.dataType="string"
break
case"w":p.dataType="string",p.alignment="center"
break
case"c":p.dataType="number",p.format={type:"currency",precision:2}
break
case"c5":p.dataType="number",p.format={type:"currency",precision:5}
break
case"i":p.dataType="number",p.format={precision:0}
break
case"n":p.dataType="number",p.format={precision:2}
break
case"d":p.dataType="date",p.format="dd/MM/yyyy"
break
case"t":p.dataType="date",p.format="dd/MM/yyyy HH:mm:ss"
break
case"b":p.dataType="boolean"}h.push(p)}if("-"!=s&&h.length)l.columns=h,o.push(l)
else for(var m=0,v=h;m<v.length;m++){var p=v[m]
o.push(p)}}else for(var d=0;d<this.header.length;d++){var l=void 0
if(this.keys&&this.keys.length){var c=this.keys[d]
if(this.hiddenCols.indexOf(c)>=0)continue
l={caption:this.header[d],dataField:c}}else{var c=d.toString()
if(this.hiddenCols.indexOf(c)>=0)continue
l={caption:this.header[d],dataField:c}}var f=this.widths&&this.widths.length>d?this.widths[d]:0
f&&(f<0?l.allowSorting=!1:(l.width=this.widthsPerc?f+"%":f,0==d&&(l.fixed=!0)))
var g=this.filterOps&&this.filterOps.length>d?this.filterOps[d]:void 0
g&&("-"==g?l.allowFiltering=!1:l.selectedFilterOperation=g)
var y=this.templates&&this.templates.length>d?this.templates[d]:void 0
y&&(l.cellTemplate=y),l.allowEditing=!!(this.editables&&this.editables.length>d)&&this.editables[d]
var b=t.WUtil.getItem(this.types,d)
switch(b){case"s":l.dataType="string"
break
case"w":l.dataType="string",l.alignment="center"
break
case"c":l.dataType="number",l.format={type:"currency",precision:2}
break
case"c5":l.dataType="number",l.format={type:"currency",precision:5}
break
case"i":l.dataType="number",l.format={precision:0}
break
case"n":l.dataType="number",l.format={precision:2}
break
case"d":l.dataType="date",l.format="dd/MM/yyyy"
break
case"t":l.dataType="date",l.format="dd/MM/yyyy HH:mm:ss"
break
case"b":l.dataType="boolean"}o.push(l)}if(this.actions&&this.actions.length){this.actionsTitle||(this.actionsTitle="")
var _=this.actionWidth?this.actionWidth:"auto"
o.push({caption:this.actionsTitle,width:_,alignment:"center",allowFiltering:!1,allowReordering:!1,allowResizing:!1,allowSorting:!1,allowEditing:!1,cellTemplate:function(e,i){n.actionsStyle?t.setCss(e,n.actionsStyle):e.addClass("actions")
for(var o=0;o<n.actions.length;o++){var r=n.actions[o]
if(r.build)r.build(e,i.row.data)
else{var s=void 0
r.key&&(s=t.WUtil.getValue(i.row.data,r.key)),s||(s="_"+i.row.rowIndex)
var a=t.style(r.labelCss)
a=a?' style="'+a+'"':""
var l=$('<a id="'+r.id+"-"+s+'" class="'+r.classStyle+'"'+a+">"+t.buildIcon(r.icon,"","",0,t.cls(r.style),r.label)+"</a>")
e.append(l),l.on("click",function(t){if(n.handlers._clickaction)for(var e=0,i=n.handlers._clickaction;e<i.length;e++){var o=i[e]
o(t)}})}}}})}i.columns=o,this.dataSource?i.dataSource=this.dataSource:i.dataSource=this.state,i.filterRow={visible:this.filter},i.paging={enabled:this.paging,pageSize:this.pageSize},this.paging?i.pager={showPageSizeSelector:!1,allowedPageSizes:[this.pageSize],showInfo:!0}:i.scrolling={mode:this.scrolling},i.onRowClick=function(t){var i=t.component.lastClick,n=t.component.lastClick=new Date
if(i&&n.getTime()-i.getTime()<300){if(!e.handlers._doubleclick)return
for(var o=0,r=e.handlers._doubleclick;o<r.length;o++){(0,r[o])({element:e.root,data:t.data})}}},this.selectionMode&&"none"!=this.selectionMode&&(this.selectionFilter&&this.selectionFilter.length?i.selection={mode:this.selectionMode,deferred:!0}:i.selection={mode:this.selectionMode}),this.selectionFilter&&this.selectionFilter.length&&(i.selectionFilter=this.selectionFilter),this.exportFile&&(i.export={enabled:!0,fileName:this.exportFile}),this.handlers._selectionchanged&&this.handlers._selectionchanged.length&&(i.onSelectionChanged=this.handlers._selectionchanged[0]),this.handlers._rowprepared&&this.handlers._rowprepared.length&&(i.onRowPrepared=this.handlers._rowprepared[0]),this.handlers._cellprepared&&this.handlers._cellprepared.length&&(i.onCellPrepared=this.handlers._cellprepared[0]),this.handlers._contentready&&this.handlers._contentready.length&&(i.onContentReady=this.handlers._contentready[0]),this.handlers._rowupdated&&this.handlers._rowupdated.length&&(i.onRowUpdated=this.handlers._rowupdated[0]),this.handlers._cellclick&&this.handlers._cellclick.length&&(i.onCellClick=this.handlers._cellclick[0]),this.handlers._editorprepared&&this.handlers._editorprepared.length&&(i.onEditorPrepared=this.handlers._editorprepared[0]),this.handlers._editorpreparing&&this.handlers._editorpreparing.length&&(i.onEditorPreparing=this.handlers._editorpreparing[0]),this.handlers._editingstart&&this.handlers._editingstart.length&&(i.onEditingStart=this.handlers._editingstart[0]),this.handlers._keydown&&this.handlers._keydown.length&&(i.onKeyDown=this.handlers._keydown[0]),this.handlers._toolbarpreparing&&this.handlers._toolbarpreparing.length&&(i.onToolbarPreparing=this.handlers._toolbarpreparing[0]),this.beforeInit(i),this.root.dxDataGrid(i),this.handlers._scroll&&this.handlers._scroll.length&&this.root.dxDataGrid("instance").getScrollable().on("scroll",this.handlers._scroll[0])},i.prototype.componentWillUpdate=function(t,e){var i=this
e||(e=[]),this.editmap={}
var n
if(this.storeKey){n={dataSource:new DevExpress.data.DataSource(new DevExpress.data.ArrayStore({data:e,key:this.storeKey}))}}else n={dataSource:e}
n.paging={enabled:this.paging,pageSize:this.pageSize},this.paging&&(n.pager={showPageSizeSelector:!1,allowedPageSizes:[this.pageSize],showInfo:!0}),this.keepSorting||this.root.dxDataGrid("instance").clearSorting(),this.selectionFilter&&this.selectionFilter.length||this.root.dxDataGrid("instance").clearSelection(),this.root.dxDataGrid(n),this.root.dxDataGrid("instance").refresh().done(function(){if(i.handlers._donerefresh)for(var t=0,e=i.handlers._donerefresh;t<e.length;t++){var n=e[t]
n(i.createEvent("_donerefresh"))}if(i.handlers._selectall&&"multiple"==i.selectionMode){var o=$(".dx-header-row .dx-checkbox").first()
if(o&&o.length&&(!i.$cbSelAll||!i.$cbSelAll.is(o))){i.$cbSelAll=o
var r=i.$cbSelAll.dxCheckBox("instance").option("value")
i.$cbSelAll.on("click",function(t){t.data=r
for(var e=0,n=i.handlers._selectall;e<n.length;e++){(0,n[e])(t)}})}}}),this.root.find(".dx-loadpanel-content").hide()},i}(t.WComponent)
t.WDXTable=e
var i=function(e){function i(i,n,o,r,s,a,l){var h=e.call(this,i,"WDXTreeList",l,r,s,a)||this
if(h.header=n,h.keys=[],o)for(var u=0,d=o;u<d.length;u++){var p=d[u]
h.keys.push(t.WUtil.toString(p))}else if(h.header)for(var c=0;c<h.header.length;c++)h.keys.push(c.toString())
return h.types=[],h.widths=[],h.templates=[],h.selectionMode="single",h.filter=!1,h.keepSorting=!1,h.scrolling="virtual",h.autoExpandAll=!0,h.actions=[],h.groups=[],h.groupsCols=[],h.actions_1=[],h.actions_2=[],h._editable=!1,h.editables=[],h.editmap={},h.hiddenCols=[],h}return __extends(i,e),Object.defineProperty(i.prototype,"editable",{get:function(){return this._editable},set:function(t){if(this._editable=t,this.mounted){var e={editing:{mode:"cell",allowUpdating:!0}}
this.root.dxTreeList(e)}},enumerable:!1,configurable:!0}),i.prototype.setCellEditable=function(t,e,i){return this.editmap[t+"_"+e]=i,this.mounted,this},i.prototype.addHidden=function(t){return this.hiddenCols.push(t),this},i.prototype.refresh=function(){return this.mounted?(this.root.dxTreeList("instance").refresh(),this):this},i.prototype.refreshAndEdit=function(t,e,i){if(void 0===i&&(i=50),!this.mounted)return this
var n=this.root.dxTreeList("instance")
return null==t||null==e||""==e||-1==e?n.refresh():n.refresh().done([function(){setTimeout(function(){e&&n.editCell(t,e)},i)}]),this},i.prototype.repaintAndEdit=function(t,e,i){if(void 0===i&&(i=50),!this.mounted)return this
var n=this.root.dxTreeList("instance")
return null==t||null==e||""==e||-1==e?n.repaint():(n.repaintRows([t]),null!=e&&setTimeout(function(){n.editCell(t,e)},i)),this},i.prototype.closeEditCell=function(){return this.mounted?(this.root.dxTreeList("instance").closeEditCell(),this):this},i.prototype.repaintRows=function(t){return this.mounted?(this.root.dxTreeList("instance").repaintRows(t),this):this},i.prototype.addActions=function(t,e){return e?(t||(t=""),e.key=t,this.actions.push(e),this):this},i.prototype.addActionsLevel1=function(t,e,i){return e?(t||(t=""),e.key=t,this.actions_1.push(e),this.keyLev1=i,this):this},i.prototype.addActionsLevel2=function(t,e,i){return e?(t||(t=""),e.key=t,this.actions_2.push(e),this.keyLev2=i,this):this},i.prototype.addGroupBefore=function(t,e){t||(t=""),this.groups.push(t)
var i=this.keys.length
if(null!=e)if("number"!=typeof e){var n=this.keys.indexOf(e)
n>0&&(i=n)}else i=e
for(var o=[],r=0;r<i;r++)o.push(r)
this.groupsCols.push(o)},i.prototype.addGroupAfter=function(t,e){t||(t=""),this.groups.push(t)
var i=0,n=this.keys.length
if(null!=e)if("number"!=typeof e){var o=this.keys.indexOf(e)
o>=0&&(i=o+1)}else i=e+1
for(var r=[],s=i;s<n;s++)r.push(s)
this.groupsCols.push(r)},i.prototype.addGroup=function(t,e){if(e&&e.length){t||(t=""),this.groups.push(t)
if("number"!=typeof e[0]){for(var i=[],n=0;n<e.length;n++){var o=this.keys.indexOf(e[n])
o>=0&&i.push(o)}this.groupsCols.push(i)}else this.groupsCols.push(e)}},i.prototype.onClickAction=function(t){this.handlers._clickaction||(this.handlers._clickaction=[]),this.handlers._clickaction.push(t)},i.prototype.onSelectionChanged=function(t){if(this.handlers._selectionchanged=[t],this.mounted){var e={onSelectionChanged:t}
this.root.dxTreeList(e)}},i.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},i.prototype.onRowPrepared=function(t){if(this.handlers._rowprepared=[t],this.mounted){var e={onRowPrepared:t}
this.root.dxTreeList(e)}},i.prototype.onCellPrepared=function(t){if(this.handlers._cellprepared=[t],this.mounted){var e={onCellPrepared:t}
this.root.dxTreeList(e)}},i.prototype.onContentReady=function(t){if(this.handlers._contentready=[t],this.mounted){var e={onContentReady:t}
this.root.dxTreeList(e)}},i.prototype.onRowUpdated=function(t){if(this.handlers._rowupdated=[t],this.mounted){var e={onRowUpdated:t}
this.root.dxTreeList(e)}},i.prototype.onEditorPreparing=function(t){if(this.handlers._editorpreparing=[t],this.mounted){var e={onEditorPreparing:t}
this.root.dxTreeList(e)}},i.prototype.onEditorPrepared=function(t){if(this.handlers._editorprepared=[t],this.mounted){var e={onEditorPrepared:t}
this.root.dxTreeList(e)}},i.prototype.onEditingStart=function(t){if(this.handlers._editingstart=[t],this.mounted){var e={onEditingStart:t}
this.root.dxTreeList(e)}},i.prototype.onCellClick=function(t){if(this.handlers._cellclick=[t],this.mounted){var e={onCellClick:t}
this.root.dxTreeList(e)}},i.prototype.onScroll=function(t){if(this.handlers._scroll=[t],this.mounted){var e=this.root.dxTreeList("instance")
e&&e.getScrollable().on("scroll",t)}},i.prototype.onKeyDown=function(t){if(this.handlers._keydown=[t],this.mounted){var e={onKeyDown:t}
this.root.dxTreeList(e)}},i.prototype.onToolbarPreparing=function(t){if(this.handlers._toolbarpreparing=[t],this.mounted){var e={onToolbarPreparing:t}
this.root.dxTreeList(e)}},i.prototype.scrollTo=function(t){this.mounted&&this.root.dxTreeList("instance").getScrollable().scrollTo(t)},i.prototype.clearFilter=function(){this.mounted&&this.state&&this.root.dxTreeList("instance").clearFilter()},i.prototype.off=function(t){if(e.prototype.off.call(this,t),!t)return this
var i={}
return t.indexOf("_selectionchanged")>=0&&(i.onSelectionChanged=null),t.indexOf("_rowprepared")>=0&&(i.onRowPrepared=null),t.indexOf("_cellprepared")>=0&&(i.onCellPrepared=null),t.indexOf("_contentready")>=0&&(i.onContentReady=null),t.indexOf("_rowupdated")>=0&&(i.onRowUpdated=null),t.indexOf("_editorprepared")>=0&&(i.onEditorPrepared=null),t.indexOf("_editorpreparing")>=0&&(i.onEditorPreparing=null),t.indexOf("_editingstart")>=0&&(i.onEditingStart=null),t.indexOf("_cellclick")>=0&&(i.onCellClick=null),t.indexOf("_keydown")>=0&&(i.onKeyDown=null),t.indexOf("_toolbarpreparing")>=0&&(i.onToolbarPreparing=null),this.root.dxTreeList(i),this},i.prototype.clearSelection=function(){return this.mounted&&this.state?(this.root.dxTreeList("instance").clearSelection(),this):this},i.prototype.deselectAll=function(){return this.mounted?(this.root.dxTreeList("instance").deselectAll(),this):this},i.prototype.select=function(t){return this.mounted?(this.root.dxTreeList("instance").selectRowsByIndexes(t),this):this},i.prototype.selectAll=function(e){if(!this.mounted)return this
if(e){var i=t.WUtil.size(this.getSelectedRows()),n=t.WUtil.size(this.state)
i&&i==n?this.root.dxTreeList("instance").clearSelection():this.root.dxTreeList("instance").selectAll()}else this.root.dxTreeList("instance").selectAll()
return this},i.prototype.setSelectionMode=function(t){if(this.selectionMode=t,!this.mounted)return this
var e={}
return e.selection={mode:this.selectionMode},this.root.dxTreeList(e),this},i.prototype.setColVisible=function(t,e){return this.root.dxTreeList("columnOption",t,"visible",e),this},i.prototype.edit=function(t,e,i){var n=this
return void 0===i&&(i=200),this.mounted?(setTimeout(function(){n.root.dxTreeList("instance").editCell(t,e)},i),this):this},i.prototype.getFilter=function(e){if(!this.mounted)return""
for(var i=this.root.dxTreeList("instance").getCombinedFilter(!0),n=t.WUtil.size(i),o=0;o<n;o++){var r=i[o]
if(Array.isArray(r)){if(r.length>2){if(e!=r[0])continue
return""+r[1]+r[2]}}else if("string"==typeof r&&e==r&&n>2)return""+i[1]+i[2]}return""},i.prototype.getInstance=function(t){return this.mounted?(t&&this.root.dxTreeList(t),this.root.dxTreeList("instance")):null},i.prototype.getSelectedRows=function(){if(!this.mounted)return[]
var t=this.root.dxTreeList("instance"),e=t.getSelectedRowKeys()
if(!e||!e.length)return[]
for(var i=[],n=0,o=e;n<o.length;n++){var r=o[n],s=t.getRowIndexByKey(r)
s<0||i.push(s)}return i},i.prototype.getSelectedRowsData=function(){return this.mounted?this.root.dxTreeList("instance").getSelectedRowsData():[]},i.prototype.getFilteredRowsData=function(){if(!this.root)return this.state
var t=this.root.dxTreeList("instance"),e=t.getDataSource()
if(!e){for(var i=[],n=0,o=this.state;n<o.length;n++){var r=o[n]
i.push({data:r})}return i}var s=e.items()
if(!s||!s.length){for(var i=[],a=0,l=this.state;a<l.length;a++){var r=l[a]
i.push({data:r})}return i}return s},i.prototype.cellValue=function(t,e,i){if(!this.root)return null
var n=this.root.dxTreeList("instance")
if(void 0===i)return n.cellValue(t,e)
n.cellValue(t,e,i)},i.prototype.saveEditData=function(t){var e=this.root.dxTreeList("instance")
return null!=t?e.saveEditData().done([function(){setTimeout(function(){e.repaintRows([t])},0)}]):e.saveEditData(),this},i.prototype.count=function(){return this.state?this.state.length:0},i.prototype.beforeInit=function(t){},i.prototype.componentDidMount=function(){var e=this
this.header||(this.header=[])
var i,n=this
i="object"==typeof this.props?this.props:{showColumnLines:!0,showRowLines:!0,showBorders:!0,allowColumnResizing:!0,columnAutoWidth:!0,rowAlternationEnabled:!1},this.hideHeader&&(i.showColumnHeaders=!1),i.keyExpr=this.keyExpr,i.parentIdExpr=this.parentIdExpr,i.autoExpandAll=this.autoExpandAll,this._editable&&(i.editing={mode:"cell",allowUpdating:!0}),this.editmap={}
var o=[]
if(this.groups&&this.groups.length)for(var r=0;r<this.groups.length;r++){for(var s=this.groups[r],a=this.groupsCols[r],l={caption:s},h=[],u=0;u<a.length;u++){var d=a[u],p=void 0
if(this.keys&&this.keys.length){var c=this.keys[d]
if(this.hiddenCols.indexOf(c)>=0)continue
p={caption:this.header[d],dataField:c}}else{var c=d.toString()
if(this.hiddenCols.indexOf(c)>=0)continue
p={caption:this.header[d],dataField:c}}var f=this.widths&&this.widths.length>d?this.widths[d]:0
f&&(f<0?p.allowSorting=!1:(p.width=this.widthsPerc?f+"%":f,0==d&&(p.fixed=!0)))
var g=this.filterOps&&this.filterOps.length>d?this.filterOps[d]:void 0
g&&("-"==g?p.allowFiltering=!1:p.selectedFilterOperation=g)
var y=this.templates&&this.templates.length>d?this.templates[d]:void 0
y&&(p.cellTemplate=y),p.allowEditing=!!(this.editables&&this.editables.length>d)&&this.editables[d]
var b=t.WUtil.getItem(this.types,d)
switch(b){case"s":p.dataType="string"
break
case"w":p.dataType="string",p.alignment="center"
break
case"c":p.dataType="number",p.format={type:"currency",precision:2}
break
case"c5":p.dataType="number",p.format={type:"currency",precision:5}
break
case"i":p.dataType="number",p.format={precision:0}
break
case"n":p.dataType="number",p.format={precision:2}
break
case"d":p.dataType="date",p.format="dd/MM/yyyy"
break
case"t":p.dataType="date",p.format="dd/MM/yyyy HH:mm:ss"
break
case"b":p.dataType="boolean"}h.push(p)}if("-"!=s&&h.length)l.columns=h,o.push(l)
else for(var m=0,v=h;m<v.length;m++){var p=v[m]
o.push(p)}}else for(var d=0;d<this.header.length;d++){var l=void 0
if(this.keys&&this.keys.length){var c=this.keys[d]
if(this.hiddenCols.indexOf(c)>=0)continue
l={caption:this.header[d],dataField:this.keys[d]}}else{var c=d.toString()
if(this.hiddenCols.indexOf(c)>=0)continue
l={caption:this.header[d],dataField:d.toString()}}var f=this.widths&&this.widths.length>d?this.widths[d]:0
f&&(f<0?l.allowSorting=!1:(l.width=this.widthsPerc?f+"%":f,0==d&&(l.fixed=!0)))
var g=this.filterOps&&this.filterOps.length>d?this.filterOps[d]:void 0
g&&("-"==g?l.allowFiltering=!1:l.selectedFilterOperation=g)
var y=this.templates&&this.templates.length>d?this.templates[d]:void 0
y&&(l.cellTemplate=y),l.allowEditing=!!(this.editables&&this.editables.length>d)&&this.editables[d]
var b=t.WUtil.getItem(this.types,d)
switch(b){case"s":l.dataType="string"
break
case"w":l.dataType="string",l.alignment="center"
break
case"c":l.dataType="number",l.format={type:"currency",precision:2}
break
case"c5":l.dataType="number",l.format={type:"currency",precision:5}
break
case"i":l.dataType="number",l.format={precision:0}
break
case"n":l.dataType="number",l.format={precision:2}
break
case"d":l.dataType="date",l.format="dd/MM/yyyy"
break
case"t":l.dataType="date",l.format="dd/MM/yyyy HH:mm:ss"
break
case"b":l.dataType="boolean"}o.push(l)}if(this.actions&&this.actions.length){this.actionsTitle||(this.actionsTitle="")
var _=this.actionWidth?this.actionWidth:"auto"
o.push({caption:this.actionsTitle,width:_,alignment:"center",allowFiltering:!1,allowReordering:!1,allowResizing:!1,allowSorting:!1,allowEditing:!1,cellTemplate:function(e,i){n.actionsStyle?t.setCss(e,n.actionsStyle):e.addClass("actions")
var o=n.actions,r=i.row.level
n.keyLev1&&i.data&&i.data[n.keyLev1]&&(r=1),n.keyLev2&&i.data&&i.data[n.keyLev2]&&(r=2),1==r?n.actions_1&&(o=n.actions_1):2==r&&n.actions_2&&(o=n.actions_2)
for(var s=0;s<o.length;s++){var a=o[s]
if(a.build)a.build(e,i.data)
else{var l=void 0
a.key&&(l=t.WUtil.getValue(i.row.key,a.key)),l||(l="_"+i.row.rowIndex)
var h=t.style(a.labelCss)
h=h?' style="'+h+'"':""
var u=$('<a id="'+a.id+"-"+l+'" class="'+a.classStyle+'"'+h+">"+t.buildIcon(a.icon,"","",0,t.cls(a.style),a.label)+"</a>")
e.append(u),u.on("click",function(t){if(n.handlers._clickaction)for(var e=0,i=n.handlers._clickaction;e<i.length;e++){var o=i[e]
o(t)}})}}}})}i.columns=o,this.dataSource?i.dataSource=this.dataSource:i.dataSource=this.state,i.scrolling={mode:this.scrolling},i.filterRow={visible:this.filter},i.onRowClick=function(t){var i=t.component.lastClick,n=t.component.lastClick=new Date
if(i&&n.getTime()-i.getTime()<300){if(!e.handlers._doubleclick)return
for(var o=0,r=e.handlers._doubleclick;o<r.length;o++){(0,r[o])({element:e.root,data:t.data})}}},this.selectionMode&&"none"!=this.selectionMode&&(i.selection={mode:this.selectionMode}),this.handlers._selectionchanged&&this.handlers._selectionchanged.length&&(i.onSelectionChanged=this.handlers._selectionchanged[0]),this.handlers._rowprepared&&this.handlers._rowprepared.length&&(i.onRowPrepared=this.handlers._rowprepared[0]),this.handlers._cellprepared&&this.handlers._cellprepared.length&&(i.onCellPrepared=this.handlers._cellprepared[0]),this.handlers._contentready&&this.handlers._contentready.length&&(i.onContentReady=this.handlers._contentready[0]),this.handlers._rowupdated&&this.handlers._rowupdated.length&&(i.onRowUpdated=this.handlers._rowupdated[0]),this.handlers._cellclick&&this.handlers._cellclick.length&&(i.onCellClick=this.handlers._cellclick[0]),this.handlers._editorprepared&&this.handlers._editorprepared.length&&(i.onEditorPrepared=this.handlers._editorprepared[0]),this.handlers._editorpreparing&&this.handlers._editorpreparing.length&&(i.onEditorPreparing=this.handlers._editorpreparing[0]),this.handlers._editingstart&&this.handlers._editingstart.length&&(i.onEditingStart=this.handlers._editingstart[0]),this.handlers._keydown&&this.handlers._keydown.length&&(i.onKeyDown=this.handlers._keydown[0]),this.handlers._toolbarpreparing&&this.handlers._toolbarpreparing.length&&(i.onToolbarPreparing=this.handlers._toolbarpreparing[0]),this.beforeInit(i),this.root.dxTreeList(i),this.handlers._scroll&&this.handlers._scroll.length&&this.root.dxTreeList("instance").getScrollable().on("scroll",this.handlers._scroll[0])},i.prototype.componentWillUpdate=function(t,e){e||(e=[]),this.editmap={}
var i={dataSource:e,autoExpandAll:this.autoExpandAll}
this.keepSorting||this.root.dxTreeList("instance").clearSorting(),this.root.dxTreeList("instance").clearSelection(),this.root.dxTreeList(i),this.root.find(".dx-loadpanel-content").hide()},i}(t.WComponent)
t.WDXTreeList=i
var n=function(e){function i(t,i,n,o,r){return e.call(this,t,"WDXFileUploader",r,i,n,o)||this}return __extends(i,e),i.prototype.onUploaded=function(t){this.handlers._onuploaded||(this.handlers._onuploaded=[]),this.handlers._onuploaded.push(t)},i.prototype.clear=function(){if(!this.mounted)return this
var t={value:[]}
return this.fileUploader.dxFileUploader(t),this},i.prototype.componentDidMount=function(){var e=this
this.widgetContainer=$('<div class="widget-container"></div>'),this.root.append(this.widgetContainer),this.fileUploader=$('<div id="'+this.subId("fu")+'"></div>'),this.widgetContainer.append(this.fileUploader),this.selectedFiles=$('<div class="content" id="'+this.subId("sf")+'"></div>'),this.widgetContainer.append(this.selectedFiles),this.showSelFiles&&this.selectedFiles.append("<hr>"),this.uploadURL||(this.uploadURL="upload")
var i={multiple:!0,accept:"*",value:[],uploadMode:"useButtons",uploadUrl:this.uploadURL,onUploaded:function(t){if(e.handlers._onuploaded)for(var i=0,n=e.handlers._onuploaded;i<n.length;i++){var o=n[i]
o(t)}},onValueChanged:function(i){if(e.showSelFiles){e.selectedFiles.find(".selected-item").remove()
for(var n=0,o=i.value;n<o.length;n++){var r=o[n],s=r.lastModifiedDate
s||(s=new Date(r.lastModified))
var a='<div class="selected-item">'
a+="<span>"+t.buildIcon(t.WIcon.FILE_O)+" &nbsp;<strong>"+t.RES.FILE_NAME+"</strong>: "+r.name+" &nbsp;",a+="<strong>"+t.RES.FILE_SIZE+"</strong>: "+r.size+" byte &nbsp;",a+="<strong>"+t.RES.FILE_TYPE+"</strong>: "+r.type+" &nbsp;",a+="<strong>"+t.RES.FILE_LMOD+"</strong>: "+t.formatDateTime(s,!0)+"</span>",a+="</div>",e.selectedFiles.append(a)}}}}
this.fileUploader.dxFileUploader(i)},i}(t.WComponent)
t.WDXFileUploader=n
var o=function(e){function i(t,i,n){var o=e.call(this,t||"*","WDXMenu","",i)||this
return o.items=[],o.title=n||"Seleziona",o.mapOfId={},o.caret='<span class="caret"></span>',o}return __extends(i,e),i.prototype.addItem=function(t,e,i,n){return"string"==typeof t?this.items.push({id:t,icon:e,text:i,marked:n}):this.items.push(t),this},i.prototype.addSep=function(){return this.items.push({id:"",type:"b"}),this},i.prototype.addSection=function(t){return this.items.push({id:"",type:"s",text:t}),this},i.prototype.onClick=function(t){this.handler=t},i.prototype.componentDidMount=function(){var e=this
null==this.title&&(this.title=""),this.mapOfId={}
for(var i=[],n=-1,o=!1,r=0,s=this.items;r<s.length;r++){var a=s[r]
if("b"!=a.type&&"s"!=a.type){var l=void 0
l=a.icon?a.marked?{text:'<strong><i class="fa '+a.icon+'"></i> '+a.text+"</strong>"}:{text:'<i class="fa '+a.icon+'"></i> '+a.text}:a.marked?{text:"<strong>"+a.text+"</strong>"}:{text:a.text},o&&(l.beginGroup=!0,o=!1),i.push(l),n++,this.mapOfId[n]=a.id}else o=!0}this.caret?this.mtitle=this.title+" "+this.caret:this.mtitle=this.title,this.root.dxMenu({items:[{text:this.mtitle,items:i}],animation:null,itemTemplate:function(t){return t.text},showFirstSubmenuMode:"onClick",onItemClick:function(i){if(t.WUtil.getString(i.itemData,"text")!=e.mtitle&&e.handler){var n={key:e.mapOfId[i.itemIndex],data:e.data}
e.handler(n)}}})},i}(t.WComponent)
t.WDXMenu=o
var r=function(e){function i(t,i,n,o){void 0===i&&(i="month")
var r=e.call(this,t||"*","WDXCalendar",i,n,o)||this
return r.rootTag="div",r}return __extends(i,e),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},set:function(t){if(this._min=t,this.root&&this.root.length){var e={min:this._min}
this.root.dxCalendar(e)}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},set:function(t){if(this._max=t,this.root&&this.root.length){var e={max:this._max}
this.root.dxCalendar(e)}},enumerable:!1,configurable:!0}),i.prototype.onDoubleClick=function(t){this.handlers._doubleclick||(this.handlers._doubleclick=[]),this.handlers._doubleclick.push(t)},i.prototype.cellTemplate=function(t){if(this._template=t,this.root&&this.root.length){var e={cellTemplate:this._template}
this.root.dxCalendar(e)}},i.prototype.refresh=function(){if(!this.mounted)return this
if(this.root&&this.root.length){this.root.dxCalendar({cellTemplate:"cell"})
var t={}
this._template&&(t.cellTemplate=this._template,this.root.dxCalendar(t))}return this},i.prototype.repaint=function(){return this.mounted?(this.root&&this.root.length&&this.root.dxCalendar("instance").repaint(),this):this},i.prototype.updateProps=function(t){if(e.prototype.updateProps.call(this,t),this.props||(this.props="month"),this.root&&this.root.length){var i={zoomLevel:this.props}
this.root.dxCalendar(i)}},i.prototype.updateState=function(t){if(e.prototype.updateState.call(this,t),this.root&&this.root.length){var i={value:this.state}
this.dontTrigger=!0,this.root.dxCalendar(i)}},i.prototype.beforeInit=function(t){},i.prototype.componentDidMount=function(){var e=this
this.props||(this.props="month")
var i={value:new Date,disabled:!1,firstDayOfWeek:1,zoomLevel:this.props,minZoomLevel:this.props,maxZoomLevel:this.props,onValueChanged:function(i){e.trigger("statechange",t.WUtil.toDate(i.value))},onOptionChanged:function(i){e.trigger("propschange",t.WUtil.toString(i.value))},min:this._min,max:this._max,cellTemplate:this._template}
this._template?i.cellTemplate=this._template:i.cellTemplate="cell",this.beforeInit(i),this.root.dxCalendar(i)
var n=this
this.root.on("dblclick","tbody td",function(t){if(n.handlers._doubleclick)for(var e=0,i=n.handlers._doubleclick;e<i.length;e++){var o=i[e]
o({element:n.root})}})},i}(t.WComponent)
t.WDXCalendar=r
var s=function(t){function e(e){var i=t.call(this,e||"*","WDxCircularGauge")||this
return i.height=175,i.ranges=[{startValue:-100,endValue:-80,color:"red"},{startValue:-80,endValue:-60,color:"rgb(255, 51, 0)"},{startValue:-60,endValue:-40,color:"rgb(255, 102, 0)"},{startValue:-40,endValue:-20,color:"rgb(255, 153, 0)"},{startValue:-20,endValue:0,color:"rgb(255, 204, 0)"},{startValue:0,endValue:20,color:"rgb(255, 255, 0)"},{startValue:20,endValue:40,color:"rgb(204, 255, 0)"},{startValue:40,endValue:60,color:"rgb(153, 255, 0)"},{startValue:60,endValue:80,color:"rgb(102, 255, 0)"},{startValue:80,endValue:100,color:"rgb(51, 255, 0)"}],i.scale={startValue:-100,endValue:100,tick:{color:"#536878"},tickInterval:20,label:{indentFromTick:3}},i.geometry={startAngle:180,endAngle:360},i}return __extends(e,t),e.prototype.updateState=function(e){if(t.prototype.updateState.call(this,e),this.root&&this.root.length){var i={value:this.state}
this.root.dxCircularGauge(i)}},e.prototype.beforeInit=function(t){},e.prototype.componentDidMount=function(){this.height||(this.height=175)
var t={offset:0,ranges:this.ranges},e={height:this.height},i={scale:this.scale,size:e,geometry:this.geometry,rangeContainer:t,value:this.state}
this.beforeInit(i),this.root.dxCircularGauge(i)},e}(t.WComponent)
t.WDxCircularGauge=s
var a=function(t){function e(e){return t.call(this,e||"*","WDxTreeView")||this}return __extends(e,t),e.prototype.getInstance=function(t){return this.mounted?(t&&this.root.dxTreeView(t),this.root.dxTreeView("instance")):null},e.prototype.onItemClick=function(t){if(this.handlers._onItemClick=[t],this.mounted){var e={onItemClick:t}
this.root.dxTreeView(e)}},e.prototype.onSelectionChanged=function(t){if(this.handlers._onSelectionChanged=[t],this.mounted){var e={onSelectionChanged:t}
this.root.dxTreeView(e)}},e.prototype.onItemRendered=function(t){if(this.handlers._onItemRendered=[t],this.mounted){var e={onItemRendered:t}
this.root.dxTreeView(e)}},e.prototype.getSelectedItems=function(){if(!this.mounted)return[]
var t=this.root.dxTreeView("instance").getSelectedNodes()
return t?t.map(function(t){return t.itemData}):[]},e.prototype.select=function(t){return this.mounted?(this.root.dxTreeView("selectItem",t),this):this},e.prototype.off=function(e){if(t.prototype.off.call(this,e),!e)return this
var i={}
return e.indexOf("_onItemClick")>=0&&(i.onItemClick=null),e.indexOf("_onSelectionChanged")>=0&&(i.onSelectionChanged=null),e.indexOf("_onItemRendered")>=0&&(i.onItemRendered=null),this.root.dxTreeView(i),this},e.prototype.updateState=function(e){if(t.prototype.updateState.call(this,e),this.root&&this.root.length){var i={items:e}
this.root.dxTreeView(i)}},e.prototype.updateProps=function(e){t.prototype.updateProps.call(this,e),this.mounted&&this.props&&this.root.dxTreeView("instance").option("searchMode",this.props)},e.prototype.beforeInit=function(t){},e.prototype.expandAll=function(){return this.mounted?(this.root.dxTreeView("expandAll"),this):this},e.prototype.collapseAll=function(){return this.mounted?(this.root.dxTreeView("collapseAll"),this):this},e.prototype.componentDidMount=function(){var t={height:this.height,width:this.width,searchEnabled:this.searchEnabled,items:this.state}
"multiple"==this.selectionMode&&(t.selectionMode="multiple",t.showCheckBoxesMode="normal",t.selectByClick=this.selectByClick),this.handlers._onItemClick&&this.handlers._onItemClick.length&&(t.onItemClick=this.handlers._onItemClick[0]),this.handlers._onSelectionChanged&&this.handlers._onSelectionChanged.length&&(t.onSelectionChanged=this.handlers._onSelectionChanged[0]),this.handlers._onItemRendered&&this.handlers._onItemRendered.length&&(t.onItemRendered=this.handlers._onItemRendered[0]),this.beforeInit(t)
var e=this.root.dxTreeView(t)
this.props&&e.option("searchMode",this.props)},e}(t.WComponent)
t.WDxTreeView=a}(WUX||(WUX={}))
var WUX
!function(t){var e=function(e){function i(t,i,n,o,r,s,a){var l=e.call(this,t||"*","WSelect2",a,o,r,s)||this
return l.rootTag="select",l.options=i,l.multiple=n,l.openOnFocus=!0,l.dontOpen=!1,l.lastChange=0,l.count=i?i.length:0,l._init=!1,l}return __extends(i,e),Object.defineProperty(i.prototype,"visible",{set:function(t){this._visible=t,this.internal&&(this.internal.visible=t),this.root&&this.root.length&&(this.$cb||(this.$cb=this.root.parent().find('span[role="combobox"]').first()),this._visible?this.$cb&&this.$cb.length?this.$cb.show():this.root.show():this.$cb&&this.$cb.length?this.$cb.hide():this.root.hide())},enumerable:!1,configurable:!0}),i.prototype.focus=function(){return this.mounted&&this._enabled?(this.root.focus(),this.$cb||(this.$cb=this.root.parent().find('span[role="combobox"]').first()),this.$cb&&this.$cb.length&&this.$cb.focus(),this):this},i.prototype.getProps=function(){var t=this
return this.root?(this.props=[],this.root.find("option:selected").each(function(e,i){var n=$(i).text()
t.prefix&&(n=t.prefix+" "+n),t.suffix&&(n=n+" "+t.suffix),t.props.push(n)}),this.props):this.props},i.prototype.getState=function(){return this.root?this.state=this.root.val():this.state},i.prototype.getValue=function(){var e=this.getState()
if(null==e)return null
var i=t.WUtil.toString(this.getProps())
return i||(i=""+e),{id:e,text:i}},i.prototype.select=function(t){if(!this.root)return this
var e=this.root.find("option:eq("+t+")").val()
return null==e?this:(this.root.select2("val",e),this)},i.prototype.selectVal=function(t,e,i){if(!t||!t.length)return void this.root.val([]).trigger("change")
if(i){this.root.empty()
for(var n=0;n<t.length;n++){var o=e?e[n]:""+t[n]
this.root.append('<option value="'+t[n]+'">'+o+"</option>")}}this.root.select2("val",t)},i.prototype.setOptions=function(t){if(this.options=t,!this.root)return this
this.root.empty()
var e=[]
if(this.options)for(var i=0,n=this.options;i<n.length;i++){var o=n[i]
"string"==typeof o?e.push({id:o,text:o}):e.push(o)}var r={data:e,placeholder:"",allowClear:!0}
return this.init(r),this},i.prototype.reload=function(t){return t&&this.setState(null),this.mounted?(this.root.empty(),this.componentDidMount(),this):this},i.prototype.render=function(){return this.multiple?this.buildRoot(this.rootTag,"",'multiple="multiple"',"form-control"):this.buildRoot(this.rootTag,"","","form-control")},i.prototype.updateState=function(i){if(e.prototype.updateState.call(this,i),this.root){if(Array.isArray(this.state)&&this.state.length>1)this.root.append('<option value="'+this.state[0]+'">'+this.state[this.state.length-1]+"</option>"),this.root.val(this.state[0]).trigger("change")
else if(this.state)if("object"==typeof this.state){var n=this.state.text?this.state.text:this.state.name
null==n&&(n=this.state.id),this.root.append('<option value="'+this.state.id+'">'+t.WUtil.toText(n)+"</option>"),this.root.val(this.state.id).trigger("change")}else this.root.val(this.state).trigger("change")
else this.root.val([]).trigger("change")
this.dontTrigger=!0,this.lastChange=(new Date).getTime()}},i.prototype.componentDidMount=function(){if(this._tooltip&&this.root.attr("title",this._tooltip),this.options)for(var e=0,i=this.options;e<i.length;e++){var n=i[e]
"string"==typeof n?this.root.append("<option>"+t.WUtil.toText(n)+"</option>"):this.root.append('<option value="'+n.id+'">'+t.WUtil.toText(n.text)+"</option>")}var o={placeholder:"",allowClear:!0}
this.init(o)},i.prototype.init=function(e){var i=this
this._init&&(this.root.empty(),this.root.next("span.select2").remove()),this.root.select2(e),this.updateState(this.state),e?e.data&&(this.count=t.WUtil.size(e.data)):this.count=0,this._init||(this.$cb=this.root.parent().find('span[role="combobox"]').first(),this.$cb.length?this.$cb.on("focus",function(t){if(null!=t.relatedTarget)return i.dontOpen?void(i.dontOpen=!1):void(i.openOnFocus&&setTimeout(function(){if(i.multiple){if(i.$cb&&i.$cb.length){var t=i.$cb.find("input.select2-search__field").first()
t&&t.length&&!t.is(":focus")&&t.focus()}}else{(new Date).getTime()-i.lastChange>900&&i.root.select2("open"),i.dontOpen=!0}},50))}):this.root.on("focus",function(t){if(i.dontOpen)return void(i.dontOpen=!1)
i.openOnFocus&&setTimeout(function(){(new Date).getTime()-i.lastChange>900&&i.root.select2("open"),i.dontOpen=!0},50)}),this.multiple?(this.root.on("select2:select",function(t){i.lastChange=(new Date).getTime(),i.trigger("statechange")}),this.root.on("select2:unselect",function(t){setTimeout(function(){i.lastChange=(new Date).getTime(),i.trigger("statechange")},0)})):this.root.on("change",function(t){i.lastChange=(new Date).getTime(),i.trigger("statechange")}),this._init=!0)},i.prototype.transferTo=function(t,n,o){return t instanceof i?(t.setState(this.getValue(),n,o),!0):e.prototype.transferTo.call(this,t,n,o)},i}(t.WComponent)
t.WSelect2=e
var i=function(e){function i(t,i,n,o,r,s){var a=e.call(this,t,"WTags",i,n,o,r)||this
return a._classStyle||(a._classStyle="label-default"),a.hideZeroValues=!1,a}return __extends(i,e),i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.buildView()},i.prototype.componentDidMount=function(){this.buildView()},i.prototype.buildView=function(){if(this.root&&(this.root.html(""),this.state)){"object"!=typeof this.state&&(this.state=t.WUtil.toArray(this.state))
for(var e in this.state){var i=this.state[e],n=t.format(i)
if(n&&(!this.hideZeroValues||"0"!=n&&"null"!=n)){if(n.length>100&&(n=n.substring(0,97)+"..."),"boolean"==typeof this.state[e]&&this.props instanceof t.WFormPanel){var o=this.props.getField(e)
o&&o.label&&(n=o.label+"="+n)}this.root.append('<span class="label '+this._classStyle+'">'+n+"</span>")}}}},i}(t.WComponent)
t.WTags=i
var n=function(e){function i(i,n,o,r,s,a){var l=e.call(this,i||"*","WLinkOptions",a,o,r,s)||this
return l.rootTag="span",l._style=t.css(r,l._baseStyle="display:inline-block;"),l.options=n,l}return __extends(i,e),Object.defineProperty(i.prototype,"tooltip",{set:function(t){if(this._tooltip=t,this.internal&&(this.internal.tooltip=t),this.options&&this.options.length)for(var e=0;e<this.options.length;e++){var i=$("#"+this.id+"-"+e)
i.length&&(this._tooltip&&i.attr("title",this._tooltip))}},enumerable:!1,configurable:!0}),i.prototype.select=function(t){return this},i.prototype.componentDidMount=function(){var t=this
if(this.options&&this.options.length){for(var e="",i=0;i<this.options.length;i++){var n=this.options[i]
e+="string"==typeof n?' <a id="'+this.id+"-"+i+'"> '+n+" </a>":' <a id="'+this.id+"-"+i+'"> '+n.text+" </a>",i<this.options.length-1&&(e+=" | ")}this.root.html(e)
for(var o=this,i=0;i<this.options.length;i++)!function(e){var i=$("#"+o.id+"-"+e)
if(!i.length)return"continue"
o._tooltip&&i.attr("title",o._tooltip)
var n=o.options[e]
i.click(function(){t.setState(n)})}(i)}},i}(t.WComponent)
t.WLinkOptions=n
var o=function(e){function i(t,i,n,o,r,s){void 0===o&&(o="btn-group")
var a=e.call(this,t,"WButtonDropDown",null,o,r,s)||this
return a.updateState(i),a.options=n,a}return __extends(i,e),i.prototype.componentDidMount=function(){var e=this
this._tooltip&&this.root.attr("title",this._tooltip),this.btnClass||(this.btnClass="btn btn-gray")
var i=t.build("button",this.state+' <span class="caret"></span>',this.btnClass+" dropdown-toggle",'data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"')
this.root.append(i)
var n=$('<ul class="dropdown-menu"></ul>')
if(this.root.append(n),this.options)for(var o=0,r=this.options;o<r.length;o++){var s=r[o],a="string"==typeof s?s:s.text,l="string"==typeof s?s:s.id,h=$("<li></li>")
n.append(h)
var u=$('<a href="#" data-id="'+l+'">'+a+"</a>")
h.append(u),u.on("click",function(i){var n=$(i.currentTarget).attr("data-id")
e.trigger("propschange",t.WUtil.toString(n))})}},i.prototype.componentWillUpdate=function(t,e){e||(e=""),this.root.children("button:first").html(e+' <span class="caret"></span>')},i}(t.WComponent)
t.WButtonSelect=o
var r=function(){function e(e,i,n,o,r,s,a){for(var l=[],h=7;h<arguments.length;h++)l[h-7]=arguments[h]
this.grid=e,this.row=i,this.index=n,this.width=o||0,this.height=r||0,this.classStyle=s,this.style=a,this.titles=[],this.components=l||[]
for(var u=0,d=l;u<d.length;u++){var p=d[u]
p instanceof t.WComponent&&!p.parent&&(p.parent=this.grid)}}return e.prototype.css=function(e){return e?("string"==typeof e?e.indexOf(":")>0?this.style=t.style(e):this.classStyle=e:(e.n&&(this.classStyle=e.n),this.style=e),this.grid.mounted&&t.setCss($("#"+this.grid.id+"-"+this.row.index+"-"+this.index),e),this):this},e.prototype.removeClass=function(e){return e?(this.classStyle&&(this.classStyle=t.removeClass(this.classStyle,e)),this.grid.mounted&&$("#"+this.grid.id+"-"+this.row.index+"-"+this.index).removeClass(e),this):this},e.prototype.addCol=function(t,e){for(var i,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]
return(i=this.row).addCol.apply(i,__spreadArray([t,e],n,!1))},e.prototype.addRow=function(t,e,i,n){return this.grid.addRow(t,e,i,n)},e.prototype.add=function(e){return e&&this.components.push(e),e instanceof t.WComponent&&!e.parent&&(e.parent=this.grid),this},e.prototype.cell=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i]
this.components=e||[]
for(var n=0,o=e;n<o.length;n++){var r=o[n]
r instanceof t.WComponent&&!r.parent&&(r.parent=this.grid)}return this},e.prototype.y=function(){return this.ylayout=!0,this},e.prototype.tip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]
return this.titles=t||[],this},e.prototype.title=function(t){return this.titles&&this.titles.length?t?this.titles.length>t?this.titles[t]:"":this.titles[0]:""},e}()
t.WGridCol=r
var s=function(){function e(e,i,n,o,r,s,a){this.grid=e,this.index=i,this.width=n||0,this.height=o||0,this.classStyle=r,this.style=s,this.cols=[],this.attributes=t.attributes(a)}return e.prototype.css=function(e){return e?("string"==typeof e?e.indexOf(":")>0?this.style=t.style(e):this.classStyle=e:(e.n&&(this.classStyle=e.n),this.style=e),this.grid.mounted&&t.setCss($("#"+this.grid.id+"-"+this.index),e),this):this},e.prototype.removeClass=function(e){return e?(this.classStyle&&(this.classStyle=t.removeClass(this.classStyle,e)),this.grid.mounted&&$("#"+this.grid.id+"-"+this.index).removeClass(e),this):this},e.prototype.addCol=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n]
!t&&this.grid.rows.length>1&&this.grid.rows[0].cols.length>this.cols.length&&(t=this.grid.rows[0].cols[this.cols.length].width)
var o=new(r.bind.apply(r,__spreadArray([void 0,this.grid,this,this.cols.length,t,e,"",""],i,!1)))
return this.cols.push(o),o},e.prototype.addRow=function(t,e,i,n){return this.grid.addRow(t,e,i,n)},e}()
t.WGridRow=s
var a=function(e){function i(t,i,n,o,r){var s=e.call(this,t||"*","WGrid",r,i,n,o)||this
return s.rows=[],s.overflow="auto",s}return __extends(i,e),i.prototype.getWidth=function(){for(var t=0,e=0;e<this.rows.length;e++){for(var i=this.rows[e],n=0,o=0;o<i.cols.length;o++){var r=i.cols[o].width
n+=r||50}n>t&&(t=n)}return t},i.prototype.getHeight=function(){for(var t=0,e=0;e<this.rows.length;e++){var i=this.rows[e]
if(i.height)t+=i.height
else{for(var n=0,o=0;o<i.cols.length;o++)i.cols[o].height>n&&(n=i.cols[o].height)
0==n&&(n=25),t+=n}}return t},i.prototype.getRowIndex=function(t){if(!this.rows||!this.rows.length)return-1
for(var e=0;e<this.rows.length;e++)if(this.rows[e].ref==t)return e
return-1},i.prototype.removeAll=function(){return this.rows=[],this},i.prototype.addRow=function(t,e,i,n,o){var r=new s(this,this.rows.length,t,e,i,n,o)
return this.rows.push(r),r},i.prototype.addCol=function(t,e){for(var i,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]
return(i=this.row()).addCol.apply(i,__spreadArray([t,e],n,!1))},i.prototype.add=function(t){return t?this.col().add(t):this.col()},i.prototype.y=function(){return this.col().y()},i.prototype.tip=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i]
return(t=this.col()).tip.apply(t,e)},i.prototype.row=function(t){if(t||!(this.rows.length<=t))return this.rows.length||this.addRow(),void 0!==t&&null!==t||(t=this.rows.length-1),this.rows[t]},i.prototype.col=function(t,e){var i=this.row(t)
if(i&&(e||!(i.cols.length<=e)))return i.cols.length||i.addCol(),void 0!==e&&null!==e||(e=i.cols.length-1),i.cols[e]},i.prototype.find=function(e){for(var i=0;i<this.rows.length;i++)for(var n=this.rows[i],o=0;o<n.cols.length;o++)for(var r=n.cols[o],s=0;s<r.components.length;s++)if(t.same(r.components[s],e))return[i,o,s]
return[-1,-1,-1]},i.prototype.element=function(t,e,i){if(void 0===e||null===e)return $("#"+this.id+"-"+t)
if(void 0===i||null===i)return $("#"+this.id+"-"+t+"-"+e)
var n=this.col(t,e)
if(n)return n.components.length>i?n.components[i]:void 0},i.prototype.html=function(t,e,i,n){if(!this.mounted)return!1
if(t>=0&&this.rows.length<=t)return!1
if(e>=0&&this.rows[t].cols.length<=e)return!1
var o=this.rows[t].cols[e],r=this.id+"-"+t+"-"+e
return o.ylayout?$("#"+r+"-"+i).html(n):$("#"+r).html(n),!0},i.prototype.cell=function(e,i){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]
if(e>=0&&this.rows.length<=e)return!1
if(i>=0&&this.rows[e].cols.length<=i)return!1
var r=this.rows[e].cols[i]
if(this.mounted){n&&1==n.length&&(r.ylayout=!1)
var s=this.id+"-"+e+"-"+i
if(r.ylayout)for(var a=0;a<r.components.length;a++)$("#"+s+"-"+a).html("")
else $("#"+s).html("")
if(n)for(var a=0;a<n.length;a++){r.ylayout&&(s=this.id+"-"+e+"-"+i+"-"+a)
var l=n[a]
l instanceof t.WComponent?(l.mount($("#"+s)),l.parent||(l.parent=this)):$("#"+s).append(l)}}return r.cell.apply(r,n),!0},i.prototype.make=function(){this.overflow||(this.overflow="auto")
for(var e="",i=0;i<this.rows.length;i++){var n=this.rows[i],o=0==i,r=i==this.rows.length-1
n.attributes?e+='<div id="'+this.id+"-"+i+'"'+this.buildRowStyle(n,o,r)+this.buildClass(n)+" "+n.attributes+">":e+='<div id="'+this.id+"-"+i+'"'+this.buildRowStyle(n,o,r)+this.buildClass(n)+">"
for(var s=0;s<n.cols.length;s++){var a=n.cols[s],l=this.id+"-"+i+"-"+s
if(a.ylayout){e+="<span"+this.buildColStyle(a,o,r,!1,n.height)+this.buildClass(a)+' id="'+l+'">'
for(var h=Math.round(100/a.components.length),u=0;u<a.components.length;u++){var d=t.css(this.ydivStyle,this.isText(a.components[u])?this.textStyle:""),p=a.title(u),c=p?' title="'+p+'"':""
e+='<div id="'+this.id+"-"+i+"-"+s+"-"+u+'" + style="width:100%;height:'+h+"%;"+d+'"'+c+"></div>"}e+="</span>"}else{var p=a.title(),f=p?' title="'+p+'"':""
0==a.width&&s==n.cols.length-1?e+="<div"+this.buildColStyle(a,o,r,!0,n.height)+this.buildClass(a)+' id="'+l+'"'+f+"></div>":e+="<span"+this.buildColStyle(a,o,r,!1,n.height)+this.buildClass(a)+' id="'+l+'"'+f+"></span>"}}e+="</div>"}return e},i.prototype.componentDidMount=function(){for(var e=0;e<this.rows.length;e++)for(var i=this.rows[e],n=0;n<i.cols.length;n++)for(var o=i.cols[n],r=0;r<o.components.length;r++){var s=o.components[r],a=this.id+"-"+e+"-"+n
o.ylayout&&(a+="-"+r),s instanceof t.WComponent?s.mount($("#"+a)):$("#"+a).append(s)}},i.prototype.componentWillUnmount=function(){for(var e=0,i=this.rows;e<i.length;e++)for(var n=i[e],o=0,r=n.cols;o<r.length;o++)for(var s=r[o],a=0,l=s.components;a<l.length;a++){var h=l[a]
h instanceof t.WComponent&&h.unmount()}},i.prototype.buildRowStyle=function(e,i,n){var o=""
return o=e.width<0?t.css(this.rowsStyle,{d:"table",h:e.height},e.style):t.css(this.rowsStyle,{w:e.width,h:e.height},e.style),o.indexOf("overflow")>0?' style="'+o+'"':e.width||e.height?' style="'+o+"overflow:"+this.overflow+';"':' style="'+o+'overflow:hidden;"'},i.prototype.buildColStyle=function(e,i,n,o,r){var s=[]
this.ydivStyle&&e.ylayout||s.push(this.colsStyle),i&&this.headStyle?s.push(this.headStyle):n&&this.footStyle&&s.push(this.footStyle),!e.ylayout&&this.isAllText(e.components)&&s.push(this.textStyle),s.push(e.style),s.push({w:e.width,h:e.height?e.height:r})
var a=t.css.apply(void 0,s)
return o?a.indexOf("overflow")>0?' style="'+a+'"':' style="'+a+"overflow:"+this.overflow+';"':a.indexOf("overflow")>0?' style="'+a+'float:left;"':' style="'+a+'float:left;overflow:hidden;"'},i.prototype.buildClass=function(t){return t.classStyle?' class="'+t.classStyle+'"':""},i.prototype.isAllText=function(t){if(!t)return!1
for(var e=0,i=t;e<i.length;e++){var n=i[e]
if(!this.isText(n))return!1}return!0},i.prototype.isText=function(t){return"string"==typeof t&&(!!t&&(t.indexOf("<")<0||!(t.indexOf("<di")>=0)&&(!(t.indexOf("<in")>=0)&&(!(t.indexOf("<se")>=0)&&(!(t.indexOf("<bu")>=0)&&(!(t.indexOf("<im")>=0)&&(!(t.indexOf("<ta")>=0)&&(!(t.indexOf("<if")>=0)&&!(t.indexOf("<a")>=0)))))))))},i}(t.WComponent)
t.WGrid=a
var l=function(e){function i(i,n,o,r,s,a,l){void 0===n&&(n="WFullDialog"),void 0===o&&(o=!0),void 0===r&&(r=!0)
var h=e.call(this,i,n,void 0,s,a,l)||this
return h.buttons=[],h.tagTitle="h3",r&&(o||(h.txtCancel=t.RES.CLOSE),h.buttonCancel()),o&&h.buttonOk(),h.ok=!1,h.cancel=!1,h.isShown=!1,h.id&&"*"!=h.id&&$("#"+h.id).length&&$("#"+h.id).remove(),WuxDOM.onRender(function(t){h.mounted||h.mount(t.element)}),h}return __extends(i,e),i.prototype.onShownModal=function(t){this.handlers._pageshown||(this.handlers._pageshown=[]),this.handlers._pageshown.push(t)},i.prototype.onHiddenModal=function(t){this.handlers._pagehidden||(this.handlers._pagehidden=[]),this.handlers._pagehidden.push(t)},Object.defineProperty(i.prototype,"header",{get:function(){var e=this
return this.cntHeader?this.cntHeader:(this.cntHeader=new t.WContainer("","modal-header"),this.btnCloseHeader=new t.WButton(this.subId("bhc"),'<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>',void 0,"close"),this.btnCloseHeader.on("click",function(t){e.close()}),this.cntHeader.add(this.btnCloseHeader),this.cntHeader)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"body",{get:function(){return this.cntBody?this.cntBody:(this.cntBody=new t.WContainer("",t.cls("modal-body",this._classStyle),"",this._attributes),this.cntBody)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"footer",{get:function(){return this.cntFooter?this.cntFooter:(this.cntFooter=new t.WContainer("","modal-footer"),this.cntFooter)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(t){this._title&&this.cntHeader?(this._title=t,this.cntHeader.getRoot().children(this.tagTitle+":first").text(t)):(this._title=t,this.header.add(this.buildTitle(t)))},enumerable:!1,configurable:!0}),i.prototype.onClickOk=function(){return!0},i.prototype.onClickCancel=function(){return!0},i.prototype.buildBtnOK=function(){return new t.WButton(this.subId("bfo"),t.RES.OK,"",t.BTN.INFO+" button-sm","","")},i.prototype.buildBtnCancel=function(){return this.txtCancel?new t.WButton(this.subId("bfc"),this.txtCancel,"",t.BTN.SECONDARY+" button-sm","",""):new t.WButton(this.subId("bfc"),t.RES.CANCEL,"",t.BTN.SECONDARY+" button-sm","","")},i.prototype.buttonOk=function(){var t=this
if(this.btnOK)return this.btnOK
this.btnOK=this.buildBtnOK(),this.btnOK.on("click",function(e){t.onClickOk()&&(t.ok=!0,t.cancel=!1,t.hide())}),this.buttons.push(this.btnOK)},i.prototype.buttonCancel=function(){var t=this
if(this.btnCancel)return this.btnCancel
this.btnCancel=this.buildBtnCancel(),this.btnCancel.on("click",function(e){t.onClickCancel()&&(t.ok=!1,t.cancel=!0,t.hide())}),this.buttons.push(this.btnCancel)},i.prototype.show=function(t,e){if(this.beforeShow()&&(this.ok=!1,this.cancel=!1,this.parent=t,this.parentHandler=e,this.mounted||WuxDOM.mount(this),this.root&&this.root.length)){if(i.fullDialogsShown.length?i.fullDialogsShown[i.fullDialogsShown.length-1].visible=!1:this.hideView(),this.cntRoot.visible=!0,this.isShown=!0,this.onShown(),i.fullDialogsShown.push(this),!this.handlers._pageshown)return
for(var n=0,o=this.handlers._pageshown;n<o.length;n++){(0,o[n])(this.createEvent("_pageshown"))}}},i.prototype.hide=function(t){if(this.root&&this.root.length){if(this.cntRoot.visible=!1,this.isShown=!1,this.onHidden(),i.fullDialogsShown.pop(),i.fullDialogsShown.length?i.fullDialogsShown[i.fullDialogsShown.length-1].visible=!0:this.showView(),this.parentHandler&&(this.parentHandler(t),this.parentHandler=null),!this.handlers._pagehidden)return
for(var e=0,n=this.handlers._pagehidden;e<n.length;e++){(0,n[e])(this.createEvent("_pagehidden"))}}},i.prototype.showView=function(){if(this.parent){var e=t.getRootComponent(this.parent)
e&&(e.visible=!0)}if(this.phHidden){var i=t.getPageHeader()
i&&i.length&&i.show(),this.phHidden=!1}},i.prototype.hideView=function(){if(this.phHidden=!1,this.parent){var e=t.getRootComponent(this.parent)
e&&(e.visible=!1)}var i=t.getPageHeader()
i&&i.length&&i.is(":visible")&&(i.hide(),this.phHidden=!0)},i.prototype.close=function(){this.ok=!1,this.cancel=!1,this.hide()},i.prototype.selection=function(e,i){if(!e)return!1
var n=e.getSelectedRows()
if(!n||!n.length)return i&&t.showWarning(i),!1
var o=e.getSelectedRowsData()
if(!o||!o.length)return i&&t.showWarning(i),!1
if(null==this.props||"number"==typeof this.props){var r=n[0]
this.setProps(r)}return this.setState(o[0]),!0},i.prototype.beforeShow=function(){return!0},i.prototype.onShown=function(){},i.prototype.onHidden=function(){},i.prototype.render=function(){this.isShown=!1,this.cntRoot=new t.WContainer(this.id,"inmodal"),this.cntRoot.visible=!1,this.cntMain=this.cntRoot.addContainer("","modal-dialog",t.css(this._style,{w:"100%",m:0,z:"auto"})),this.cntContent=this.cntMain.addContainer("","modal-content"),this.cntHeader&&this.cntContent.addContainer(this.cntHeader),this.cntBody&&this.cntContent.addContainer(this.cntBody)
for(var e=0,i=this.buttons;e<i.length;e++){var n=i[e]
this.footer.add(n)}return this.cntFooter&&this.cntContent.addContainer(this.cntFooter),this.cntRoot},i.prototype.componentWillUnmount=function(){this.isShown=!1,this.btnCloseHeader&&this.btnCloseHeader.unmount(),this.btnCancel&&this.btnCancel.unmount(),this.cntFooter&&this.cntFooter.unmount(),this.cntBody&&this.cntBody.unmount(),this.cntHeader&&this.cntHeader.unmount(),this.cntContent&&this.cntContent.unmount(),this.cntMain&&this.cntMain.unmount(),this.cntRoot&&this.cntRoot.unmount()},i.prototype.buildTitle=function(e){return this.tagTitle||(this.tagTitle="h3"),"<"+this.tagTitle+">"+t.WUtil.toText(e)+"</"+this.tagTitle+">"},i.fullDialogsShown=[],i}(t.WComponent)
t.WFullDialog=l
var h=function(e){function i(i,n,o,r,s){var a=e.call(this,i,"WLookupDialog")||this
return a.lc="Codice",a.ld="Descrizione",a.title=n,s||(a.fp=new t.WFormPanel(a.subId("fp")),a.fp.addRow(),a.fp.addTextField("c",a.lc),a.fp.addRow(),a.fp.addTextField("d",a.ld),a.fp.on("statechange",function(t){a.lookup&&a.lookup(a.getFilter(),function(t){a.table.setState(t)})})),r?(r.id||(r.id=a.subId("tbl")),r.header&&r.header.length||(r.header=[a.lc,a.ld]),a.table=r,a.table.keys=o):a.table=new t.WTable(a.subId("tbl"),[a.lc,a.ld],o),a.table.widths[0]=200,s&&(a.table.filter=!0),a.table.css({h:360}),a.table.onDoubleClick(function(t){var e=a.table.getSelectedRowsData()
a.selected=e&&e.length?e[0]:void 0,a.selected&&(a.hide(),a.trigger("_selected",a.selected))}),s?a.body.addRow().addCol("12",{pt:8,pb:8}).add(a.table):a.body.addRow().addCol("12").add(a.fp).addRow().addCol("12",{pt:8,pb:8}).add(a.table),a}return __extends(i,e),i.prototype.updateState=function(t){e.prototype.updateState.call(this,t),this.table&&this.table.setState(this.state)},i.prototype.setFilter=function(e){this.fp&&(this.fp.setValue("c",t.WUtil.getItem(e,0)),this.fp.setValue("d",t.WUtil.getItem(e,1)))},i.prototype.getFilter=function(){var t=[]
return this.fp?(t.push(this.fp.getValue("c")),t.push(this.fp.getValue("d")),t):(t.push(""),t.push(""),t)},i.prototype.onSelected=function(t){this.handlers._selected||(this.handlers._selected=[]),this.handlers._selected.push(t)},i.prototype.onShown=function(){if(this.startup=!0,this.table.refresh(),this.fp){this.fp.getValue("d")?this.fp.focusOn("d"):this.fp.focusOn("c")}},i.prototype.onClickOk=function(){var e=this,i=this.table.getSelectedRowsData()
return this.selected=i&&i.length?i[0]:void 0,this.selected?(setTimeout(function(){e.trigger("_selected",e.selected)},100),!0):void t.showWarning("Selezionare un elemento.")},i}(t.WDialog)
t.WLookupDialog=h
var u=function(t){function e(e,i){void 0===i&&(i="btn-group")
var n=t.call(this,e||"*","WMenu","",i)||this
return n.items=[],n.title="Seleziona",n}return __extends(e,t),e.prototype.addItem=function(t,e,i,n){return"string"==typeof t?this.items.push({id:t,icon:e,text:i,marked:n}):this.items.push(t),this},e.prototype.addSep=function(){return this.items.push({id:"",type:"b"}),this},e.prototype.addSection=function(t){return this.items.push({id:"",type:"s",text:t}),this},e.prototype.onClick=function(t){this.handler=t},e.prototype.buildItem=function(t,e,i,n,o){var r=this,s=$("<li></li>")
s.appendTo(t)
var a
a=o?$('<a href="#"><i class="fa '+i+'"></i> &nbsp;<strong>'+n+"</strong></a>"):$('<a href="#"><i class="fa '+i+'"></i> &nbsp;'+n+"</a>"),a.appendTo(s),a.on("click",function(t){t.data=r.data,t.key=e,r.handler(t)})},e.prototype.componentDidMount=function(){null==this.title&&(this.title="Seleziona"),$('<a class="btn btn-link btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+this.title+' <span class="caret"></span></a>').appendTo(this.root)
var t=$('<ul class="dropdown-menu dropdown-menu-right"></ul>')
t.appendTo(this.root),this.items||(this.items=[])
for(var e=0,i=this.items;e<i.length;e++){var n=i[e]
n.type&&"i"!=n.type?"b"==n.type?t.append($('<li role="separator" class="divider"></li>')):"s"==n.type&&t.append($('<li class="dropdown-header">'+n.text+"</li>")):this.buildItem(t,n.id,n.icon,n.text,n.marked)}},e}(t.WComponent)
t.WMenu=u}(WUX||(WUX={}))
